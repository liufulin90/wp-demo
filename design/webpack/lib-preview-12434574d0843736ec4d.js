webpackJsonp([12],{"+5ov":function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n("EZ6c"))},"+Oax":function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new c.ObjectScheme(e,o({},t),o({},M,n))}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new c.ArrayScheme(e,[t],o({},j,n))}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayActMap=t.objectActMap=t.ArrayOf=t.ObjectAs=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n("21Sj"),c=n("VjYf"),s=i.Operation.objectSet,u=i.Operation.objectDelete,l=i.Operation.objectMerge,p=i.Operation.arraySet,d=i.Operation.arrayDelete,f=i.Operation.arrayInsert,h=i.Operation.arrayPush,m=i.Operation.arrayUnshift,y=i.Operation.arrayPop,v=i.Operation.arrayShift,g=i.Operation.arrayConcat,b=i.Operation.arrayMatchPush,_=i.Operation.arrayMatchDelete,w=i.Operation.arrayMatchMove,E=i.Operation.arrayFindPush,S=i.Operation.arrayFindDelete,C=i.Operation.arrayFindMove,x=i.Operation.arrayFindSet,M={set:function(e,t){var n=t.key,r=t.value;return s(e,n,r)},delete:function(e,t){var n=t.key;return u(e,n)},merge:function(e,t){var n=t.merge;return l(e,n)}},j={set:function(e,t){var n=t.index,r=t.value;return p(e,n,r)},delete:function(e,t){var n=t.index;return d(e,n)},insert:function(e,t){var n=t.index,r=t.value;return f(e,n,r)},push:function(e,t){var n=t.value;return h(e,n)},pop:function(e,t){return y(e)},shift:function(e,t){return v(e)},unshift:function(e,t){var n=t.value;return m(e,n)},concat:function(e,t){var n=t.concat;return g(e,n)},matchPush:function(e,t){var n=t.value;return b(e,n)},matchDelete:function(e,t){var n=t.value;return _(e,n)},matchMove:function(e,t){var n=t.index,r=t.value;return w(e,n,r)},findPush:function(e,t){var n=t.find,r=t.value;return E(e,n,r)},findDelete:function(e,t){var n=t.find;return S(e,n)},findMove:function(e,t){var n=t.find,r=t.index;return C(e,n,r)},findSet:function(e,t){var n=t.find,r=t.value;return x(e,n,r)}};t.ObjectAs=r,t.ArrayOf=a,t.objectActMap=M,t.arrayActMap=j},"+WZT":function(e,t,n){var r=n("smZ4"),a=n("B+y7"),o=r(a);e.exports=o},"+jvR":function(e,t){function n(e){if(e){var t=e.trim();return t=t.replace(/\.\d\d\d+/,""),t=t.replace(/-/,"/").replace(/-/,"/"),t=t.replace(/T/," ").replace(/Z/," UTC"),t=t.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(t)}}function r(e){return i.inWords(a(e))}function a(e){return(new Date).getTime()-e.getTime()}e.exports=function(e){return e instanceof Date?r(e):"string"==typeof e?r(n(e)):"number"==typeof e?r(new Date(e)):void 0};var o={allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[],wordSeparator:" "}},i=o.strings;e.exports.settings=o,i.inWords=function(e){function t(t,n){var r="function"==typeof t?t(n,e):t,a=i.numbers&&i.numbers[n]||n;return r.replace(/%d/i,a)}var n=i.prefixAgo,r=i.suffixAgo;o.allowFuture&&e<0&&(n=i.prefixFromNow,r=i.suffixFromNow);var a=Math.abs(e)/1e3,c=a/60,s=c/60,u=s/24,l=u/365,p=a<45&&t(i.seconds,Math.round(a))||a<90&&t(i.minute,1)||c<45&&t(i.minutes,Math.round(c))||c<90&&t(i.hour,1)||s<24&&t(i.hours,Math.round(s))||s<48&&t(i.day,1)||u<30&&t(i.days,Math.floor(u))||u<60&&t(i.month,1)||u<365&&t(i.months,Math.floor(u/30))||l<2&&t(i.year,1)||t(i.years,Math.floor(l)),d=i.wordSeparator||"";return void 0===i.wordSeparator&&(d=" "),[n,p,r].join(d).toString().trim()},i.parse=n},"+knQ":function(e,t,n){"use strict";t.a={prefixAgo:null,prefixFromNow:"从现在开始",suffixAgo:"之前",suffixFromNow:null,seconds:"不到 1 分钟",minute:"大约 1 分钟",minutes:"%d 分钟",hour:"大约 1 小时",hours:"大约 %d 小时",day:"1 天",days:"%d 天",month:"大约 1 个月",months:"%d 月",year:"大约 1 年",years:"%d 年",numbers:[],wordSeparator:""}},"/3r2":function(e,t,n){"use strict";n("sZUI"),n("7g8A")},"0VhX":function(e,t,n){function r(e){return null!=e&&o(e.length)&&!a(e)}var a=n("LLOX"),o=n("HdvG");e.exports=r},"0oll":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n("eBYd"),o=n.n(a),i=n("Qza0"),c=n.n(i),s=n("jPtm"),u=(n.n(s),n("AxSz")),l=n("e6k/"),p=n("wfDx"),d=n("Q7kb"),f=n("z4o0"),h=n("2swT"),m=function(){function e(){r(this,e)}return e.prototype.start=function(e){},e.prototype.update=function(e){},e.prototype.stop=function(e){},e.prototype.render=function(e){},e.prototype.pushData=function(e,t,n,r){e&&e.dispatch({type:"entry:state:push-data",payload:{pushType:t,action:n,data:r}})},e}(),y=function(){MB.forceRenderCommentLayer(),MB.forceRenderCommentMarkerPanel()};t.a={containerReducerMap:{screen:l.a,comment:p.a,previewpanel:d.a,layers:f.a},viewMap:{comment:new m},sagaMap:{layerSaga:f.b},extendCallback:function(e){e.forceRenderComment=y;var t=e.store;e.renderPreview=function(e,n){t.dispatch({type:"screens:refresh"}),t.dispatch({type:"widgets:refresh"}),c.a.render(o.a.createElement(s.Provider,{store:t},o.a.createElement(h.a,{app:e})),n)},e.setPreviewObserver=function(t){function n(e,t,n,r,a){return"up"===e&&n.scrollTop>0?Math.max(t,0-n.scrollTop):"down"===e&&n.scrollTop<a.height-r.height?Math.min(t,a.bottom-r.bottom):0}e.setObserver("view:screen:start",function(){$("#ui-screen-panel, a#switch-screen").addClass("active"),t.toggleBoard.toggle("Screen",!0)}),e.setObserver("view:screen:stop",function(){$("#ui-screen-panel, a#switch-screen").removeClass("active"),t.toggleBoard.toggle("Screen",!1)}),e.setObserver("focus-method:request-focus",function(e,t){var r=document.getElementById("simulator-container"),a=t.getBoundingClientRect(),o=r.getBoundingClientRect();if(!(a.top>o.top&&a.bottom<o.bottom)){var i=a.top+.5*a.height-(o.top+.5*o.height),c=i<0?"up":"down",s=document.getElementById("simulator-wrapper"),u=n(c,i,r,o,s.getBoundingClientRect());if(r.scrollTop+=u,0!==(i-=u)){var l=$(".pcanvas.active .widgets")[0],p=$(".pcanvas.active .widgets .scontainer")[0];u=n(c,i,l,l.getBoundingClientRect(),p.getBoundingClientRect()),l.scrollTop+=u}}})},e.checkHash=function(n,r,a){if(n){if(n.startsWith("#thread=")){var o=n.substr("#thread=".length);a.replaceState?a.replaceState(null,null,r):a.pushState(null,null,r);var i=u.a.SpineModel.CommentThread.findByAttribute("cid",o);if(!i)return;setTimeout(function(){e.updateCurrentScreen(),e.callViewMethod("comment","start"),e.store.dispatch({type:"container:comment:select",payload:{select:i.cid}})},200)}if(n.startsWith("#screen=")){var c=n.substr("#screen=".length),s=u.a.SpineModel.Screen.findByAttribute("cid",c);if(!s)return;setTimeout(function(){e.store.dispatch({type:"entry:current:set-screen",payload:{cid:s.cid,shouldFetchLayer:t.getState().container.layers.isActive}})},200)}}},e.updateCurrentScreen=function(){var t=u.a.MB.currentScreen||null;if(t){e.store.dispatch({type:"entry:current:set-screen-runner",payload:t}),u.a.Global.location.hash="#screen="+t.cid,y()}}}}},"1+7f":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return h});var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("pob2"),p=n("poF/"),d=n.n(p),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.setPanelPosition=o.setPanelPosition.bind(o),o.setElementRef=function(e){return o.divElement=e},o.divElement=null,o.state={fixedPanelStyle:null},o}return o(t,e),t.prototype.componentDidMount=function(){var e=this;MB.forceRenderCommentLayer=function(){e.forceUpdate()}},t.prototype.setPanelPosition=function(e){if(this.divElement){var t=this.divElement.getBoundingClientRect(),n={left:"",right:"",top:"",bottom:""},r=Math.max(e.left-t.left,0),a=Math.max(t.right-e.right,0);r<=a?n.left=r/t.width*100+"%":n.right=a/t.width*100+"%";var o=Math.max(e.top-t.top,0),i=Math.max(t.bottom-e.bottom,0);o<=i?n.top=o/t.height*100+"%":n.bottom=i/t.height*100+"%",this.setState({fixedPanelStyle:n})}},t.prototype.render=function(){var e=this.props,t=e.className,n=e.commentContainer.isActive,r=e.commentThreadsState,a=e.currentState.screenCid,o=this.state.fixedPanelStyle;if(!n)return null;var i=r.filter(function(e){return e.screen_cid===a});return u.a.createElement("div",{ref:this.setElementRef,id:"ui-comment-panel",className:d.a.commentLayer+" "+(t||"")},u.a.createElement("div",{className:"float-panel",style:o||{left:"",right:"287px",top:"",bottom:"40px"}},u.a.createElement(l.a,f({setPanelPosition:this.setPanelPosition,commentThreadList:i},this.props))))},t}(s.PureComponent);h.propTypes={commentContainer:c.a.object,commentThreadsState:c.a.array,currentState:c.a.object,className:c.a.string}},"10LV":function(e,t,n){function r(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!c.string(t))throw new TypeError("Second argument must be a String");if(!c.fn(n))throw new TypeError("Third argument must be a Function");if(c.node(e))return a(e,t,n);if(c.nodeList(e))return o(e,t,n);if(c.string(e))return i(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function a(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function o(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function i(e,t,n){return s(document.body,e,t,n)}var c=n("yth4"),s=n("UnHR");e.exports=r},"1t7s":function(e,t,n){function r(e,t,n,r){var i=!n;n||(n={});for(var c=-1,s=t.length;++c<s;){var u=t[c],l=r?r(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),i?o(n,u,l):a(n,u,l)}return n}var a=n("vfpb"),o=n("AmE3");e.exports=r},"21Sj":function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e,t,n){return e[t]!==n?o({},e,a({},t,n)):e},c=function(e,t){if(!(t in e))return e;var n=o({},e);return delete n[t],n},s=function(e,t){for(var n in t){var r=t[n];if(e[n]!==r)return o({},e,t)}return e},u=function(e,t,n){if(e[t]===n)return e;var a=[].concat(r(e));return a[t]=n,a},l=function(e,t){return t>=0&&t<=e.length-1?[].concat(r(e.slice(0,t)),r(e.slice(t+1))):e},p=function(e,t,n){return t=Math.min(Math.max(t,0),e.length),[].concat(r(e.slice(0,t)),[n],r(e.slice(t)))},d=function(e,t){return[].concat(r(e),[t])},f=function(e,t){return[t].concat(r(e))},h=function(e){if(0===e.length)return e;var t=[].concat(r(e));return t.pop(),t},m=function(e){if(0===e.length)return e;var t=[].concat(r(e));return t.shift(),t},y=function(e,t){return t&&t.length?[].concat(r(e),r(t)):e},v=function(e,t){return e.includes(t)?e:[].concat(r(e),[t])},g=function(e,t){var n=e.indexOf(t);return~n?[].concat(r(e.slice(0,n)),r(e.slice(n+1))):e},b=function(e,t,n){t=Math.min(Math.max(t,0),e.length-1);var a=e.indexOf(n);return~a&&a!==t?a<t?[].concat(r(e.slice(0,a)),r(e.slice(a+1,t+1)),[n],r(e.slice(t+1))):[].concat(r(e.slice(0,t)),[n],r(e.slice(t,a)),r(e.slice(a+1))):e},_=function(e,t,n){return void 0===e.find(t)?[].concat(r(e),[n]):e},w=function(e,t){var n=e.findIndex(t);return~n?[].concat(r(e.slice(0,n)),r(e.slice(n+1))):e},E=function(e,t,n){var a=e.findIndex(t),o=e[a];return~a&&a!==n?a<n?[].concat(r(e.slice(0,a)),r(e.slice(a+1,n+1)),[o],r(e.slice(n+1))):[].concat(r(e.slice(0,n)),[o],r(e.slice(n,a)),r(e.slice(a+1))):e},S=function(e,t,n){var a=e.findIndex(t);if(!~a||e[a]===n)return e;var o=[].concat(r(e));return o[a]=n,o},C={objectSet:i,objectDelete:c,objectMerge:s,arraySet:u,arrayDelete:l,arrayInsert:p,arrayPush:d,arrayUnshift:f,arrayPop:h,arrayShift:m,arrayConcat:y,arrayMatchPush:v,arrayMatchDelete:g,arrayMatchMove:b,arrayFindPush:_,arrayFindDelete:w,arrayFindMove:E,arrayFindSet:S};t.Operation=C},"2swT":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("jPtm"),p=(n.n(l),n("Q7kb")),d=n("z4o0"),f=n("wfDx"),h=!MB.isMobile(),m=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.state={shouldRenderComment:!1},n}return o(t,e),t.prototype.componentDidMount=function(){this.setState({shouldRenderComment:!0})},t.prototype.componentWillUnmount=function(){this.props.dispatch({type:"entry:preview:clear"})},t.prototype.render=function(){var e=this,t=this.props.project,n=this.state.shouldRenderComment,r=void 0;r=MB.isMobile()||MB.isEmbedded()||MB.isPhantom()?{}:{width:"auto",right:223};var a=t.splash?u.a.createElement("img",{src:t.splash}):null,o=MB.user.id!=t.owner_id&&(!t.owner_paid||t.expired);return u.a.createElement("div",null,h&&u.a.createElement(p.b.containers.PreviewPanel,null),h&&u.a.createElement(f.b.containers.CommentLayer,null),u.a.createElement("div",{id:"simulator-container",style:r,ref:function(t){return e.$containerElement=t}},u.a.createElement("div",{id:"simulator-wrapper",ref:function(t){return e.$rangeElement=t}},u.a.createElement("div",{id:"simulator"},u.a.createElement("div",{className:"splash"},a,u.a.createElement("div",{className:"loading"},u.a.createElement("div",{className:"spinner"}))),u.a.createElement("div",{id:"ui-layers",className:"ui-layers"},h&&u.a.createElement(d.c.containers.VisibleResource,null)),u.a.createElement("div",{id:"app",className:"screens"},u.a.createElement("div",{id:"gs"}),u.a.createElement("div",{id:"gh",className:"fixed "+t.device}),u.a.createElement("div",{id:"gf",className:"fixed"})),u.a.createElement("div",{id:"sticky-container"},u.a.createElement("div",{id:"stickies"}),u.a.createElement("div",{id:"ui-comment-marker-panel"},n&&u.a.createElement(f.b.containers.CommentMarkerPanel,{scale:.01*t.scale,containerElement:this.$containerElement,rangeElement:this.$rangeElement})))))),o&&u.a.createElement("a",{className:"powered-by mhide",href:"/",target:"_blank"},I18N.preview.powered_by_modao))},t}(s.Component);m.propTypes={app:c.a.object,project:c.a.object,dispatch:c.a.func},t.a=n.i(l.connect)(function(e){var t=e.model,n=t.current.projectCid;return{project:t.projects.find(function(e){return e.cid===n})||Template.find(n)}})(m)},"3I6u":function(e,t,n){var r=n("+5ov"),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();e.exports=o},"3wZp":function(e,t,n){"use strict";var r=n("SgXW"),a=(n.n(r),n("DZQR")),o=a.a.Team,i=[],c=n.i(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:teams:update",payload:e(n,i,t)})})},d={"teams:refresh":p(o.refreshStateList,!1),"teams:add":p(o.addState,!1),"teams:add-local":p(o.addState,!0),"teams:update":p(o.updateState,!1),"teams:update-local":p(o.updateState,!0),"teams:delete":p(o.deleteState,!1),"teams:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},"3yrG":function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},"4/A1":function(e,t,n){function r(e,t){var n=t?a(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var a=n("Guzr");e.exports=r},"4D9S":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("vLgD"),a=function(e){return n.i(r.a)("/apis/sketch/artboards/"+e+".json")}},"4MYk":function(e,t,n){"use strict";function r(e){var t={containerReducerMap:{},viewMap:{},sagaMap:{},extendCallback:null};return e.forEach(function(e){t.containerReducerMap=a(o,t.containerReducerMap,e.containerReducerMap),t.viewMap=a(o,t.viewMap,e.viewMap),t.extendCallback=a(i,t.extendCallback,e.extendCallback),t.sagaMap=a(o,t.sagaMap,e.sagaMap)}),t}function a(e,t,n){return n?t?e(t,n):n:t}function o(e,t){function n(e,t){r[e]=t}var r={};for(var a in e)n(a,e[a]);for(var o in t)n(o,t[o]);return r}function i(e,t){return function(){return e.apply(void 0,arguments),t.apply(void 0,arguments)}}t.a=r},"4UJw":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("Up4y"),p=n("WwrI"),d=n.n(p),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.handleZoomIn=function(){return n.handleZoomStep(1)},n.handleZoomOut=function(){return n.handleZoomStep(-1)},n.state={canPrev:!1},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this;$(this.el).tooltip({selector:"a",container:"body",placement:"left"}),MB.updateBackButton=function(t){e.setState({canPrev:t})}},t.prototype.handleZoomStep=function(e){var t=this.props,n=t.project,r=t.dispatch,a=MB.config.SCALES.indexOf(n.scale),o=MB.config.SCALES[a+e];r({type:"projects:update-local",payload:f({},n,{scale:o})}),MB.currentProject.scale=o,$("body").data("scale",o),MB.runner.reload(!0)},t.prototype.handleDesign=function(){MB.designer.backDesign()},t.prototype.handlePrev=function(){MB.runner.backPrev()},t.prototype.render=function(){var e=this,t=this.props,n=t.project,r=t.dispatch,a=this.state.canPrev,o=MB.config.SCALES.indexOf(n.scale),i=!(o===MB.config.SCALES.length-1),c=!(0===o),s=!MB.f.inSharing&&"file:"!==window.location.protocol;return u.a.createElement("div",{ref:function(t){return e.el=t},className:d.a.actions},s&&u.a.createElement("a",{className:"design",title:I18N.back,onClick:this.handleDesign},u.a.createElement("span",{className:"icon icon-times"})),u.a.createElement(l.a,{project:n,dispatch:r}),u.a.createElement("a",{id:"back_prev",disabled:!a,title:I18N.link_back,onClick:this.handlePrev},u.a.createElement("span",{className:"icon icon-arrow-left"})),u.a.createElement("a",{id:"zoomin",disabled:!i,title:I18N.zoomin,onClick:this.handleZoomIn},u.a.createElement("span",{className:"icon icon-zoom-in"})),u.a.createElement("a",{id:"zoomout",disabled:!c,title:I18N.zoomout,onClick:this.handleZoomOut},u.a.createElement("span",{className:"icon icon-zoom-out"})))},t}(s.Component);t.a=h,h.propTypes={project:c.a.object,dispatch:c.a.func}},"4kIi":function(e,t){var n=Array.isArray;e.exports=n},"5f4m":function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},"6EfI":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t.default=void 0;var c=n("eBYd"),s=n("Ebzz"),u=r(s),l=n("mchu"),p=r(l),d=n("UyGE"),f=(r(d),function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,n,r));return i.store=n.store,i}return i(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){return c.Children.only(this.props.children)},t}(c.Component));t.default=f,f.propTypes={store:p.default.isRequired,children:u.default.element.isRequired},f.childContextTypes={store:p.default.isRequired}},"6QCI":function(e,t,n){"use strict";function r(e){e.ScrollSync=a.a,e.TimeoutBucket=o.a,e.EventBucket=i.a,e.RunnerUtil=c.a,e.TransitionUtil=s.a}t.a=r;var a=n("n9+0"),o=n("sS1+"),i=n("iUwf"),c=n("90Mi"),s=n("vj0c")},"6aYq":function(e,t){function n(e){return e}e.exports=n},"6gil":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a={isActive:!1,isMinified:!1,focus:null,select:null};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1],n=t.type,o=t.payload;switch(n){case"container:comment:set:active":return r({},e,{isActive:o.isActive});case"container:comment:set:is-minified":return r({},e,{isMinified:o.isMinified,focus:null,select:null});case"container:comment:focus":return r({},e,{focus:o.focus});case"container:comment:select":return r({},e,{isMinified:!1,focus:o.select&&e.focus,select:o.select})}return e}},"7g8A":function(e,t,n){"use strict";function r(e,t){for(var n in t){var r=t[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n,r)}return e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return("*"===e?b.wildcard:l.c.array(e)?b.array:l.c.stringableFunc(e)?b.default:l.c.func(e)?b.predicate:b.default)(e)}function c(e,t,r){function a(e){i(),r(e,!0)}function o(e){c.push(e),e.cont=function(o,i){u||(n.i(l.l)(c,e),e.cont=l.k,i?a(o):(e===t&&(s=o),c.length||(u=!0,r(s))))}}function i(){u||(u=!0,c.forEach(function(e){e.cont=l.k,e.cancel()}),c=[])}var c=[],s=void 0,u=!1;return o(t),{addTask:o,cancelAll:i,abort:a,getTasks:function(){return c},taskNames:function(){return c.map(function(e){return e.name})}}}function s(e){var t=e.context,r=e.fn,a=e.args;if(l.c.iterator(r))return r;var o=void 0,i=void 0;try{o=r.apply(t,a)}catch(e){i=e}return l.c.iterator(o)?o:i?n.i(l.h)(function(){throw i}):n.i(l.h)(function(){var e=void 0,t={done:!1,value:o},n=function(e){return{done:!0,value:e}};return function(r){return e?n(r):(e=!0,t)}}())}function u(e){function t(){te.isRunning&&!te.isCancelled&&(te.isCancelled=!0,b(g))}function m(){e._isRunning&&!e._isCancelled&&(e._isCancelled=!0,ne.cancelAll(),w(g))}function b(t,n){if(!te.isRunning)throw new Error("Trying to resume an already finished generator");try{var r=void 0;n?r=e.throw(t):t===g?(te.isCancelled=!0,b.cancel(),r=l.c.func(e.return)?e.return(g):{done:!0,value:g}):r=t===v?l.c.func(e.return)?e.return():{done:!0}:e.next(t),r.done?(te.isMainRunning=!1,te.cont&&te.cont(r.value)):E(r.value,G,"",b)}catch(e){te.isCancelled&&Q("error","uncaught at "+q,e.message),te.isMainRunning=!1,te.cont(e,!0)}}function w(t,n){e._isRunning=!1,J.close(),n?(t instanceof Error&&(t.sagaStack="at "+q+" \n "+(t.sagaStack||t.stack)),ee.cont||(Q("error","uncaught",t.sagaStack||t.stack),t instanceof Error&&Z&&Z(t)),e._error=t,e._isAborted=!0,e._deferredEnd&&e._deferredEnd.reject(t)):(t===g&&l.q&&Q("info",q+" has been cancelled",""),e._result=t,e._deferredEnd&&e._deferredEnd.resolve(t)),ee.cont&&ee.cont(t,n),ee.joiners.forEach(function(e){return e.cb(t,n)}),ee.joiners=null}function E(e,t){function r(e,t){c||(c=!0,o.cancel=l.k,K&&(t?K.effectRejected(i,e):K.effectResolved(i,e)),o(e,t))}var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments[3],i=n.i(l.r)();K&&K.effectTriggered({effectId:i,parentEffectId:t,label:a,effect:e});var c=void 0;r.cancel=l.k,o.cancel=function(){if(!c){c=!0;try{r.cancel()}catch(e){Q("error","uncaught at "+q,e.message)}r.cancel=l.k,K&&K.effectCancelled(i)}};var s=void 0;return l.c.promise(e)?S(e,r):l.c.helper(e)?T(_(e),i,r):l.c.iterator(e)?C(e,i,q,r):l.c.array(e)?P(e,i,r):l.c.notUndef(s=d.i.take(e))?x(s,r):l.c.notUndef(s=d.i.put(e))?M(s,r):l.c.notUndef(s=d.i.race(e))?I(s,i,r):l.c.notUndef(s=d.i.call(e))?j(s,i,r):l.c.notUndef(s=d.i.cps(e))?O(s,r):l.c.notUndef(s=d.i.fork(e))?T(s,i,r):l.c.notUndef(s=d.i.join(e))?k(s,r):l.c.notUndef(s=d.i.cancel(e))?N(s,r):l.c.notUndef(s=d.i.select(e))?A(s,r):l.c.notUndef(s=d.i.actionChannel(e))?L(s,r):l.c.notUndef(s=d.i.flush(e))?B(s,r):l.c.notUndef(s=d.i.cancelled(e))?R(s,r):l.c.notUndef(s=d.i.getContext(e))?D(s,r):l.c.notUndef(s=d.i.setContext(e))?U(s,r):r(e)}function S(e,t){var n=e[l.s];"function"==typeof n&&(t.cancel=n),e.then(t,function(e){return t(e,!0)})}function C(e,t,n,r){u(e,z,F,V,$,H,t,n,r)}function x(e,t){var r=e.channel,a=e.pattern,o=e.maybe;r=r||J;var c=function(e){return e instanceof Error?t(e,!0):t(n.i(f.c)(e)&&!o?v:e)};try{r.take(c,i(a))}catch(e){return t(e,!0)}t.cancel=c.cancel}function M(e,t){var r=e.channel,a=e.action,o=e.resolve;n.i(p.a)(function(){var e=void 0;try{e=(r?r.put:F)(a)}catch(e){if(r||o)return t(e,!0);Q("error","uncaught at "+q,e.stack||e.message||e)}if(!o||!l.c.promise(e))return t(e);S(e,t)})}function j(e,t,n){var r=e.context,a=e.fn,o=e.args,i=void 0;try{i=a.apply(r,o)}catch(e){return n(e,!0)}return l.c.promise(i)?S(i,n):l.c.iterator(i)?C(i,t,a.name,n):n(i)}function O(e,t){var n=e.context,r=e.fn,a=e.args;try{var o=function(e,n){return l.c.undef(e)?t(n):t(e,!0)};r.apply(n,a.concat(o)),o.cancel&&(t.cancel=function(){return o.cancel()})}catch(e){return t(e,!0)}}function T(e,t,r){var a=e.context,o=e.fn,i=e.args,c=e.detached,d=s({context:a,fn:o,args:i});try{n.i(p.b)();var f=u(d,z,F,V,$,H,t,o.name,c?null:l.k);c?r(f):d._isRunning?(ne.addTask(f),r(f)):d._error?ne.abort(d._error):r(f)}finally{n.i(p.c)()}}function k(e,t){if(e.isRunning()){var r={task:ee,cb:t};t.cancel=function(){return n.i(l.l)(e.joiners,r)},e.joiners.push(r)}else e.isAborted()?t(e.error(),!0):t(e.result())}function N(e,t){e===l.e&&(e=ee),e.isRunning()&&e.cancel(),t()}function P(e,t,r){function a(){o===c.length&&(i=!0,r(c))}if(!e.length)return r([]);var o=0,i=void 0,c=Array(e.length),s=e.map(function(e,t){var s=function(e,s){i||(s||n.i(f.c)(e)||e===v||e===g?(r.cancel(),r(e,s)):(c[t]=e,o++,a()))};return s.cancel=l.k,s});r.cancel=function(){i||(i=!0,s.forEach(function(e){return e.cancel()}))},e.forEach(function(e,n){return E(e,t,n,s[n])})}function I(e,t,r){var a=void 0,i=Object.keys(e),c={};i.forEach(function(e){var t=function(t,i){a||(i?(r.cancel(),r(t,!0)):n.i(f.c)(t)||t===v||t===g||(r.cancel(),a=!0,r(o({},e,t))))};t.cancel=l.k,c[e]=t}),r.cancel=function(){a||(a=!0,i.forEach(function(e){return c[e].cancel()}))},i.forEach(function(n){a||E(e[n],t,n,c[n])})}function A(e,t){var n=e.selector,r=e.args;try{var o=n.apply(void 0,[V()].concat(a(r)));t(o)}catch(e){t(e,!0)}}function L(e,t){var r=e.pattern,a=e.buffer,o=i(r);o.pattern=r,t(n.i(f.d)(z,a||h.a.fixed(),o))}function R(e,t){t(!!te.isCancelled)}function B(e,t){e.flush(t)}function D(e,t){t($[e])}function U(e,t){l.t.assign($,e),t()}var z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return l.k},F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.k,V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.k,W=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},H=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},G=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,q=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"anonymous",Y=arguments[8];n.i(l.b)(e,l.c.iterator,y);var K=H.sagaMonitor,X=H.logger,Z=H.onError,Q=X||l.p,J=n.i(f.b)(z),$=Object.create(W);b.cancel=l.k;var ee=function(e,t,a,i){var c,s,u;return a._deferredEnd=null,s={},o(s,l.u,!0),o(s,"id",e),o(s,"name",t),c="done",u={},u[c]=u[c]||{},u[c].get=function(){if(a._deferredEnd)return a._deferredEnd.promise;var e=n.i(l.v)();return a._deferredEnd=e,a._isRunning||(a._error?e.reject(a._error):e.resolve(a._result)),e.promise},o(s,"cont",i),o(s,"joiners",[]),o(s,"cancel",m),o(s,"isRunning",function(){return a._isRunning}),o(s,"isCancelled",function(){return a._isCancelled}),o(s,"isAborted",function(){return a._isAborted}),o(s,"result",function(){return a._result}),o(s,"error",function(){return a._error}),o(s,"setContext",function(e){n.i(l.b)(e,l.c.object,n.i(l.g)("task",e)),l.t.assign($,e)}),r(s,u),s}(G,q,e,Y),te={name:q,cancel:t,isRunning:!0},ne=c(q,te,w);return Y&&(Y.cancel=m),e._isRunning=!0,b(),ee}t.a=u;var l=n("sZUI"),p=n("qytv"),d=n("f8j7"),f=n("EX8i"),h=n("W3Gc"),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y="proc first argument (Saga function result) must be an iterator",v={toString:function(){return"@@redux-saga/CHANNEL_END"}},g={toString:function(){return"@@redux-saga/TASK_CANCEL"}},b={wildcard:function(){return l.j},default:function(e){return function(t){return t.type===("symbol"===(void 0===e?"undefined":m(e))?e:String(e))}},array:function(e){return function(t){return e.some(function(e){return i(e)(t)})}},predicate:function(e){return function(t){return e(t)}}},_=function(e){return{fn:e}}},"87Bm":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("U6mC"),p=n.n(l),d=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.toggleEditing=function(e){void 0===e&&(e=!o.state.isEditing),o.setState({isEditing:e,editingValue:o.props.getValue()}),e&&setTimeout(o.focusTextarea,0)},o.onEditUpdate=function(e){return o.setState({editingValue:e.target.value})},o.onEditKeyPress=function(e){return 13===e.which&&(!o.props.isMultiLine||!e.shiftKey)&&o.onEditFinish()},o.onEditFinish=function(){var e=o.state.editingValue.trim();e!==o.getSpanValue()&&o.props.onValueChange(e),o.toggleEditing(!1)},o.focusTextarea=function(){var e=o.refs&&o.refs.textarea;if(e){e.focus&&e.focus();var t=e.value.length;e.setSelectionRange(t,t),e.scrollTop=e.scrollHeight-e.offsetHeight}},o.state={isEditing:!1,editingValue:""},n.initEditing&&setTimeout(function(){return o.toggleEditing(!0)},50),o}return o(t,e),t.prototype.getSpanValue=function(){return this.props.getValue()||""},t.prototype.render=function(){var e=this,t=this.props,n=t.placeholder,r=t.isEditLocked,a=this.state,o=a.isEditing,i=a.editingValue;return r?u.a.createElement("span",{className:p.a.editable_span},this.getSpanValue()):o?u.a.createElement("textarea",{className:p.a.editable_span,ref:"textarea",value:i,placeholder:n||"",onChange:this.onEditUpdate,onKeyDown:this.onEditKeyPress,onBlur:this.onEditFinish}):u.a.createElement("span",{className:p.a.editable_span,onDoubleClick:function(){return e.toggleEditing(!0)}},this.getSpanValue())},t}(u.a.PureComponent);d.propTypes={onValueChange:c.a.func,getValue:c.a.func,placeholder:c.a.string,isMultiLine:c.a.bool,initEditing:c.a.bool,isEditLocked:c.a.bool};var f=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.onEditUpdate=function(e){return!o.props.isEditLocked&&o.setState({editingValue:e.target.value})},o.onEditKeyPress=function(e){return 13===e.which&&(!o.props.isMultiLine||!e.shiftKey)&&o.onEditFinish(e)},o.onEditFinish=function(e){e&&e.preventDefault(),e&&e.stopPropagation();var t=o.getValue();t&&o.props.onValueChange(t),o.setState({editingValue:""})},o.getValue=function(){return o.state&&o.state.editingValue&&o.state.editingValue.trim()},o.focus=function(){return o.textareaElement&&o.textareaElement.focus()},o.state={editingValue:""},o}return o(t,e),t.prototype.componentDidUpdate=function(){this.props.isAutoHeight&&this.textareaElement&&(this.textareaElement.style.height="auto",this.textareaElement.style.height=Math.max(this.textareaElement.scrollHeight+2,this.textareaElement.offsetHeight)+"px")},t.prototype.render=function(){var e=this,t=this.props.placeholder,n=this.state.editingValue;return u.a.createElement("textarea",{ref:function(t){return e.textareaElement=t},className:p.a.reply_textarea,rows:1,value:n,placeholder:t||"",onChange:this.onEditUpdate,onKeyDown:this.onEditKeyPress})},t}(u.a.PureComponent);f.propTypes={onValueChange:c.a.func,placeholder:c.a.string,isMultiLine:c.a.bool,isEditLocked:c.a.bool,isAutoHeight:c.a.bool},t.a={EditableSpan:d,ReplyTextarea:f}},"8I+x":function(e,t,n){"use strict";var r=n("SgXW"),a=(n.n(r),n("DZQR")),o=a.a.Widget,i=[],c=n.i(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:widgets:update",payload:e(n,i,t)})})},d={"widgets:refresh":p(o.refreshStateList,!1),"widgets:add":p(o.addState,!1),"widgets:add-local":p(o.addState,!0),"widgets:update":p(o.updateState,!1),"widgets:update-local":p(o.updateState,!0),"widgets:delete":p(o.deleteState,!1),"widgets:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},"8kgv":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("+WZT"),c=n.n(i),s=n("Ebzz"),u=n.n(s),l=n("eBYd"),p=n.n(l),d=n("jPtm"),f=(n.n(d),n("5VFw")),h=(n.n(f),n("jhmH")),m=n.n(h),y=n("yI57"),v=n("IIAV"),g=n.n(v),b=function(e){function t(){return r(this,t),a(this,e.call(this))}return o(t,e),t.prototype.componentDidUpdate=function(){this.$scrollContainer&&(this.$scrollContainer.scrollTop=0)},t.prototype.render=function(){var e=this,t=this.props,r=t.layer,a=t.currentScreen;if(!r)return null;var o=n.i(y.a)(r.name)?a.width:r.width||0;return p.a.createElement("div",{className:g.a.container,ref:function(t){return e.$scrollContainer=t}},p.a.createElement("div",{className:g.a.infoHeader},r.name),p.a.createElement("div",{className:g.a.panel},p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey+" "+g.a.fixedWidth},"X:"),p.a.createElement("span",{className:g.a.infoValue},Math.floor(r.left)||0)),p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey+" "+g.a.fixedWidth},"Y:"),p.a.createElement("span",{className:g.a.infoValue},Math.floor(r.top)||0))),p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey+" "+g.a.fixedWidth},I18N.preview_panel.width+":"),p.a.createElement("span",{className:g.a.infoValue},Math.floor(o)||0)),p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey+" "+g.a.fixedWidth},I18N.preview_panel.height+":"),p.a.createElement("span",{className:g.a.infoValue},Math.floor(r.height)||0)))),r.text&&p.a.createElement("div",null,p.a.createElement("div",{className:g.a.infoHeader},p.a.createElement("span",null,I18N.preview_panel.text),p.a.createElement(_,{text:r.text})),p.a.createElement("div",{className:g.a.panel},p.a.createElement("div",{className:g.a.panelRow+" "+g.a.infoValue},p.a.createElement("div",{className:g.a.textContent,dangerouslySetInnerHTML:{__html:r.text}})))),r.text_styles&&r.text_styles.length>0&&p.a.createElement("div",null,p.a.createElement("div",{className:g.a.infoHeader},I18N.preview_panel.typeface),p.a.createElement("div",{className:g.a.panel},r.text_styles.map(function(e,t){return p.a.createElement("div",{key:t},e.font_face&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("span",{className:g.a.flexFull+" "+g.a.infoValue},e.font_face)),e.font_size&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.font_size+":")),p.a.createElement("span",{className:g.a.flexFull+" "+g.a.infoValue},e.font_size)),r.alignment&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.align+":")),p.a.createElement("span",{className:g.a.flexFull+" "+g.a.infoValue},r.alignment)),+r.line_height>0&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.line_height+":")),p.a.createElement("span",{className:g.a.flexFull+" "+g.a.infoValue},r.line_height)),p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.offset+":")),p.a.createElement("span",{className:g.a.flexFull+" "+g.a.infoValue},(e.location||0)+1)),p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.length+":")),p.a.createElement("span",{className:g.a.flexFull+" "+g.a.infoValue},e.length)),e.color&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull+" "+g.a.colorRow},p.a.createElement("span",{className:g.a.colorBlock,style:{backgroundColor:n.i(y.c)(e.color)}}),p.a.createElement("div",{className:g.a.colorContent},p.a.createElement("span",{className:g.a.infoValue},n.i(y.d)(n.i(y.c)(e.color)).toUpperCase()),p.a.createElement("span",{className:g.a.infoValue},n.i(y.c)(e.color))))))}))),r.bg_colors&&r.bg_colors.length>0&&p.a.createElement("div",null,p.a.createElement("div",{className:g.a.infoHeader},I18N.preview_panel.Fills),p.a.createElement("div",{className:g.a.panel},r.bg_colors.map(function(e,t){return p.a.createElement("div",{key:t,className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull+" "+g.a.colorRow},p.a.createElement("span",{className:g.a.colorBlock,style:{backgroundColor:e.value}}),p.a.createElement("div",{className:g.a.colorContent},p.a.createElement("span",{className:g.a.infoValue},n.i(y.d)(e.value).toUpperCase()),p.a.createElement("span",{className:g.a.infoValue},n.i(y.e)(e.value)))))}))),r.borders&&r.borders.length>0&&p.a.createElement("div",null,p.a.createElement("div",{className:g.a.infoHeader},I18N.preview_panel.borders),p.a.createElement("div",{className:g.a.panel},r.borders.map(function(e,t){return p.a.createElement("div",{key:t},e.thickness&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.thickness)),p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoValue},Math.floor(e.thickness)))),e.position&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.position)),p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoValue},e.position))),r.bd_radius&&p.a.createElement("div",{className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoKey},I18N.preview_panel.bd_radius)),p.a.createElement("div",{className:g.a.flexFull},p.a.createElement("span",{className:g.a.infoValue},Math.floor(r.bd_radius)))),e.color&&p.a.createElement("div",{key:t,className:g.a.panelRow},p.a.createElement("div",{className:g.a.flexFull+" "+g.a.colorRow},p.a.createElement("span",{className:g.a.colorBlock,style:{backgroundColor:e.color}}),p.a.createElement("div",{className:g.a.colorContent},p.a.createElement("span",{className:g.a.infoValue},n.i(y.d)(e.color).toUpperCase()),p.a.createElement("span",{className:g.a.infoValue},n.i(y.e)(e.color))))))}))))},t}(l.Component);b.propTypes={layer:u.a.object,currentScreen:u.a.object};var _=function(e){function t(){return r(this,t),a(this,e.call(this))}return o(t,e),t.prototype.componentDidMount=function(){var e=this;this.clipboard=new m.a(this.$copyBtn,{text:function(t){var n=window.getSelection().toString();return n||e.props.text}}),this.tooltip=f(this.$copyBtn).tooltip({trigger:"manual"}),this.clipboard.on("success",function(t){MB.ga("send","event","feature","使用了文字复制"),MB.mp("使用了文字复制"),e.timer&&clearTimeout(e.timer),e.tooltip.tooltip("show"),e.timer=window.setTimeout(function(){e.tooltip.tooltip("hide")},500)})},t.prototype.componentWillUnmount=function(){this.clipboard.destroy(),this.tooltip.tooltip("destroy")},t.prototype.render=function(){var e=this;return p.a.createElement("span",{className:g.a.copyBtn,ref:function(t){return e.$copyBtn=t},"data-placement":"left",title:I18N.preview_panel.copied},I18N.copy)},t}(l.Component);_.propTypes={text:u.a.string};var w=function(e){var t=e.container.layers,n=t.resourceByScreen,r=t.visibilityScreenID,a=t.activeLayerID,o=n[r];if(o)return c()(o.layers,function(e){return e.id===a})},E=function(e){var t=e.model,n=t.current.screenCid,r=t.screens,a=r.find(function(e){return e.cid===n});return{layer:w(e),currentScreen:a}};t.a=n.i(d.connect)(E)(b)},"8qcD":function(e,t){function n(e){return e}e.exports=n},"90Mi":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){r(this,e)}return e.prototype.setObjectUrl=function(e,t){e&&(e.contentWindow?e.contentWindow.location.replace(t):e.setAttribute("data",t))},e.prototype.deviceOrient=function(){return $(window).width()>$(window).height()?"landscape":"portrait"},e.prototype.cloneFixed=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=n.show().clone();return a.attr("id",a.attr("id")+"gh"),t.v&&a.css("opacity",t.o/100),a.css("top",t.t()),a.hasClass("clickable")&&a.css("pointer-events","auto"),n.hide(),r?(t.isBottomFixed(e)&&(MB.isIOS9()&&this.deviceOrient()===e.orient()?a.css("top",$("#simulator").height()-(e.h()-t.t())+MB.COMPONENTS.status_bar.height):a.css("top",$("#simulator").height()-(e.h()-t.t()))),a):a},e.prototype.setScreenBg=function(e){var t=Screen.find(e.data("cid"));t&&e.css({"background-color":t.bg(),"background-image":t.bgimage?"url("+t.getRealBgImage()+")":""})},e.prototype.screenPreview=function(e){return'\n      <div id="pscreen'+e.cid+'" class="pcanvas '+e.orient()+'" data-cid="'+e.cid+'" data-orientation="'+e.orient()+'">\n      <div class="widgets">\n        <div class="scontainer">\n          <div class="sheader"></div>\n          <div class="sfooter"></div>\n        </div>\n      </div>\n      <div class="stickies"></div>\n    </div>\n    '},e}();t.a=a},"9CN1":function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];var r=t[t.length-1],a=t.slice(0,-1);return function(){return a.reduceRight(function(e,t){return t(e)},r.apply(void 0,arguments))}}t.a=r},"9Tab":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("DiHq"),a=n("PpmN"),o=n("YvpW"),i=n("t57V"),c=n("9CN1");n("XgEi");n.d(t,"createStore",function(){return r.a}),n.d(t,"combineReducers",function(){return a.a}),n.d(t,"bindActionCreators",function(){return o.a}),n.d(t,"applyMiddleware",function(){return i.a}),n.d(t,"compose",function(){return c.a})},A1iC:function(e,t,n){"use strict";function r(e){return o.call(e)}var a=Object.prototype,o=a.toString;t.a=r},A1sh:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return f});var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("U6mC"),p=n.n(l),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.isFocused=!1,o.spanRef=null,o}return o(t,e),t.prototype.componentDidUpdate=function(){var e=this.props,t=e.isFocus,n=e.focusType,r=e.dispatch;r&&t&&!this.isFocused&&r({type:"entry:focus-element",payload:{focusType:n,element:this.spanRef}}),this.isFocused=t},t.prototype.render=function(){var e=this,t=this.props,n=t.index,r=t.isFocus,a=t.isFade,o=t.isEditable,i=t.divAttributes,c=t.spanAttributes,s=r?p.a.comment_marker_focus:!r&&a?p.a.comment_marker_fade:"";return u.a.createElement("div",d({className:[p.a.comment_marker,s,o?"":p.a.comment_marker_locked].join(" ")},i),u.a.createElement("span",d({ref:function(t){return e.spanRef=t},tabIndex:n},c),n))},t}(u.a.PureComponent);f.propTypes={index:c.a.number,isFocus:c.a.bool,isFade:c.a.bool,isEditable:c.a.bool,divAttributes:c.a.object,spanAttributes:c.a.object,focusType:c.a.string,dispatch:c.a.func},(function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.index,r=t.isFocus,a=t.isFade,o=!r&&a?p.a.comment_marker_fade:"";return u.a.createElement("div",{className:[p.a.comment_marker,p.a.comment_marker_mini,o].join(" ")},u.a.createElement("span",{ref:function(t){return e.spanRef=t},tabIndex:n,"data-index":n}))},t}(f)).propTypes={index:c.a.number,isFocus:c.a.bool,isFade:c.a.bool,focusType:c.a.string,dispatch:c.a.func}},AKBz:function(e,t,n){function r(e,t,n,l,p){e!==t&&i(t,function(i,u){if(s(i))p||(p=new a),c(e,t,u,n,r,l,p);else{var d=l?l(e[u],i,u+"",e,t,p):void 0;void 0===d&&(d=i),o(e,u,d)}},u)}var a=n("T2oH"),o=n("xL22"),i=n("sy3t"),c=n("kqjs"),s=n("5f4m"),u=n("a65c");e.exports=r},AWp9:function(e,t){function n(e){return e}e.exports=n},AZEH:function(e,t,n){var r=n("yAvz"),a=r(Object.keys,Object);e.exports=a},AjTu:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){return e.displayName||e.name||"Component"}function s(e,t){try{return e.apply(t)}catch(e){return j.value=e,j}}function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=Boolean(e),d=e||C,h=void 0;h="function"==typeof t?t:t?(0,v.default)(t):x;var y=n||M,g=r.pure,b=void 0===g||g,_=r.withRef,E=void 0!==_&&_,T=b&&y!==M,k=O++;return function(e){function t(e,t,n){var r=y(e,t,n);return r}var n="Connect("+c(e)+")",r=function(r){function c(e,t){a(this,c);var i=o(this,r.call(this,e,t));i.version=k,i.store=e.store||t.store,(0,S.default)(i.store,'Could not find "store" in either the context or props of "'+n+'". Either wrap the root component in a <Provider>, or explicitly pass "store" as a prop to "'+n+'".');var s=i.store.getState();return i.state={storeState:s},i.clearCache(),i}return i(c,r),c.prototype.shouldComponentUpdate=function(){return!b||this.haveOwnPropsChanged||this.hasStoreStateChanged},c.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return r},c.prototype.configureFinalMapState=function(e,t){var n=d(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:d,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):n},c.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return r},c.prototype.configureFinalMapDispatch=function(e,t){var n=h(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:h,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):n},c.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return(!this.stateProps||!(0,m.default)(e,this.stateProps))&&(this.stateProps=e,!0)},c.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return(!this.dispatchProps||!(0,m.default)(e,this.dispatchProps))&&(this.dispatchProps=e,!0)},c.prototype.updateMergedPropsIfNeeded=function(){var e=t(this.stateProps,this.dispatchProps,this.props);return!(this.mergedProps&&T&&(0,m.default)(e,this.mergedProps))&&(this.mergedProps=e,!0)},c.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},c.prototype.trySubscribe=function(){u&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},c.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},c.prototype.componentDidMount=function(){this.trySubscribe()},c.prototype.componentWillReceiveProps=function(e){b&&(0,m.default)(e,this.props)||(this.haveOwnPropsChanged=!0)},c.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},c.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},c.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!b||t!==e){if(b&&!this.doStatePropsDependOnOwnProps){var n=s(this.updateStatePropsIfNeeded,this);if(!n)return;n===j&&(this.statePropsPrecalculationError=j.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:e})}}},c.prototype.getWrappedInstance=function(){return(0,S.default)(E,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},c.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,r=this.haveStatePropsBeenPrecalculated,a=this.statePropsPrecalculationError,o=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,a)throw a;var i=!0,c=!0;b&&o&&(i=n||t&&this.doStatePropsDependOnOwnProps,c=t&&this.doDispatchPropsDependOnOwnProps);var s=!1,u=!1;r?s=!0:i&&(s=this.updateStatePropsIfNeeded()),c&&(u=this.updateDispatchPropsIfNeeded());return!(!!(s||u||t)&&this.updateMergedPropsIfNeeded())&&o?o:(this.renderedElement=E?(0,p.createElement)(e,l({},this.mergedProps,{ref:"wrappedInstance"})):(0,p.createElement)(e,this.mergedProps),this.renderedElement)},c}(p.Component);return r.displayName=n,r.WrappedComponent=e,r.contextTypes={store:f.default},r.propTypes={store:f.default},(0,w.default)(r,e)}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=u;var p=n("eBYd"),d=n("mchu"),f=r(d),h=n("f1gS"),m=r(h),y=n("RTb5"),v=r(y),g=n("UyGE"),b=(r(g),n("mPi+")),_=(r(b),n("qbyL")),w=r(_),E=n("JSBb"),S=r(E),C=function(e){return{}},x=function(e){return{dispatch:e}},M=function(e,t,n){return l({},n,e,t)},j={value:null},O=0},AmE3:function(e,t,n){function r(e,t,n){"__proto__"==t&&a?a(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var a=n("Iuwf");e.exports=r},AxSz:function(e,t,n){"use strict";var r=n("+jvR"),a=n.n(r),o=n("+knQ"),i=n("vhiH"),c=n.n(i),s=window,u=s.confirm,l=s.alert,p=s.MB,d=s.MBLocale,f=s.I18N,h=s.Team,m=s.Project,y=s.Combo,v=s.Template,g=s.Screen,b=s.Widget,_=s.Collaborator,w=s.Comment,E=s.CommentThread,S=s.$;"zh-CN"===d&&c()(a.a.settings.strings,o.a);var C=window,x={MBLocale:d,parseTimeAgo:function(e){return a()(e)}},M={Team:h,Project:m,Combo:y,Template:v,Screen:g,Collaborator:_,Widget:b,Comment:w,CommentThread:E,requestCid:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+Math.uuid(10,16)+Date.now()},queueSave:function(){return S("body").trigger("queue:save")},getScreenScale:function(){return S("body").data("scale")}};t.a={Global:C,Storage:p.localStorageDelegate,confirm:function(){return u.apply(void 0,arguments)},alert:function(){return l.apply(void 0,arguments)},MB:p,I18N:f,L10N:x,SpineModel:M}},"B+y7":function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=null==n?0:i(n);return s<0&&(s=c(r+s,0)),a(e,o(t,3),s)}var a=n("oA06"),o=n("U/UK"),i=n("8qcD"),c=Math.max;e.exports=r},BIBl:function(e,t,n){"use strict";function r(e){if(!n.i(i.a)(e)||n.i(a.a)(e)!=c)return!1;var t=n.i(o.a)(e);if(null===t)return!0;var r=p.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==d}var a=n("A1iC"),o=n("qzLf"),i=n("jHGJ"),c="[object Object]",s=Function.prototype,u=Object.prototype,l=s.toString,p=u.hasOwnProperty,d=l.call(Object);t.a=r},BOZI:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},DZQR:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("Ejk5"),a=(n.n(r),n("AxSz")),o=n("bBrr"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=a.a.SpineModel,s=["cid","created_at","updated_at","password","access","access_token","name","icon","splash","screens_count","width","height","scale","device","model","shell_type","_shell_type","archived","deleted","destroyed","highlight","_highlight","combo","template","wechat","owner_id","owner_email","owner_name","owner_avatar","owner_plan","expired","validated","parent_cid","auto_scale","description","version"],u={Project:[].concat(s,["team_cid","slack_web_hook_url"]),Combo:[].concat(s,["builtin"]),Template:[].concat(s,["team_cid","builtin","master","behavior","host_cid","consumer_cid"]),Team:["name","icon","cid","owner_id","owner_email","owner_name","owner_avatar","color","updated_at","created_at"],Screen:["cid","name","orientation","position","project_cid","parent_cid","expanded","height","hh","fh","bgcolor","bgimage","width","state_cid","artboard_id","artboard_asset_id"],Collaborator:["name","email","role","project_cid","avatar","cid","team_cid","user_id"],Comment:["cid","thread_cid","user_id","created_at","updated_at","message"],CommentThread:["cid","screen_cid","user_id","created_at","updated_at","left","top"],Widget:["screen_cid","name","text","top","left","width","height","cid","fs","br","bs","is","ha","va","z","th","o","ds","sc","bg","tc","bc","bo","i","td","ts","tsc","p","ro","gid","timestamp","padding","ls","checked","numeric","tt_placement","tt_offset","tt_arrow_size","v","fixed","fixed_type","ani_name","screenstate_cid","input_type","slw","slt","filter","locked","id","lh"]},l={Team:"t",Project:"p",Combo:"c",Template:"t",Screen:"s",Collaborator:"co",Comment:"cm",CommentThread:"cmth",Widgets:"w"},p=Object.keys(u),d=p.reduce(function(e,t){var n=c[t],s=u[t],p=l[t],d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.forEach(function(n){return t[n]=e[n]}),t},f=function(e,t){var r=e.find(function(e){return e.cid===t}),a=n.findByAttribute("cid",t);return o.a,o.a,Boolean(r||a)},h=function(e,t){var r=e.find(function(e){return e.cid===t}),a=n.findByAttribute("cid",t);return o.a,o.a,{dataState:r,dataModel:a}};return e[t]={refreshStateList:function(e){return n.all().map(function(e){return d(e,{})})},saveState:function(e,t,n){var r=t.cid,o=h(e,r),i=o.dataState,c=o.dataModel;return i&&c?(c.lsave(!n),!n&&a.a.SpineModel.queueSave(),e):e},addState:function(e,t,c){var s=t.cid||a.a.SpineModel.requestCid(p);f(e,s)&&(s=a.a.SpineModel.requestCid(p));var u=i({},t,{cid:s});return new n(u).lsave(!c),!c&&a.a.SpineModel.queueSave(),o.a,r.Operation.arrayPush(e,u)},updateState:function(e,t,n){var c=t.cid,s=h(e,c),u=s.dataState,l=s.dataModel;return u&&l?(u=i({},u,t),Object.assign(l,u),l.lsave(!n),!n&&a.a.SpineModel.queueSave(),o.a,r.Operation.arrayFindSet(e,function(e){return e.cid===c},u)):e},deleteState:function(e,t,n){var i=t.cid,c=h(e,i),s=c.dataState,u=c.dataModel;return s&&u?(u.ldestroy(!n),!n&&a.a.SpineModel.queueSave(),o.a,r.Operation.arrayFindDelete(e,function(e){return e.cid===i})):e}},e},{})},DiHq:function(e,t,n){"use strict";function r(e,t,o){function s(){g===v&&(g=v.slice())}function u(){return y}function l(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return s(),g.push(e),function(){if(t){t=!1,s();var n=g.indexOf(e);g.splice(n,1)}}}function p(e){if(!n.i(a.a)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(b)throw new Error("Reducers may not dispatch actions.");try{b=!0,y=m(y,e)}finally{b=!1}for(var t=v=g,r=0;r<t.length;r++)t[r]();return e}function d(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");m=e,p({type:c.INIT})}function f(){var e,t=l;return e={subscribe:function(e){function n(){e.next&&e.next(u())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[i.a]=function(){return this},e}var h;if("function"==typeof t&&void 0===o&&(o=t,t=void 0),void 0!==o){if("function"!=typeof o)throw new Error("Expected the enhancer to be a function.");return o(r)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var m=e,y=t,v=[],g=v,b=!1;return p({type:c.INIT}),h={dispatch:p,subscribe:l,getState:u,replaceReducer:d},h[i.a]=f,h}n.d(t,"b",function(){return c}),t.a=r;var a=n("BIBl"),o=n("NTQ/"),i=n.n(o),c={INIT:"@@redux/INIT"}},E7xn:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r=[{title:"basic",widgets:[{id:"label",icon_text:"文字",text:I18N.w.label,tb_text:"文字",icon_name:"text",width:33,height:45,fs:16,br:0,bs:0,ha:"center",va:"middle",z:5,lh:1.45},{id:"text_view",icon_text:"多行文字",text:I18N.w.text_view_placeholder,tb_text:"多行文字",icon_name:"paragraph",width:200,height:65,fs:13,br:0,bs:0,ha:"left",va:"top",z:5,lh:1.45},{id:"icon_button",icon_text:"图标",text:"",icon:"star",tb_icon:"star",icon_name:"smile",width:45,height:45,br:0,bs:0,is:24,z:5,tooltip:"图标"},{id:"image_view",icon_text:"图片",text:"",icon_name:"img",width:200,height:120,tb_icon:"picture-o",br:0,bs:0,z:5},{id:"button",icon_text:"按钮",text:I18N.w.button,tb_text:"按钮",icon_name:"btn",width:80,height:30,fs:14,br:8,bs:1,ha:"center",va:"middle",z:5,icon:"",is:14,padding:8},{id:"mtooltip",icon_text:"聊天气泡",text:I18N.w.mtooltip,tb_text:"聊天气泡",icon_name:"tooltip",width:220,height:40,fs:14,br:5,ha:"left",va:"top",z:5,lh:1.45,bg:"#8DFA69",bc:"#5FE163",bs:1,padding:10},{icon_text:"网页",id:"webpage",text:"about:blank",tb_text:"网页",icon_name:"webpage",width:"100%",height:400,z:5,ha:"center"}]},{title:"functional",widgets:[{id:"pg",icon_text:"全局手势",tb_icon:"tap",icon_name:"gesture",icon:"tap",width:40,height:40,br:0,bs:0,z:7,tooltip:"全局手势",zoomable:" "},{id:"lr",icon_text:"链接区域",tb_text:"链接区域",icon_name:"link",width:45,height:45,br:0,bs:0,z:7,tooltip:"可按住 Ctrl/Cmd 拖动鼠标快速创建链接区域"},{id:"sticky",icon_text:"批注",tb_text:"批注",icon_name:"sticker",tooltip:"批注组件可显示在页面任意位置",width:204,height:170,padding:24,fs:12,lh:1.67,z:10}]},{title:"shape",widgets:[{id:"rounded_rect",icon_text:"矩形",text:"",icon_name:"rectangle",width:200,height:100,br:0,bs:1,fs:14,ha:"center",va:"middle",lh:1.45,z:5},{id:"circle_rect",icon_text:"圆形",text:"",icon_name:"circle",width:100,height:100,br:100,bs:1,fs:14,ha:"center",va:"middle",lh:1.45,z:5},{id:"hr",icon_text:"线条",text:"",icon_name:"horizontal-line",width:150,height:10,z:5,zoomable:"w,e,n"},{id:"ve",icon_text:"线条",text:"",icon_name:"vertical-line",width:10,height:150,z:5,zoomable:"n,s,w"},{id:"triangleb",icon_text:"三角",text:"",icon_name:"triangle-top",width:40,height:30,z:5},{id:"triangletl",icon_text:"三角",text:"",icon_name:"triangle-left-bottom",width:40,height:40,z:5}]},{title:"input",widgets:[{id:"mtext_input",icon_text:"单行输入",text:I18N.w.mtext_input,tb_text:"单行输入",icon_name:"input",width:200,height:30,fs:14,br:8,bs:1,ha:"left",va:"middle",z:5,padding:8},{id:"mtextarea",icon_text:"多行输入",text:I18N.w.mtextarea,tb_text:"多行输入",icon_name:"textarea",width:280,height:100,fs:14,lh:1.45,br:8,bs:1,ha:"left",z:5,padding:8},{id:"mcheckbox2",icon_text:"复选框",tb_icon:"check",icon_name:"checkbox",width:30,height:30,z:5,checked:!1},{id:"mradiobutton",icon_text:"单选框",tb_icon:"dot-circle-o",icon_name:"radio",width:30,height:30,z:5,checked:!1},{id:"mselect",icon_text:"下拉框",text:"1\n2\n3",tb_text:"下拉框",icon_name:"select",width:200,height:30,fs:14,bs:1,z:5,lh:1.45,padding:8},{id:"mfile_input",icon_text:"选择文件",tb_text:"文件选择",icon_name:"file",width:200,height:30,z:5,padding:8},{id:"switch",icon_text:"开关按钮",text:"",icon_name:"toggle",width:50,height:30,br:0,bs:0,z:5,zoomable:" ",checked:!0}]},{title:"bar",widgets:[{id:"navigation_bar",icon_text:"标题栏",text:I18N.w.navbar_title,tb_text:"标题栏",icon_name:"header",width:"100%",height:55,fs:18,z:4,zoomable:"s",ha:"center",top:23},{id:"tab_bar",icon_text:"底栏",text:"",tb_text:"底栏",icon_name:"footer",width:"100%",height:45,z:4,zoomable:"n"},{id:"rectangle",icon_text:"空白通栏",text:"",icon_name:"bar",width:"100%",height:100,z:5,zoomable:"n,s"},{id:"search_bar",icon_text:"搜索框",text:I18N.w.search,tb_text:"搜索",icon_name:"search-input",width:"100%",height:45,tb_icon:"search",fs:14,ha:"left",z:5,zoomable:"w,e"},{id:"tab_item",icon_text:"标签",text:I18N.w.tab_item,tb_text:"标签",tb_icon:"home",icon_name:"icon-label",icon:"home",width:80,height:45,fs:12,is:24,z:5,ha:"center",zoomable:"w,e"}]},{title:"other",widgets:[{id:"map_view",icon_text:"地图",text:"",icon_name:"map",width:"100%",height:230,z:4},{id:"keyboard",icon_text:"键盘",text:I18N.w.return,width:"100%",tb_icon:"keyboard-o",icon_name:"keyboard",z:3,zoomable:" ",numeric:!1},{id:"status_bar",icon_text:"状态栏",text:I18N.w.carrier,tb_text:"中国移动",icon_name:"battery",width:"100%",height:23,tb_icon:"signal",z:3,zoomable:" "}]}],a=r.reduce(function(e,t){return e=e.concat(t.widgets)},[]),o=a.reduce(function(e,t){return e[t.id]=t,e},{});MB.COMPONENTS=o},EX8i:function(e,t,n){"use strict";function r(){function e(e){return r.push(e),function(){return n.i(c.l)(r,e)}}function t(e){for(var t=r.slice(),n=0,a=t.length;n<a;n++)t[n](e)}var r=[];return{subscribe:e,emit:t}}function a(){function e(){if(u&&l.length)throw n.i(c.m)("Cannot have a closed channel with pending takers");if(l.length&&!i.isEmpty())throw n.i(c.m)("Cannot have pending takers with non empty buffer")}function t(t){if(e(),n.i(c.b)(t,c.c.notUndef,h),!u){if(!l.length)return i.put(t);for(var r=0;r<l.length;r++){var a=l[r];if(!a[c.n]||a[c.n](t))return l.splice(r,1),a(t)}}}function r(t){e(),n.i(c.b)(t,c.c.func,"channel.take's callback must be a function"),u&&i.isEmpty()?t(p):i.isEmpty()?(l.push(t),t.cancel=function(){return n.i(c.l)(l,t)}):t(i.take())}function a(t){if(e(),n.i(c.b)(t,c.c.func,"channel.flush' callback must be a function"),u&&i.isEmpty())return void t(p);t(i.flush())}function o(){if(e(),!u&&(u=!0,l.length)){var t=l;l=[];for(var n=0,r=t.length;n<r;n++)t[n](p)}}var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.fixed(),u=!1,l=[];return n.i(c.b)(i,c.c.buffer,f),{take:r,put:t,flush:a,close:o,get __takers__(){return l},get __closed__(){return u}}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.none(),r=arguments[2];arguments.length>2&&n.i(c.b)(r,c.c.func,"Invalid match function passed to eventChannel");var o=a(t),i=e(function(e){if(d(e))return void o.close();r&&!r(e)||o.put(e)});if(!c.c.func(i))throw new Error("in eventChannel: subscribe should return a function to unsubscribe");return{take:o.take,flush:o.flush,close:function(){o.__closed__||(o.close(),i())}}}function i(e){var t=o(function(t){return e(function(e){if(e[c.o])return void t(e);n.i(u.a)(function(){return t(e)})})});return l({},t,{take:function(e,r){arguments.length>1&&(n.i(c.b)(r,c.c.func,"channel.take's matcher argument must be a function"),e[c.n]=r),t.take(e)}})}n.d(t,"a",function(){return p}),n.d(t,"c",function(){return d}),t.e=r,t.d=o,t.b=i;var c=n("sZUI"),s=n("W3Gc"),u=n("qytv"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p={type:"@@redux-saga/CHANNEL_END"},d=function(e){return e&&"@@redux-saga/CHANNEL_END"===e.type},f="invalid buffer passed to channel factory function",h="Saga was provided with an undefined action"},Ejk5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Operation=t.arrayActMap=t.objectActMap=t.ArrayOf=t.ObjectAs=t.ArrayScheme=t.ObjectScheme=t.Scheme=void 0;var r=n("21Sj"),a=n("VjYf"),o=n("+Oax");t.Scheme=a.Scheme,t.ObjectScheme=a.ObjectScheme,t.ArrayScheme=a.ArrayScheme,t.ObjectAs=o.ObjectAs,t.ArrayOf=o.ArrayOf,t.objectActMap=o.objectActMap,t.arrayActMap=o.arrayActMap,t.Operation=r.Operation,t.default={Scheme:a.Scheme,ObjectScheme:a.ObjectScheme,ArrayScheme:a.ArrayScheme,ObjectAs:o.ObjectAs,ArrayOf:o.ArrayOf,objectActMap:o.objectActMap,arrayActMap:o.arrayActMap,Operation:r.Operation}},F5gc:function(e,t,n){"use strict";var r=n("Ebzz"),a=n.n(r),o=n("eBYd"),i=n.n(o),c=n("jPtm"),s=(n.n(c),n("XUrE")),u=n.n(s),l=n("5VFw"),p=(n.n(l),n("AxSz")),d=n("xHGQ"),f=n("8kgv"),h=n("a8Au"),m=n.n(h),y=n("uuwI"),v=n.n(y),g=function(e){var t=e.children,n=e.onChange,r=e.isActive,a=e.icon,o=e.id;return i.a.createElement("div",{className:v.a.panelItemHeader},t,i.a.createElement(d.a,{id:o,icon:a,checked:r,onChange:function(){return n(r)}}))};g.propTypes={onChange:a.a.func,isActive:a.a.bool,icon:a.a.string,children:a.a.element,id:a.a.string};var b=function(e){var t=e.count,n=e.onChange,r=e.isActive;return i.a.createElement(g,{onChange:n,isActive:r,icon:"single-comment",id:"switch-comment"},i.a.createElement("p",null,I18N.preview_panel.comment,i.a.createElement("span",{title:"评论","data-toggle":"tooltip","data-placement":"right"}," "+p.a.I18N.preview.screen.open_paren+(t>1e3?"1000+":t)+p.a.I18N.preview.screen.close_paren)))};b.propTypes={onChange:a.a.func,count:a.a.number,isActive:a.a.bool};var _=function(e){return{isActive:e.container.comment.isActive,count:e.model.commentThreads.length}},w=function(e){return{onChange:function(t){MB.ga("send","event","feature","打开了评论面板"),MB.mp("打开了评论面板"),MB.currentScreen.height>MB.currentScreen.dH()&&MB.runner.reload(!0),e({type:"entry:comment:set:active",payload:{isActive:!t}})}}},E=function(e){var t,n=e.onChange,r=e.isActive;return i.a.createElement("div",{className:u()(v.a.subPanel,(t={},t[v.a.isPanelItemOpen]=r,t[v.a.isLayerOpen]=r,t))},i.a.createElement(g,{onChange:n,isActive:r,icon:"pencil",id:"switch-layer"},i.a.createElement("p",null,I18N.preview_panel.developer_mode)),r&&i.a.createElement("div",{id:"ui-layer-panel",className:v.a.subPanel,key:Math.random()},i.a.createElement("div",{className:m.a.separator}),i.a.createElement(f.a,null)))};E.propTypes={onChange:a.a.func,isActive:a.a.bool};var S=function(e){return{isActive:e.container.layers.isActive}},C=function(e){return{onChange:function(t){t?(MB.ga("send","event","feature","打开了开发者模式"),MB.mp("打开了开发者模式"),l("#ui-layers").removeClass("is-active"),e({type:"entry:layer:set:active",payload:{isActive:!1}})):(l("#ui-layers").addClass("is-active"),e({type:"entry:layer:set:active",payload:{isActive:!0}}))}}},x={CommentPanelItem:n.i(c.connect)(_,w)(b),LayerPanelItem:n.i(c.connect)(S,C)(E)};t.a=x},"Fm/I":function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},G1TU:function(e,t,n){"use strict";function r(e,t){var n=t.getState,r=t.setState,a=n();return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,o=arguments[1];return o.type!==e?t:(r(o.payload||t),n())}}n.d(t,"a",function(){return g}),n.d(t,"b",function(){return b});var a=n("SgXW"),o=(n.n(a),n("G5Pd")),i=n("ZCvY"),c=n("jAji"),s=n("yD+I"),u=n("Xc71"),l=n("3wZp"),p=n("8I+x"),d=n("NE5x"),f=n("vWVt"),h=n("ieLl"),m=n("AxSz"),y=n("bBrr"),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=v({},o.a.entryMap,i.a.entryMap,c.a.entryMap,s.a.entryMap,u.a.entryMap,l.a.entryMap,p.a.entryMap,d.a.entryMap,f.a.entryMap,h.a.entryMap,{"entry:add-mock-collaborator":function(e){var t=e.dispatch,n=l.a.getState(),r=s.a.getState(),a=o.a.getState(),i=new Set(a.map(function(e){return e.cid})),c=0,u=function(e,n){var r="co_MOCK_"+e.cid;i.has(r)||(t({type:"collaborators:add-local",payload:{cid:r,role:"owner",user_id:e.owner_id,name:e.owner_name,email:e.owner_email||"email_MOCK_"+e.owner_id,avatar:e.owner_avatar,team_cid:n?e.cid:null,project_cid:n?null:e.cid}}),c++)};n.forEach(function(e){return u(e,!0)}),r.forEach(function(e){return u(e,!1)}),y.a},"entry:current:set":function(e,t){var n=e.dispatch,r=t.payload,a=void 0===r?{}:r,i=d.a.getState(),c=o.a.getState(),s=a.project||m.a.MB.currentProject||null,u=a.screen||m.a.MB.currentScreen||null,l=s&&i&&c.find(function(e){return e.user_id===i.id&&(e.project_cid===s.cid||e.team_cid===s.team_cid)})||null;n({type:"current:set",payload:{project:s,screen:u,collaborator:l}})},"entry:current:set-screen":function(e,t){var n=e.dispatch,r=t.payload,a=r.cid,o=r.shouldFetchLayer,i=u.a.getState().find(function(e){return e.cid===a});i&&(n({type:"entry:current:set",payload:{screen:i}}),o&&n({type:"SET_VISIBILITY_SCREEN",payload:{screenID:i.cid}}),m.a.MB.runner.loadScreen(i.cid))},"entry:current:set-screen-runner":function(e,t){var n=e.dispatch,r=t.payload.cid,a=u.a.getState().find(function(e){return e.cid===r});a&&n({type:"entry:current:set",payload:{screen:a}})},"entry:comment-threads:add":function(e,t){var n=e.dispatch,r=t.payload,a=r.top,o=r.left,i=r.message,c=d.a.getState(),s=f.a.getState(),u=s.screenCid,l=.001*Date.now(),p=m.a.SpineModel.requestCid("cmth"),h=100/m.a.SpineModel.getScreenScale();n({type:i?"comment-threads:add":"comment-threads:add-local",payload:{cid:p,top:Math.round(a*h),left:Math.round(o*h),screen_cid:u,user_id:c.id,created_at:l,updated_at:l}}),i&&n({type:"comments:add",payload:{thread_cid:p,message:i,user_id:c.id,created_at:l,updated_at:l}}),n({type:"container:comment:select",payload:{select:p}})},"entry:comment-threads:update":function(e,t){var n=e.dispatch,r=t.payload,a=r.cid,o=r.top,c=r.left,s=i.a.getState().find(function(e){return e.thread_cid===a}),u=.001*Date.now(),l=100/m.a.SpineModel.getScreenScale();n({type:s?"comment-threads:update-local":"comment-threads:update",payload:{cid:a,top:Math.round(o*l),left:Math.round(c*l),updated_at:u}})},"entry:comment-threads:delete":function(e,t){var n=e.dispatch,r=t.payload.cid;n({type:"comment-threads:delete",payload:{cid:r}}),i.a.getState().forEach(function(e){return e.thread_cid===r&&n({type:"comments:delete-local",payload:e})})},"entry:comments:add":function(e,t){var n=e.dispatch,r=t.payload,a=r.thread_cid,o=r.message,i=d.a.getState(),c=.001*Date.now();n({type:"comment-threads:save",payload:{cid:a}}),n({type:"comments:add",payload:{thread_cid:a,message:o,user_id:i.id,created_at:c,updated_at:c}})},"entry:comments:update":function(e,t){var n=e.dispatch,r=t.payload;n({type:"comments:update",payload:{cid:r.cid,message:r.message,updated_at:.001*Date.now()}})},"entry:state:push-data":function(e,t){var n=e.dispatch,r=t.payload,a=r.pushType,o=r.action,s=r.data;r.record;switch(a){case"thread":var u=c.a.getState().find(function(e){return e.cid===s.cid});"update"!==o||u?"update"===o&&u?n({type:"comment-threads:update-local",payload:s}):"destroy"===o&&u&&(n({type:"comment-threads:delete-local",payload:s}),i.a.getState().forEach(function(e){return e.thread_cid===s.cid&&n({type:"comments:delete-local",payload:e})})):n({type:"comment-threads:add-local",payload:s});break;case"comment":var l=i.a.getState().find(function(e){return e.cid===s.cid});"update"!==o||l?"update"===o&&l?n({type:"comments:update-local",payload:s}):"destroy"===o&&l&&n({type:"comments:delete-local",payload:s}):n({type:"comments:add-local",payload:s});var p=f.a.getState(),d=p.screenCid,h=c.a.getState().find(function(e){return e.cid===s.thread_cid});h&&h.screen_cid===d&&n({type:"unread-comment:set-unread",payload:{commentCid:s.cid,threadCid:h.cid,screenCid:d}})}return null},"entry:projects:delete":function(e,t){var n=e.dispatch,r=t.payload,a=r,i=d.a.getState();if(a.owner_id===i.id||a.canAdmin()&&a.team_cid)!0===m.a.confirm(m.a.I18N.del_app_confirmation)&&n({type:"projects:delete",payload:a});else if(m.a.confirm(m.a.I18N.are_you_sure)){var c=o.a.getState().filter(function(e){return e.project_cid===a.cid&&e.user_id===i.id}),s=c[0];n({type:"collaborators:delete",payload:s}),n({type:"projects:delete-local",payload:a})}},"entry:teams:delete":function(e,t){var n=e.dispatch,r=t.payload,a=r,i=d.a.getState();if(a.owner_id===i.id){if(a.cprojects().length>0)return void m.a.alert(m.a.I18N.delete_projects_first);!0===m.a.confirm(m.a.I18N.are_you_sure)&&n({type:"teams:delete",payload:a})}else if(m.a.confirm(m.a.I18N.are_you_sure)){var c=o.a.getState().filter(function(e){return e.team_cid===a.cid&&e.user_id===i.id}),s=c[0];n({type:"collaborators:delete",payload:s}),n({type:"teams:delete-local",payload:a})}}}),b={collaborators:r("reducer:collaborators:update",o.a),comments:r("reducer:comments:update",i.a),commentThreads:r("reducer:comment-threads:update",c.a),projects:r("reducer:projects:update",s.a),screens:r("reducer:screens:update",u.a),teams:r("reducer:teams:update",l.a),widgets:r("reducer:widgets:update",p.a),user:n.i(a.createStateStoreReducer)("reducer:user:update",d.a),current:n.i(a.createStateStoreReducer)("reducer:current:update",f.a),unreadComment:n.i(a.createStateStoreReducer)("reducer:unread-comment:update",h.a)}},G5Pd:function(e,t,n){"use strict";var r=n("SgXW"),a=(n.n(r),n("DZQR")),o=a.a.Collaborator,i=[],c=n.i(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:collaborators:update",payload:e(n,i,t)})})},d={"collaborators:refresh":l(function(e,t,n){var r=t.dispatch,a=n&&n.payload;e=o.refreshStateList(e,a,!1),e.forEach(function(e){e.avatar||(e.avatar="/images/avatar.png")}),r({type:"reducer:collaborators:update",payload:e})}),"collaborators:add":p(o.addState,!1),"collaborators:add-local":p(o.addState,!0),"collaborators:update":p(o.updateState,!1),"collaborators:update-local":p(o.updateState,!0),"collaborators:delete":p(o.deleteState,!1),"collaborators:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},GATT:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a={expandCount:0,bottomCoveredHeight:0};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1],n=t.type,o=t.payload;switch(n){case"container:screen:expand":return r({},e,{expandCount:e.expandCount++});case"container:screen:set:bottom-covered-height":return r({},e,{bottomCoveredHeight:o.bottomCoveredHeight})}return e}},"Gf/N":function(e,t,n){function r(e){var t=Math[e];return function(e,n){if(e=o(e),n=null==n?0:c(a(n),292)){var r=(i(e)+"e").split("e"),s=t(r[0]+"e"+(+r[1]+n));return r=(i(s)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}var a=n("8qcD"),o=n("Q+NL"),i=n("AWp9"),c=Math.min;e.exports=r},GkqC:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return v});var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("AxSz"),p=n("87Bm"),d=n("U6mC"),f=n.n(d),h=n("nD5O"),m=n.n(h),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.toggleFolded=function(e){void 0===e&&(e=!o.state.isFolded),o.setState({isFolded:e})},o.toggleEditing=function(){return o.editableSpanComponent&&o.editableSpanComponent.toggleEditing()},o.doUpdateComment=function(e){return o.props.dispatch({type:"entry:comments:update",payload:y({},o.props.comment,{message:e})})},o.doDeleteComment=function(){return l.a.confirm(l.a.I18N.preview.comment.comment_delete_confirm)&&o.props.dispatch({type:"comments:delete",payload:o.props.comment})},o.state={isFolded:o.props.comment.message.length>120||!1},o}return o(t,e),t.prototype.renderCommentUpper=function(e,t,n,r,a){return u.a.createElement("div",{className:f.a.comment_comment_upper,type:"toolbar"},r&&u.a.createElement("span",{type:"index"},"#"+a),n&&u.a.createElement("img",{width:24,height:24,src:n.avatar,className:m.a.avatar}),n&&u.a.createElement("span",{type:"name","data-css":"spacer"},n.name),u.a.createElement("span",{type:"time"},l.a.L10N.parseTimeAgo(1e3*e.created_at)))},t.prototype.renderCommentMiddle=function(e,t,n){var r=this,a=e.updated_at!==e.created_at;return u.a.createElement("div",{className:[f.a.comment_comment_content,this.state.isFolded?f.a.comment_comment_content_folded:""].join(" ")},u.a.createElement(p.a.EditableSpan,{ref:function(e){return r.editableSpanComponent=e},onValueChange:this.doUpdateComment,getValue:function(){return e.message},isMultiLine:!0,initEditing:!1,placeholder:l.a.I18N.preview.comment.comment_placeholder,isEditLocked:!t.update}),a&&u.a.createElement("span",{type:"edited"},l.a.I18N.preview.comment.tag_edited))},t.prototype.renderCommentLower=function(e,t,n){var r=this;return this.state.isFolded||t.update||t.delete?u.a.createElement("div",{className:f.a.comment_comment_lower,type:"toolbar"},this.state.isFolded&&u.a.createElement("span",{type:"modify",onClick:function(){return r.toggleFolded()}},l.a.I18N.preview.comment.unfold),this.state.isFolded&&u.a.createElement("span",{type:"dot"}),t.update&&u.a.createElement("span",{type:"modify",onClick:this.toggleEditing},l.a.I18N.preview.comment.modify_edit),t.update&&u.a.createElement("span",{type:"dot"}),t.delete&&u.a.createElement("span",{type:"modify",onClick:this.doDeleteComment},l.a.I18N.preview.comment.modify_delete)):null},t.prototype.renderThreadInitial=function(e,t,n,r){return u.a.createElement("div",{className:[f.a.comment_comment,f.a.comment_comment_thread_initial].join(" "),onClick:this.toggleSelect,onMouseEnter:this.doReadComment},this.renderCommentUpper(e,t,n,!0,r),this.renderCommentMiddle(e,t,n),this.renderCommentLower(e,t,n))},t.prototype.renderUserInitial=function(e,t,n,r){return u.a.createElement("div",{className:[f.a.comment_comment,f.a.comment_comment_user_initial].join(" "),onClick:this.toggleSelect,onMouseEnter:this.doReadComment},this.renderCommentUpper(e,t,n,!1,r),this.renderCommentMiddle(e,t,n),this.renderCommentLower(e,t,n))},t.prototype.renderAppending=function(e,t,n){return u.a.createElement("div",{className:[f.a.comment_comment,f.a.comment_comment_appending].join(" "),onClick:this.toggleSelect,onMouseEnter:this.doReadComment},this.renderCommentMiddle(e,t,n),this.renderCommentLower(e,t,n))},t.prototype.render=function(){var e=this.props,t=e.comment,n=e.isThreadInitial,r=e.isUserInitial,a=e.commentMarkerIndex,o=e.getPermission,i=e.getCollaborator,c=o(t.user_id),s=i(t.user_id);return n?this.renderThreadInitial(t,c,s,a):r?this.renderUserInitial(t,c,s):this.renderAppending(t,c,s)},t}(u.a.PureComponent);v.propTypes={commentMarkerIndex:c.a.number,comment:c.a.object,isThreadInitial:c.a.bool,isUserInitial:c.a.bool,getPermission:c.a.func,getCollaborator:c.a.func,dispatch:c.a.func}},Guzr:function(e,t,n){function r(e){var t=new e.constructor(e.byteLength);return new a(t).set(new a(e)),t}var a=n("v79p");e.exports=r},HIdT:function(e,t,n){"use strict";n("sZUI"),n("f8j7"),n("7g8A")},HdvG:function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},IIAV:function(e,t){e.exports={container:"_1h7YZyBDeWUUvJrcEcnyys",infoHeader:"_2Rfq8fkVzrXuWCBFKeQbLi",panel:"_7kaVuMOPV8hWma2Rh5DFB",flexFull:"SG7LHlIjPxyFsKbj5Goum",panelRow:"_3kIzDwH_8E2eQW8DNSc956 SG7LHlIjPxyFsKbj5Goum",infoKey:"_1e_PjQK9rWrBGt16XYMcd0",infoValue:"_33PATGUWjZbrAFHQj-r9Tg",fixedWidth:"rW1V20kgBBi63KlyTewfL",copyBtn:"_3_aW_IKyvHX-o6PYoSePp- _2TAID7TnzAXoGA-jTBc04W",ghostTextarea:"_1G6SP_6PFjC68r614xdOUu",colorRow:"_3brSMPQuFwZNjRM0IVJRW5",colorBlock:"_3TJaYcXcywtnxvx8DKSSqX",colorContent:"_1Wj0kqh8vP-VTJR-4BL0W0",textContent:"_2U8baSG0v85gfnrfGcWvE8"}},Ibgh:function(e,t,n){"use strict";var r=n("zVs0"),a=n("4MYk");n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return a.a});r.a},Iuwf:function(e,t,n){var r=n("Fm/I"),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},Jqn1:function(e,t,n){function r(e,t){return i(o(e,t,a),e+"")}var a=n("6aYq"),o=n("t0dO"),i=n("VES4");e.exports=r},Kigd:function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},Ksh6:function(e,t,n){(function(e){function r(e,t){if(t)return e.slice();var n=e.length,r=u?u(n):new e.constructor(n);return e.copy(r),r}var a=n("3I6u"),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,c=i&&i.exports===o,s=c?a.Buffer:void 0,u=s?s.allocUnsafe:void 0;e.exports=r}).call(t,n("BOZI")(e))},LLOX:function(e,t,n){function r(e){if(!o(e))return!1;var t=a(e);return t==c||t==s||t==i||t==u}var a=n("V1jg"),o=n("5f4m"),i="[object AsyncFunction]",c="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";e.exports=r},M0Wl:function(e,t){function n(){return!1}e.exports=n},MseR:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(){function e(e){function t(e,t,o){return n.i(c.a)(e.apply(void 0,r(t)),f.subscribe,h,a,u,l,o,e.name)}var a=e.getState,o=e.dispatch;p=t;var f=n.i(s.e)();f.emit=(l.emitter||i.f)(f.emit);var h=n.i(i.w)(o);return function(e){return function(t){d&&d.actionDispatched(t);var n=e(t);return f.emit(t),n}}}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.context,u=void 0===o?{}:o,l=a(t,["context"]),p=void 0,d=l.sagaMonitor;if(d&&(d.effectTriggered=d.effectTriggered||i.k,d.effectResolved=d.effectResolved||i.k,d.effectRejected=d.effectRejected||i.k,d.effectCancelled=d.effectCancelled||i.k,d.actionDispatched=d.actionDispatched||i.k),i.c.func(l))throw new Error("Saga middleware no longer accept Generator functions. Use sagaMiddleware.run instead");if(l.logger&&!i.c.func(l.logger))throw new Error("`options.logger` passed to the Saga middleware is not a function!");if(l.onerror&&(i.q&&n.i(i.p)("warn","`options.onerror` is deprecated. Use `options.onError` instead."),l.onError=l.onerror,delete l.onerror),l.onError&&!i.c.func(l.onError))throw new Error("`options.onError` passed to the Saga middleware is not a function!");if(l.emitter&&!i.c.func(l.emitter))throw new Error("`options.emitter` passed to the Saga middleware is not a function!");return e.run=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];n.i(i.b)(p,i.c.notUndef,"Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware"),n.i(i.b)(e,i.c.func,"sagaMiddleware.run(saga, ...args): saga argument must be a Generator function!");var o=n.i(i.r)();d&&d.effectTriggered({effectId:o,root:!0,parentEffectId:0,effect:{root:!0,saga:e,args:r}});var c=p(e,r,o);return d&&d.effectResolved(o,c),c},e.setContext=function(e){n.i(i.b)(e,i.c.object,n.i(i.g)("sagaMiddleware",e)),i.t.assign(u,e)},e}t.a=o;var i=n("sZUI"),c=n("7g8A"),s=n("EX8i")},NE5x:function(e,t,n){"use strict";function r(e){var t=e.plan,n=e.state,r=e.limitation,a=e.days_left,o="active"===n;return{state:n||"",type:o&&t||"free",rawType:t||"free",collaboratorLimitation:o&&r||0,daysLeft:a||""}}var a=n("SgXW"),o=(n.n(a),n("Ejk5")),i=(n.n(o),{id:"",name:"",email:"",avatar:"",plan:{state:"",type:"free",rawType:"free",collaboratorLimitation:0,daysLeft:""}}),c=n.i(a.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p={"user:set":l(function(e,t,n){var a=t.dispatch,i=n.payload,c=i.id,s=void 0===c?"":c,u=i.name,l=void 0===u?"":u,p=i.email,d=void 0===p?"":p,f=i.avatar,h=void 0===f?"":f;a({type:"reducer:user:update",payload:o.Operation.objectMerge(e,{id:s,name:l,email:d,avatar:h,plan:r(i)})})}),"user:clear":l(function(e,t,n){(0,t.dispatch)({type:"reducer:user:update",payload:i})})};t.a={entryMap:p,getState:s,setState:u}},"NTQ/":function(e,t,n){e.exports=n("v0Ts")},OtSt:function(e,t,n){"use strict";var r=n("jPtm"),a=(n.n(r),n("uiFk")),o=function(e){var t=e.container.layers,n=t.resourceByScreen,r=t.visibilityScreenID,a=t.isActive,o=n[r]||{isFetching:!0,screen:{},error:""};return{isFetching:o.isFetching,screen:o.screen,error:o.error,isActive:a}},i=n.i(r.connect)(o)(a.a);t.a=i},OxeN:function(e,t,n){"use strict";var r=n("+WZT"),a=n.n(r),o=n("Ebzz"),i=n.n(o),c=n("eBYd"),s=n.n(c),u=n("jPtm"),l=(n.n(u),n("yI57")),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(e){var t=e.layer,r=t.name,a=t.top,o=t.left,i=t.width,c=t.height,u=e.currentScreen,p=u.width,d=u.height,f={top:a/d*100+"%"},h={left:n.i(l.a)(r)?"100%":(o+i-1)/p*100+"%"},m={top:(a+c-1)/d*100+"%"},y={left:o/p*100+"%"};return s.a.createElement("ul",{className:"LayerBoundings"},s.a.createElement("li",{className:"LayerBounding LayerBounding--top",style:f}),s.a.createElement("li",{className:"LayerBounding LayerBounding--right",style:h}),s.a.createElement("li",{className:"LayerBounding LayerBounding--bottom",style:m}),s.a.createElement("li",{className:"LayerBounding LayerBounding--left",style:y}))};d.propTypes={layer:i.a.object,currentScreen:i.a.object};var f=function(e,t,n){return n>e&&n<t},h=function(e){var t=e.activeLayer,r=e.enteredLayer,a=e.currentScreen;if(!t||!r||t.id===r.id)return null;var o={horizontal:{point1:[Math.floor(t.left),Math.floor(n.i(l.a)(t.name)?a.width:t.left+t.width)],point2:[Math.floor(r.left),Math.floor(n.i(l.a)(r.name)?a.width:r.left+r.width)]},vertical:{point1:[Math.floor(t.top),Math.floor(t.top+t.height)],point2:[Math.floor(r.top),Math.floor(r.top+r.height)]}},i={horizontal:[],vertical:[]},c={horizontal:{},vertical:{}};for(var u in o)for(var p=o[u].point1,d=o[u].point2,h=0;h<p.length;h++)for(var m=0;m<d.length;m++){var y=Math.min(p[h],d[m]),v=Math.max(p[h],d[m]);f(y,v,p[1-h])||f(y,v,d[1-m])||!(v-y>0)||y===p[0]&&v===p[1]||y===d[0]&&v===d[1]||c[u][y]||(c[u][v]=!0,i[u].push({start:y,end:v}))}var g=[],b=a.width,_=a.height;for(var w in i)!function(e){g.push(i[e].map(function(a,o){var i=void 0,c=r.type&&"screen"===r.type?t:r;return i="horizontal"===e?{left:a.start/b*100+"%",width:(a.end-a.start)/b*100+"%",top:(c.height/2+c.top)/_*100+"%"}:{top:a.start/_*100+"%",height:(a.end-a.start)/_*100+"%",left:((n.i(l.a)(c.name)?b/2:c.width/2)+c.left)/b*100+"%"},s.a.createElement("li",{key:""+e+o,className:"LayerDistance LayerDistance--"+e,"data-length":Math.floor(a.end-a.start),style:i})}))}(w);return s.a.createElement("ul",{className:"LayerDistances"},Array.prototype.concat.apply([],g))};h.propTypes={activeLayer:i.a.object,enteredLayer:i.a.object,currentScreen:i.a.object};var m=function(e){var t=e.activeLayer,n=e.enteredLayer,r=e.currentScreen;return s.a.createElement("div",{className:"MeasuresContainer"},s.a.createElement(d,{layer:t,currentScreen:r}),s.a.createElement(h,{activeLayer:t,enteredLayer:n,currentScreen:r}))};m.propTypes={activeLayer:i.a.object,enteredLayer:i.a.object,currentScreen:i.a.object};var y=function(e){var t=e.container.layers,n=t.resourceByScreen,r=t.visibilityScreenID,o=t.activeLayerID,i=t.enteredLayerID,c=e.model,s=c.current.screenCid,u=c.screens,l=n[r];return l?{activeLayer:a()(l.layers,function(e){return e.id===o}),enteredLayer:a()(l.layers,function(e){return e.id===i}),currentScreen:u.find(function(e){return e.cid===s})}:{activeLayer:{},enteredLayer:{},currentScreen:{}}},v=function(e){return p({},y(e))};t.a=n.i(u.connect)(v)(m)},P63K:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("Qza0"),p=n.n(l),d=n("Y7r3"),f=n.n(d),h=n("WCZ4"),m=n("dr6V"),y=n.n(m),v=y.a.bind(f.a),g=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.handleExpand=function(e){var t=!n.state.expand;n.setState({expand:t})},n.handleClick=function(e){var t=n.props,r=t.attr;(0,t.onChange)(e.target.getAttribute("value"),r),n.setState({expand:!1})},n.closeList=function(e){p.a.findDOMNode(n).contains(e.target)||n.state.expand&&n.setState({expand:!1})},n.handleClose=function(){n.setState({expand:!1})},n.state={expand:!1},n}return o(t,e),t.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.closeList)},t.prototype.componentDidUpdate=function(){var e=this.refs,t=e.input,n=e.list;if(this.state.expand){var r=t.getBoundingClientRect(),a=r.top,o=r.bottom,i=r.width,c=n.getBoundingClientRect(),s=c.height,u=window.innerHeight-10;this.props.shouldSetTop&&(n.style.top=o+"px"),o+1.25*s>u&&(n.style.transformOrigin="50% 100%",n.style.top="",n.style.bottom=window.innerHeight-a+"px"),n.style.minWidth=i+2+"px"}else setTimeout(function(){n.style.transformOrigin="",n.style.bottom=""},200)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.closeList)},t.prototype.render=function(){var e=this,t=this.props,n=t.attr,r=t.value,a=t.options,o=t.onChange,i=t.className,c=this.state.expand,s="string"==typeof a[r]?a[r]:r;return u.a.createElement("div",{type:"select",className:v("select",i,{show:c})},u.a.createElement("div",{ref:"input",className:v("default"),onClick:this.handleExpand},u.a.createElement("span",null,s),u.a.createElement(h.a,{type:"fa",name:"caret-down"})),u.a.createElement("ul",{ref:"list",className:v("options")},Object.keys(a).map(function(t,r){var i=a[t]||"";return"string"==typeof i?u.a.createElement("li",{key:t,className:v("option"),value:t,onClick:e.handleClick},a[t]):u.a.createElement(b,{key:t,attr:n,group:i,onChange:o,handleClose:e.handleClose})})))},t}(s.Component);t.a=g,g.propTypes={attr:c.a.string,value:c.a.oneOfType([c.a.number,c.a.string]),className:c.a.string,options:c.a.object,onChange:c.a.func,shouldSetTop:c.a.bool},g.defaultProps={value:"a",options:{a:"aaa",b:"bbb",c:"ccc"},shouldSetTop:!0};var b=function(e){function t(){var n,o,i;r(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=o=a(this,e.call.apply(e,[this].concat(s))),o.handleClick=function(e){var t=o.props,n=t.attr,r=t.onChange,a=t.handleClose;r(e.target.getAttribute("value"),n),a()},i=n,a(o,i)}return o(t,e),t.prototype.render=function(){var e=this,t=this.props.group,n=t.label,r=t.options;return u.a.createElement("li",{className:v("optgroup")},u.a.createElement("div",{className:v("group-title")},n),u.a.createElement("ul",null,Object.keys(r).map(function(t,n){return u.a.createElement("li",{key:n,value:t,className:v("option","sub-option"),onClick:e.handleClick},r[t])})))},t}(s.Component);b.propTypes={attr:c.a.string,group:c.a.object,onChange:c.a.func,handleClose:c.a.func}},PpmN:function(e,t,n){"use strict";function r(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function a(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:i.b.INIT}))throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+i.b.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.')})}function o(e){for(var t=Object.keys(e),n={},o=0;o<t.length;o++){var i=t[o];"function"==typeof e[i]&&(n[i]=e[i])}var c,s=Object.keys(n);try{a(n)}catch(e){c=e}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(c)throw c;for(var a=!1,o={},i=0;i<s.length;i++){var u=s[i],l=n[u],p=e[u],d=l(p,t);if(void 0===d){var f=r(u,t);throw new Error(f)}o[u]=d,a=a||d!==p}return a?o:e}}t.a=o;var i=n("DiHq");n("BIBl"),n("XgEi")},"Q+NL":function(e,t){function n(e){return e}e.exports=n},Q7kb:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("jPtm"),p=(n.n(l),n("5VFw")),d=(n.n(p),n("AxSz")),f=n("WCZ4"),h=n("F5gc"),m=n("4UJw"),y=n("e6k/"),v=n("mqQG");n.d(t,"a",function(){return v.a});var g=n("uuwI"),b=n.n(g),_=y.b.containers.ScreenPanel,w=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.togglePanel=o.togglePanel.bind(o),o.open=function(){o.props.dispatch({type:"reducer:previewpanel:open"})},o.close=function(){o.props.dispatch({type:"reducer:previewpanel:close"})},o}return o(t,e),t.prototype.componentDidMount=function(){this.props.dispatch({type:"entry:screen:start"}),p(this.refs.$root).tooltip({selector:'[data-toggle="tooltip"]',container:"body",trigger:"hover"})},t.prototype.componentDidUpdate=function(e){this.props.isOpen;e.isOpen!==this.props.isOpen&&this.adjustSimulatorPosition(this.props.isOpen)},t.prototype.adjustSimulatorPosition=function(e){var t=p("#simulator-container"),n=p("#simulator");if(!t.length)return!1;var r=e?223:0,a=t[0],o=e?p("#simulator-container").width()-223:p("#simulator-container").width()+223;a.style.right=r+"px";var i=p("#simulator").outerWidth(),c=Widget.additionalSize(i,0),s=c[1],u=void 0;i+s>o?(p("#simulator-wrapper").outerWidth(i+s),u=(i-o+s)/2):(p("#simulator-wrapper").css("width",""),s=o-i,u=0),p("#simulator-container").animate({scrollLeft:u}),n.animate({left:Math.round(s/2)})},t.prototype.togglePanel=function(e){this.props.isOpen?this.close():this.open()},t.prototype.handleShare=function(){MB.ga("send","event","feature","点击了分享按钮"),MB.mp("点击了分享按钮"),MB.renderSharing(MB.project()),p("#sharing-modal").modal()},t.prototype.render=function(){var e=this.props,t=e.project,n=e.projectName,r=e.deviceName,a=e.isOpen,o=e.dispatch,i=void 0,c=void 0;return a?(i=b.a.drawerOpen,c=b.a.togglerOpen):(i=b.a.drawerClose,c=b.a.togglerClose),u.a.createElement("div",{className:i+" mhide",ref:"$root"},u.a.createElement(m.a,{project:t,dispatch:o}),u.a.createElement("button",{className:c,onClick:this.togglePanel},u.a.createElement(f.a,{type:"fa",name:"angle-right",className:b.a.arrow})),u.a.createElement("div",{className:b.a.panel},u.a.createElement("div",{className:b.a.header},u.a.createElement("div",null,u.a.createElement("h1",{className:b.a.title,title:n},n),u.a.createElement("span",{className:b.a.desc},r)),u.a.createElement("button",{id:"switch-sharing",className:b.a.shareBtn,title:d.a.I18N.share,"data-toggle":"tooltip","data-placement":"left",onClick:this.handleShare},u.a.createElement(f.a,{type:"mb",name:"share",className:b.a.shareIcon}))),u.a.createElement("div",{className:b.a.isPanelItemOpen+" "+b.a.subPanel},u.a.createElement(_,null),u.a.createElement(h.a.LayerPanelItem,null)),u.a.createElement(h.a.CommentPanelItem,null)))},t}(u.a.Component);w.propTypes={project:c.a.object,projectName:c.a.string,deviceName:c.a.string,isOpen:c.a.bool,dispatch:c.a.func},w.defaultProps={isOpen:!0};var E={PreviewPanel:n.i(l.connect)(function(e){var t=e.model,n=t.current.projectCid,r=t.projects,a=r.find(function(e){return e.cid===n})||Template.find(n),o=a||{device:"",model:"",name:""},i=o.device,c=o.model,s=o.name;return{isOpen:e.container.previewpanel.isOpen,deviceName:i&&c?d.a.MB.DEVICES[i][c].name:"",project:a,projectName:s}})(w)};t.b={containers:E}},"QJ+7":function(e,t,n){function r(e){var t=e.length;return t?e[a(0,t-1)]:void 0}var a=n("Y0v8");e.exports=r},QxLr:function(e,t,n){"use strict";function r(e){var t,r,a,o,i,c,d,v,g,b,_,w,E;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(s.a)();case 2:if(t=e.sent,r=t.container.layers,a=r.resourceByScreen,o=r.visibilityScreenID,i=t.model,c=i.current.screenCid,d=i.screens,v=i.widgets,g=d.find(function(e){return e.cid===c}),a[o]&&!a[o].error){e.next=39;break}if(-1!==h.indexOf(o)){e.next=37;break}if(h.push(o),e.prev=8,b=void 0,!g.artboard_id){e.next=16;break}return e.next=13,n.i(s.b)(u.a,g.artboard_id);case 13:b=e.sent,e.next=17;break;case 16:b={artboard:{},layers:[]};case 17:return _=v.filter(function(e){return e.screen_cid===g.cid&&!["pg","lr","sticky"].includes(e.name)}),_=_.map(function(e){var t=void 0;switch(e.name){case"status_bar":t=0;break;case"keyboard":case"tab_bar":t=g.height-e.height;break;case"navigation_bar":var n=_.filter(function(e){return"status_bar"===e.name});t=n.length>0?n[0].height:0;break;default:t=e.top}return e.top=t,y(e)}),b.layers=_.concat(b.layers),b.layers=b.layers.filter(function(e){return!(e.left+e.width<0||e.left>g.width||e.top+e.height<0||e.top>g.height)}),b.screen=g,h.splice(h.indexOf(o),1),e.next=25,n.i(s.c)(n.i(l.e)(o,b));case 25:return w=m(b.layers),e.next=28,n.i(s.c)(n.i(p.a)(w.id));case 28:return e.next=30,n.i(s.c)(n.i(p.d)(g.cid));case 30:e.next=37;break;case 32:return e.prev=32,e.t0=e.catch(8),h.splice(h.indexOf(o),1),e.next=37,n.i(s.c)(n.i(l.f)(o,e.t0.message));case 37:e.next=44;break;case 39:return E=m(a[o].layers),e.next=42,n.i(s.c)(n.i(p.a)(E.id));case 42:return e.next=44,n.i(s.c)(n.i(p.d)(g.cid));case 44:case"end":return e.stop()}},f[0],this,[[8,32]])}function a(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(s.d)(l.b,r);case 2:case"end":return e.stop()}},f[1],this)}function o(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[a()];case 2:case"end":return e.stop()}},f[2],this)}t.a=o;var i=n("QJ+7"),c=n.n(i),s=n("x9ej"),u=n("4D9S"),l=n("bwGr"),p=n("SZh2"),d=n("yI57"),f=[r,a,o].map(regeneratorRuntime.mark),h=[],m=function(e){var t=e.filter(function(e){var t=e.top,n=e.left;return 0!==t&&0!==n});return 0===t.length?c()(e):c()(t)},y=function(e){var t={};return e.text&&(t.text_styles=[{font_size:e.fs,color:n.i(d.b)(e.tc),length:e.text.length}]),t.alignment=e.ha,t.line_height=e.lh,t.bd_radius=e.br,e.bg&&(t.bg_colors=[{value:e.bg}]),Object.assign({},e,t)}},R2q6:function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},RTb5:function(e,t,n){"use strict";function r(e){return function(t){return(0,a.bindActionCreators)(e,t)}}t.__esModule=!0,t.default=r;var a=n("9Tab")},Runu:function(e,t,n){function r(e,t){var n=this.__data__,r=a(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var a=n("oGRU");e.exports=r},SZh2:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return i});var r="SELECT_LAYER",a=function(e){return MB.ga("send","event","feature","点击了 Layer 元素"),MB.mp("击了 Layer 元素"),{type:r,payload:{layerID:e}}},o="ENTER_LAYER",i=function(e){return{type:o,payload:{layerID:e}}}},"Sde/":function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];switch(t.type){case"container:layers:clear":return!1;case"container:layer:set:active":return t.payload.isActive;default:return e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1",t=arguments[1];switch(t.type){case c.b:return t.payload.screenID;default:return e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,screen:{},layers:[],error:""},t=arguments[1];switch(t.type){case c.c:return Object.assign({},e,{isFetching:!1,screen:t.payload.screen,layers:[{type:"screen",name:t.payload.screen.name,top:0,left:0,width:t.payload.screen.width,height:t.payload.screen.height,id:t.payload.screen.cid,bg_colors:[{value:t.payload.screen.bgcolor}]}].concat(t.payload.layers),error:void 0});case c.d:return Object.assign({},e,{isFetching:!1,screen:{},layers:[],error:t.payload.error});default:return e}}function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,n=arguments[1];switch(n.type){case c.c:case c.d:return Object.assign({},t,(e={},e[n.payload.screenID]=o(t[n.payload],n),e));case"container:layers:clear":return s;default:return t}}var c=n("bwGr"),s={"-1":{isFetching:!1,screen:{},layers:[],error:""}},u={visibilityScreenID:a,resourceByScreen:i,isActive:r};t.a=u},SgXW:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e;return{getState:function(){return t},setState:function(e){return t=e},wrapEntry:function(e){return function(n,r){return e(t,n,r)}}}}function o(e,t){var n=t.getState,r=t.setState,a=n();return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,o=arguments[1];return o.type!==e?t:(r(i({},t,o.payload)),n())}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){r(this,e),this.store=null,this.entryMap={},this.middleware=this.middleware.bind(this),this.setEntry=this.setEntry.bind(this),this.setEntryMap=this.setEntryMap.bind(this)}return c(e,[{key:"middleware",value:function(e){var t=this;return this.store=e,function(e){return function(n){return!0===t.onAction(n)||e(n)}}}},{key:"setEntry",value:function(e,t){"string"==typeof e&&"function"==typeof t&&(this.entryMap[e],this.entryMap[e]=t)}},{key:"setEntryMap",value:function(e){var t=this;Object.keys(e).forEach(function(n){return t.setEntry(n,e[n])})}},{key:"onAction",value:function(e){if(this.store){var t=this.entryMap[e.type];return t&&t(this.store,e)}}}]),e}();t.ReduxEntry=s,t.createStateStore=a,t.createStateStoreReducer=o,t.default=s},T2oH:function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var a=n("R2q6"),o=n("lksT"),i=n("i4eZ"),c=n("lTej"),s=n("Runu");r.prototype.clear=a,r.prototype.delete=o,r.prototype.get=i,r.prototype.has=c,r.prototype.set=s,e.exports=r},"U/UK":function(e,t){function n(e){return e}e.exports=n},U6mC:function(e,t){e.exports={comment_panel_content_slide_panel:"_20WqXONFu6Z90Mrlyv8VKe",comment_panel_content_slide_panel_hide:"_21DRkIcP2LcR0ziyNx2plS",comment_thread:"_1uc9KkpGXFYi_9UeyhuFeQ",comment_thread_flex:"_16tG9Qg-v4TGCV5foG7u8L",comment_comment:"_3q3yTrDoR00Jd6qvnFo17d",comment_comment_clickable:"-zEWsYd_Rsil5oCfjP_gD",comment_comment_thread_initial:"_15uRHD6Vsf1KKHfxQPsXZ4",comment_comment_user_initial:"jyDitp6P41zgowyO9lIP9",comment_comment_appending:"_3LVt6nE22Cr20fut8GBAfW",comment_comment_thread_initial_focus:"_28F7t0PguZ9Ho2xkZ_DUe0",comment_comment_user_initial_focus:"_2iSVJ7TKOC6q3f4G4c0-fg",comment_comment_appending_focus:"YqL_DHCiw4tHZmm6o0zGp",comment_comment_upper:"_2JQOpBj-qW-ZI60hR1-xpv",comment_comment_content:"_2UfU7p7zkZDDkwazUH9cdt",comment_comment_lower:"_2CC0sC3FfmTT_SsUNSqial",comment_comment_content_folded:"_3xMMRB1b4yjrkCLGo56MNA",comment_marker:"_3NTIsPcVQKLVGp-zUMCsu5",comment_marker_locked:"_1aZH9zPCncp2wrFaiZwDJ_",comment_marker_focus:"_2oPmp43SfmlwR3gJX-T_K4",comment_marker_fade:"y92YS1rW49jltr9w1M69x",comment_marker_mini:"LYjZKcAGFzRjl9rCx2Aum",comment_marker_panel:"_3woV0U5VLtEZkqFUETFKTs",editable_span:"_3mQDV41ygv4tuxghzS7ivG",reply_textarea:"_3mZrHuufOmCwVt4CzCPvQe"}},UX5o:function(e,t){function n(e,t){for(;e&&e.nodeType!==r;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}var r=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}e.exports=n},UmB0:function(e,t){function n(){return!1}e.exports=n},UnHR:function(e,t,n){function r(e,t,n,r,o){var i=a.apply(this,arguments);return e.addEventListener(n,i,o),{destroy:function(){e.removeEventListener(n,i,o)}}}function a(e,t,n,r){return function(n){n.delegateTarget=o(n.target,t),n.delegateTarget&&r.call(e,n)}}var o=n("UX5o");e.exports=r},Up4y:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("Qza0"),p=n.n(l),d=n("aGI7"),f=n("P63K"),h=n("XDMB"),m=n("Y03C"),y=n.n(m),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.handleDocClick=function(e){var t=p.a.findDOMNode(n.$container);t&&!t.contains(e.target)&&n.close()},n.toggle=function(e){e.nativeEvent.stopImmediatePropagation(),n.state.show?n.close():n.open()},n.open=function(){return n.setState({show:!0})},n.close=function(){return n.setState({show:!1})},n.handleHighlight=function(e){var t=n.props,r=t.project,a=t.dispatch;MB.currentProject._highlight=e,a({type:"projects:update-local",payload:v({},r,{_highlight:e})})},n.handleUpdateShell=function(e){var t=n.props,r=t.project,a=t.dispatch;MB.currentProject._shell_type=e,a({type:"projects:update-local",payload:v({},r,{_shell_type:e})}),MB.currentProject&&MB.runner.reload(!0)},n.state={show:!1},n}return o(t,e),t.prototype.componentDidMount=function(){document.addEventListener("click",this.handleDocClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.handleDocClick)},t.prototype.render=function(){var e=this,t=this.state.show,n=this.props.project,r={device:I18N.device_shell,default:I18N.default_shell,none:I18N.none_shell},a=t?"active":"";return u.a.createElement("div",{className:y.a.root},u.a.createElement("a",{id:"PlaySettingsContainer",className:a,title:I18N.setting,onClick:this.toggle},u.a.createElement("span",{className:"icon icon-cog"})),t&&u.a.createElement(h.a,{className:y.a.container,ref:function(t){return e.$container=t}},u.a.createElement("div",{className:y.a.content},"web"!==n.device&&u.a.createElement(f.a,{className:y.a.select,value:n._shell_type,options:r,onChange:this.handleUpdateShell,shouldSetTop:!1}),u.a.createElement(d.a,{attr:"highlight",checked:n._highlight,label:I18N.highlight_clickable,onChange:this.handleHighlight})),u.a.createElement("i",{className:"fa fa-caret-down "+y.a.caret})))},t}(s.Component);g.propTypes={project:c.a.object,dispatch:c.a.func},t.a=g},"Uu+U":function(e,t,n){function r(e){return o(e)&&a(e)}var a=n("0VhX"),o=n("rGnh");e.exports=r},UyGE:function(e,t,n){"use strict";function r(e){"undefined"!=typeof console&&console.error;try{throw new Error(e)}catch(e){}}t.__esModule=!0,t.default=r},V1jg:function(e,t){function n(e){return a.call(e)}var r=Object.prototype,a=r.toString;e.exports=n},VES4:function(e,t){function n(e){return e}e.exports=n},VjYf:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t){var n={};for(var r in e)n[r]=t(e[r],r);return n},l=function(e,t){return t.forEach(function(t){e.has(t),e.add(t)}),e},p=function(e,t){return e instanceof Object&&t in e},d=function(e){return p(e,"toStructJSON")?e.toStructJSON():e},f=function(e,t){return e},h=function(){function e(t,n,r){i(this,e),this.name=t,this.struct=n,this.actMap=r,this.initialState=null,this.acceptNameSet=null,this.actionReducer=null,this.structReducer=null,this.reducer=null}return s(e,[{key:"getActionReducer",value:function(){var e=this.actMap;return function(t,n){var r=n.type,a=n.payload,o=e[r];return o?o(t,a):t}}},{key:"getReducer",value:function(){var e=this.name,t=this.initialState,n=this.acceptNameSet,r=this.actionReducer,a=this.structReducer,o=function(t,n){return void 0!==n.type&&n.name===e?r(t,n):a(t,n)};return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments[1];return n.has(a.name)?void 0!==a.batch&&a.name===e?a.batch.reduce(o,r):o(r,a):r}}},{key:"toStructJSON",value:function(){return d(this.struct)}}]),e}(),m=function(e){function t(e,n,r){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),c={},s=new Set;s.add(o.name);var u=[];for(var p in o.struct)if(o.struct.hasOwnProperty(p)){var d=o.struct[p],f=d instanceof h;c[p]=f?d.initialState:d,f&&(l(s,d.acceptNameSet),u.push(p))}return o.initialState=c,o.acceptNameSet=s,o.structReducer=t.getStructReducer(u,o.struct),o.actionReducer=o.getActionReducer(),o.reducer=o.getReducer(),o}return o(t,e),s(t,[{key:"toStructJSON",value:function(){return u(this.struct,d)}}],[{key:"getStructReducer",value:function(e,t){return function(n,r){for(var a=!1,o={},i=0;i<e.length;i++){var s=e[i],u=t[s],l=n[s],p=u.reducer(l,r);o[s]=p,a=a||p!==l}return a?c({},n,o):n}}}]),t}(h),y=function(e){function t(e,n,r){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),c=o.struct[0],s=c instanceof h,u=new Set;return u.add(o.name),o.initialState=[],o.acceptNameSet=u,o.structReducer=s?t.getStructReducer(c):f,o.actionReducer=o.getActionReducer(),o.reducer=o.getReducer(),o}return o(t,e),s(t,[{key:"toStructJSON",value:function(){return this.struct.map(d)}}],[{key:"getStructReducer",value:function(e){return function(n,a){function o(t,a,o){var s=e.reducer(t,a);t!==s&&(i||(c=[].concat(r(n))),c[o]=s,i=!0)}var i=!1,c=null;if(void 0!==a.index)o(n[a.index],a.payload,a.index);else if(void 0!==a.filter){var s=t.getFilter(a.filter);s&&n.forEach(function(e,t){return s(e,t)&&o(e,a.payload,t)})}return i?c:n}}},{key:"getFilter",value:function(e){switch(e.type){case"key-value":var t=e.key,n=e.value;return function(e,r){return e[t]===n}}return null}}]),t}(h);t.Scheme=h,t.ObjectScheme=m,t.ArrayScheme=y},W3Gc:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments[1],n=new Array(e),r=0,a=0,u=0,l=function(t){n[a]=t,a=(a+1)%e,r++},p=function(){if(0!=r){var t=n[u];return n[u]=null,r--,u=(u+1)%e,t}},d=function(){for(var e=[];r;)e.push(p());return e};return{isEmpty:function(){return 0==r},put:function(p){if(r<e)l(p);else{var f=void 0;switch(t){case i:throw new Error(o);case c:n[a]=p,a=(a+1)%e,u=a;break;case s:f=2*e,n=d(),r=n.length,a=n.length,u=0,n.length=f,e=f,l(p)}}},take:p,flush:d}}n.d(t,"a",function(){return l});var a=n("sZUI"),o="Channel's Buffer overflow!",i=1,c=3,s=4,u={isEmpty:a.j,put:a.k,take:a.k},l={none:function(){return u},fixed:function(e){return r(e,i)},dropping:function(e){return r(e,2)},sliding:function(e){return r(e,c)},expanding:function(e){return r(e,s)}}},WCZ4:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e){var t=e.name,n=void 0===t?"":t,a=e.type,o=void 0===a?"svg":a,i=e.className,c=void 0===i?"":i,p=r(e,["name","type","className"]),d="mb"===o?"icon":o;return n=n.replace(/^(icon|fa|md|ci|mb)\-/gi,""),"svg"===o?s.a.createElement("svg",u({className:"icon "+c},p),s.a.createElement("use",{xlinkHref:"/icons/sprite.svg?"+l+"#"+n})):s.a.createElement("span",u({className:"icon "+o+" "+d+"-"+n+" "+c},p),"md"===o&&n)}t.a=a;var o=n("Ebzz"),i=n.n(o),c=n("eBYd"),s=n.n(c),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l="v0.1.20";a.propTypes={name:i.a.string,type:i.a.string,className:i.a.string}},WwrI:function(e,t){e.exports={actions:"_13gNRjgLVmDXvSTpjML_VJ"}},XDMB:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("Qza0"),p=n.n(l),d=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.componentDidMount=function(){this.resize()},t.prototype.componentDidUpdate=function(){this.resize()},t.prototype.resize=function(){var e=p.a.findDOMNode(this);e.style.width="",e.style.height="";var t=e.getBoundingClientRect(),n=t.width,r=t.height;n=Math.round(n),r=Math.round(r),n%2!=0&&(n+=1),r%2!=0&&(r+=1),e.style.width=n+"px",e.style.height=r+"px"},t.prototype.render=function(){return u.a.createElement("div",this.props,this.props.children)},t}(s.Component);t.a=d,d.propTypes={children:c.a.oneOfType([c.a.element,c.a.array])}},XUGp:function(e,t){function n(){return!1}e.exports=n},XUrE:function(e,t,n){var r,a;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===a)for(var i in r)o.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}var o={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(r=[],void 0!==(a=function(){return n}.apply(t,r))&&(e.exports=a))}()},Xc71:function(e,t,n){"use strict";var r=n("SgXW"),a=(n.n(r),n("DZQR")),o=a.a.Screen,i=[],c=n.i(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:screens:update",payload:e(n,i,t)})})},d={"screens:refresh":p(o.refreshStateList,!1),"screens:add":p(o.addState,!1),"screens:add-local":p(o.addState,!0),"screens:update":p(o.updateState,!1),"screens:update-local":p(o.updateState,!0),"screens:delete":p(o.deleteState,!1),"screens:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},XgEi:function(e,t,n){"use strict"},Y03C:function(e,t){e.exports={root:"_1cXd0PWz-o6h5C7_2mfG1f",container:"_3sMVJYZRaWew8jG03sJ5pf",select:"m5jhFqzb0N22eSKk3gDcg",content:"_1dHUCRHAC8n16ShB_72FSD",caret:"_3GHHXkx4MmuFjM1r2GDQUp"}},Y0v8:function(e,t){function n(e,t){return e+r(a()*(t-e+1))}var r=Math.floor,a=Math.random;e.exports=n},Y7r3:function(e,t){e.exports={select:"_19hND8_zGSOgM376qVcFdq",default:"_1OdlEyHcjBo0te-woIc_Oq",options:"_14eZNNtPtiAqGldIusMbQx",option:"_2KDo9VcwGpqKoI8tMX-4an",show:"cmwkdFmNTxA6REmFpNEOI",optgroup:"_2vG7YLpSpcZPteVW92xxSp","group-title":"_2mA4v_EPNER0oepDd4u4rn","sub-option":"_16oJp3en4h7scXJY_RYBB7"}},YvpW:function(e,t,n){"use strict";function r(e,t){return function(){return t(e.apply(void 0,arguments))}}function a(e,t){if("function"==typeof e)return r(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),a={},o=0;o<n.length;o++){var i=n[o],c=e[i];"function"==typeof c&&(a[i]=r(c,t))}return a}t.a=a},ZCvY:function(e,t,n){"use strict";var r=n("SgXW"),a=(n.n(r),n("DZQR")),o=a.a.Comment,i=[],c=n.i(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:comments:update",payload:e(n,i,t)})})},d={"comments:refresh":p(o.refreshStateList,!1),"comments:add":p(o.addState,!1),"comments:add-local":p(o.addState,!0),"comments:update":p(o.updateState,!1),"comments:update-local":p(o.updateState,!0),"comments:delete":p(o.deleteState,!1),"comments:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},ZvJr:function(e,t,n){var r=n("yAvz"),a=r(Object.getPrototypeOf,Object);e.exports=a},a65c:function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},a8Au:function(e,t){e.exports={tree_link:"_3t2O62kMZ0rM99jFs8m6su",screen_panel_content:"B5lPezUHGATeLoX13c_I1",screen_item:"_3cYhnBAsKRr3vneLZsgQUL",screen_item_root:"_3o7HiqRYj-UhG-DbL4Cc2o",screen_item_sub:"_1ZrJ1q34-Z2rEzJSo6iWLs",screen_item_select:"_2LYK58V6qXr94OVlH-E6hV",screenIcon:"_2BpVIKIxQmqF6lIjI6Adc4",toggler:"_1dAxJ-8UEQmlLKZndRaNDR _2TAID7TnzAXoGA-jTBc04W",collapse:"c3HnMF2SaTjxTs_AzyGAx",groupToggler:"_3XIwwQG6nj8s7gCJgWifA4 _2TAID7TnzAXoGA-jTBc04W",separator:"_3meQFDOQ4JsBBmeM3Yd57s _1C9Y0JmisHriOVdLVpZ-5O",screen:"_3FAvE_Bknp3NsRm_V-KhTA",screenName:"_2sakUHH5jPeURNE2TFk-Yl",listHeader:"_1lc7EIJOgn6bi0KcF5dqrC",screenListHeader:"jdsCEhdMxk3SecloYV78d _2TAID7TnzAXoGA-jTBc04W",commentAddon:"_2Zah4Hg5eBx_e-xWTmubhe",commentIcon:"vFsSGwm-XVhJvttd50zWl",container:"_3vVuxB_Y7zouNkhD5gRQAy"}},aGI7:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("zwaY"),p=n.n(l),d=n("dr6V"),f=n.n(d),h=f.a.bind(p.a),m=function(e){function t(){var n,o,i;r(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=o=a(this,e.call.apply(e,[this].concat(s))),o.handleClick=function(e){var t=o.props,n=t.attr,r=t.checked;(0,t.onChange)(!r,n)},i=n,a(o,i)}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.checked,n=e.label,r=e.disabled;return u.a.createElement("div",{className:h("checkbox",{disabled:r}),onClick:!r&&this.handleClick},u.a.createElement("div",{className:h("checker",{checked:t})}),u.a.createElement("label",{htmlFor:""},n))},t}(s.PureComponent);t.a=m,m.propTypes={label:c.a.string,attr:c.a.string,checked:c.a.bool,disabled:c.a.bool,onChange:c.a.func}},bBrr:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=!1},bEHS:function(e,t,n){function r(e){return"function"!=typeof e.constructor||i(e)?{}:a(o(e))}var a=n("yqaE"),o=n("ZvJr"),i=n("UmB0");e.exports=r},bkiC:function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){a.off(e,r),t.apply(n,arguments)}var a=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,a=n.length;for(r;r<a;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],a=[];if(r&&t)for(var o=0,i=r.length;o<i;o++)r[o].fn!==t&&r[o].fn._!==t&&a.push(r[o]);return a.length?n[e]=a:delete n[e],this}},e.exports=n},bwGr:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"e",function(){return c}),n.d(t,"d",function(){return s}),n.d(t,"f",function(){return u});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="SET_VISIBILITY_SCREEN",o=function(e){return{type:a,payload:{screenID:e}}},i="RECEIVE_RESOURCE_SUCCESS",c=function(e,t){return{type:i,payload:r({screenID:e},t)}},s="RECEIVE_RESOURCE_ERROR",u=function(e,t){return{type:s,payload:{screenID:e,error:t}}}},c0vO:function(e,t){e.exports={invisible:"_2obQAuYouvcCX7KZPAdXKP",caret:"_2K2T_tDMlFMTMYsXnpslBL _2TAID7TnzAXoGA-jTBc04W",caretDown:"_2AdxWSKcQ-wdwL2i6UDTuT _2K2T_tDMlFMTMYsXnpslBL _2TAID7TnzAXoGA-jTBc04W",caretUp:"bDDMUFOVaQP5HA6uL5xBj _2AdxWSKcQ-wdwL2i6UDTuT _2K2T_tDMlFMTMYsXnpslBL _2TAID7TnzAXoGA-jTBc04W",caretRight:"kgyoiWT4Cs0jF2rge6XWC _2AdxWSKcQ-wdwL2i6UDTuT _2K2T_tDMlFMTMYsXnpslBL _2TAID7TnzAXoGA-jTBc04W",caretLeft:"_2WkrLk20zM3zlC_czURnS- _2AdxWSKcQ-wdwL2i6UDTuT _2K2T_tDMlFMTMYsXnpslBL _2TAID7TnzAXoGA-jTBc04W","l-flexVertical":"QfGUsu8TGG0NOhOOBP7vo","l-spaceBetween":"_2fTL9fFMt1j6Oduebc0Nr6",row:"_24eICuam98EjaIPLs81oOb _2fTL9fFMt1j6Oduebc0Nr6",separator:"_1C9Y0JmisHriOVdLVpZ-5O",content:"_39KyIYyKwXyRAGQ2XWt0Bm",preview_panel_popup:"NcyUy-A2CjwYFSeMa-XDm",preview_panel_content:"SkcA-GzbmtN-JxiNGczES",preview_panel_upper:"_3lQYkZvvUskm9bAeV3tuMH",preview_panel_empty:"_1uGMGcUcQ5p3gX9ZNQe66A"}},d04f:function(e,t){e.exports={switch:"_1LM6f7H7J3EIquLJtpHQmC",switchOff:"_2tJGjG9fwrKpJqLyfWv8GH _1LM6f7H7J3EIquLJtpHQmC",switchOn:"_1FVJFsajFlykKLPb2IN3I_ _1LM6f7H7J3EIquLJtpHQmC",inner:"_3QV8d0uOpbku0FEX9_pKT7",innerOff:"_2ZUvjE1qn1qTVaVRBTPNlU _3QV8d0uOpbku0FEX9_pKT7",innerOn:"_2ijFBxI3sChrMU6LGrXV6Y _3QV8d0uOpbku0FEX9_pKT7",icon:"_1NL5w37tiiLLzGa1DnO8Yr"}},dr6V:function(e,t,n){var r,a;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(this&&this[r]||r);else if(Array.isArray(r))e.push(n.apply(this,r));else if("object"===a)for(var i in r)o.call(r,i)&&r[i]&&e.push(this&&this[i]||i)}}return e.join(" ")}var o={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(r=[],void 0!==(a=function(){return n}.apply(t,r))&&(e.exports=a))}()},dspo:function(e,t){function n(e){return function(t,n,r){for(var a=-1,o=Object(t),i=r(t),c=i.length;c--;){var s=i[e?c:++a];if(!1===n(o[s],s,o))break}return t}}e.exports=n},"e+M6":function(e,t,n){var r,a,o;!function(i,c){a=[e,n("r2k+")],r=c,void 0!==(o="function"==typeof r?r.apply(t,a):r)&&(e.exports=o)}(0,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(e){return e&&e.__esModule?e:{default:e}}(t),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.resolveOptions(t),this.initSelection()}return o(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":a(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=i})},"e6k/":function(e,t,n){"use strict";var r=n("jPtm"),a=(n.n(r),n("GATT")),o=n("zjN7");n.d(t,"a",function(){return a.a});var i={ScreenPanel:n.i(r.connect)(function(e){return{screensState:e.model.screens,commentThreadsState:e.model.commentThreads,userState:e.model.user,currentState:e.model.current,screenContainer:e.container.screen,layersContainer:e.container.layers,commentContainer:e.container.comment}})(o.a)};t.b={reducers:a.a,containers:i}},eDUU:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("pUeM"),p=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.handleShare=function(){n.setState({activeTab:"share"})},n.handleEmbed=function(){n.props.app.download(function(){n.setState({activeTab:"embed"})})},n.handleSelect=function(e){$(e.target).select()},n.handleRefresh=function(e){if(e.preventDefault(),confirm(I18N.refresh_token_confirmation)){var t=Math.uuid(31);n.setAttr("access_token",t)}},n.handleHighlight=function(e){n.setAttr("highlight",e.target.checked)},n.handleUpdateShell=function(e){var t=n.props.app;t.shell_type=e.target.value,t.lsave(MB.user.id===t.owner_id),$("body").trigger("queue:save"),MB.currentProject&&MB.runner.reload(!0)},n.handleWechat=function(e){n.setAttr("wechat",e.target.checked)},n.handlePasswordChange=function(e){n.setAttr("password",e.target.value)},n.handlePrivate=function(){n.setAttr("access","private")},n.handleRestricted=function(){return MB.mp("选择了白名单模式"),n.props.app.password="",n.setAttr("access","restricted")},n.handleCollaborators=function(e){var t,r,a;e.preventDefault(),$("#sharing-modal").modal("hide"),MB.mp("点击了分享窗口的协作者管理按钮"),t=n.props.app,t.team_cid&&(a=Team.find(t.team_cid)),r=a||t,MB.renderCollaboratorsModal(r),$("#collaborators-modal").modal()},n.handleSlackWebHook=function(e){n.setAttr("slack_web_hook_url",e.target.value)},n.state={activeTab:"share"},n}return o(t,e),t.prototype.generateQrcode=function(){$(this.refs.qrcode).qrcode({text:this.qrurl+"?via=qrcode",width:150,height:150})},t.prototype.componentDidMount=function(){this.generateQrcode(),$(this.refs.select).niceSelect(),$(this.refs.select).on("change",this.handleUpdateShell)},t.prototype.refreshQrcode=function(){$(this.refs.qrcode).empty(),this.generateQrcode()},t.prototype.setAttr=function(e,t){this.props.app[e]=t,this.props.app.lsave(),$("body").trigger("queue:save"),this.forceUpdate()},t.prototype.render=function(){var e=this.props.app,t=void 0,n=void 0;this.qrurl=t="https://"+location.host+"/app/"+e.access_token,n="https://"+location.host,MB.isLocal()&&"file:"!==location.protocol&&(this.qrurl=t=location.toString());var r=window,a=r.MBServer;"file:"===location.protocol&&(n="https://"+a,this.qrurl=t="https://"+a+"/app/"+e.access_token),this.refreshQrcode();var o=/edge.modao.cc/.test(location.href)?null:"none",i='<iframe src="'+n+"/app/"+e.access_token+'/embed" width="'+(e.shell().width+80)+'" height="'+(e.shell().height+80)+'" allowTransparency="true" frameborder="0"></iframe>',c=!/^\/app/.test(location.pathname),s=e.owner_id===MB.user.id,p=s||e.canAdmin(),d=s||e.canEdit();return u.a.createElement("div",{className:"modal-dialog form-horizontal"},u.a.createElement("div",{className:"modal-content"},u.a.createElement("div",{className:"modal-header tabs"},u.a.createElement("ul",null,u.a.createElement("li",{className:"share"===this.state.activeTab?"active":null,onClick:this.handleShare},I18N.sharing_app),u.a.createElement("li",{className:"embed"===this.state.activeTab?"active":null,onClick:this.handleEmbed},I18N.embed_app)),u.a.createElement("a",{href:"#",className:"close","data-dismiss":"modal"},"×")),u.a.createElement("div",{className:"modal-body"},u.a.createElement("div",{id:"sharing-container"},u.a.createElement("div",{className:"qrcode",ref:"qrcode",style:{display:MB.shouldDisplay("share"===this.state.activeTab)}}),u.a.createElement("div",{className:"form-group",style:{display:MB.shouldDisplay("share"===this.state.activeTab)}},u.a.createElement("div",{className:"input-group"},u.a.createElement("input",{type:"text",className:"form-control",value:t||"",readOnly:!0,onClick:this.handleSelect,style:{cursor:"text",borderRightWidth:p?0:1}}),u.a.createElement("span",{className:"input-group-btn",style:{display:MB.shouldDisplay(p)}},u.a.createElement("button",{className:"btn btn-default",type:"button",onClick:this.handleRefresh},I18N.regenerate)))),u.a.createElement("div",{className:"form-group",style:{display:MB.shouldDisplay("embed"===this.state.activeTab)}},u.a.createElement("p",{style:{margin:"20px 0"}},I18N.embed_tips),u.a.createElement("textarea",{className:"form-control",onClick:this.handleSelect,value:i,readOnly:!0})),c?u.a.createElement(l.a,{value:I18N.permission}):null,c?u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{className:"control-label col-sm-3",style:{marginTop:3}},I18N.access_permission),u.a.createElement("div",{className:"col-sm-9"},u.a.createElement("p",null,u.a.createElement("label",{className:"radio-inline"},u.a.createElement("input",{className:"mb-radio",id:"restricted",disabled:!p,type:"radio",name:"access",value:"restricted",checked:"restricted"===e.access,onChange:this.handleRestricted}),u.a.createElement("label",{htmlFor:"restricted"}),u.a.createElement("span",null,I18N.restricted_intro),p&&"restricted"===e.access?u.a.createElement("a",{href:"#",onClick:this.handleCollaborators},I18N.manage_collaborators):null)),u.a.createElement("p",null,u.a.createElement("label",{className:"radio-inline"},u.a.createElement("input",{className:"mb-radio",id:"private",disabled:!p,type:"radio",name:"access",value:"private",checked:"private"===e.access,onChange:this.handlePrivate}),u.a.createElement("label",{htmlFor:"private"}),u.a.createElement("span",null,I18N.private_intro))),u.a.createElement("p",{style:{display:MB.shouldDisplay("private"===e.access&&MB.user.limitation.encryptable)}},u.a.createElement("input",{type:"text",name:"password",className:"form-control password",placeholder:I18N.sharing_password,value:e.password||"",onChange:this.handlePasswordChange,readOnly:!p})),u.a.createElement("p",{style:{display:MB.shouldDisplay("private"===e.access&&!MB.user.limitation.encryptable)}},u.a.createElement("a",{href:"/account#plan-card"},I18N.password_protection)))):null,d?u.a.createElement(l.a,{value:I18N.other_settings}):null,u.a.createElement("div",{className:"form-group"},d&&"web"!==e.device?u.a.createElement("label",{className:"control-label col-sm-3"},I18N.default_shell_field):null,d&&"web"!==e.device?u.a.createElement("div",{className:"col-sm-6"},u.a.createElement("select",{ref:"select",className:"form-control",defaultValue:e.shell_type,onChange:this.handleUpdateShell},u.a.createElement("option",{value:"device"},I18N.device_shell),u.a.createElement("option",{value:"default"},I18N.default_shell),u.a.createElement("option",{value:"none"},I18N.none_shell))):null),p&&u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{className:"control-label col-sm-3",style:{marginTop:3}},I18N.preview_settings),u.a.createElement("div",{className:"col-sm-9"},u.a.createElement("p",null,u.a.createElement("label",{className:"checkbox"},u.a.createElement("input",{className:"mb-checkbox",type:"checkbox",id:"highlight",checked:e.highlight,onChange:this.handleHighlight}),u.a.createElement("label",{htmlFor:"highlight"}),u.a.createElement("span",null,I18N.highlight_clickable))),u.a.createElement("p",null,u.a.createElement("label",{className:"checkbox"},u.a.createElement("input",{className:"mb-checkbox",type:"checkbox",id:"wechat",checked:e.wechat,onChange:this.handleWechat}),u.a.createElement("label",{htmlFor:"wechat"}),u.a.createElement("span",null,I18N.view_in_browser))))),u.a.createElement("h4",{style:{display:o}},"Slack web hook"),u.a.createElement("div",{className:"input-group",style:{display:o}},u.a.createElement("input",{type:"text",className:"form-control",value:e.slack_web_hook_url||"",onBlur:this.handleSlackWebHook}))))))},t}(s.Component);t.a=p,p.propTypes={app:c.a.object}},emDC:function(e,t,n){var r=n("Gf/N"),a=r("round");e.exports=a},f1gS:function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!a.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}t.__esModule=!0,t.default=r},f8j7:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&n.i(f.b)(arguments[0],f.c.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),f.c.pattern(e))return I(v,{pattern:e});if(f.c.channel(e))return I(v,{channel:e});throw new Error("take(patternOrChannel): argument "+String(e)+" is not valid channel or a valid pattern")}function o(e,t){return arguments.length>1?(n.i(f.b)(e,f.c.notUndef,"put(channel, action): argument channel is undefined"),n.i(f.b)(e,f.c.channel,"put(channel, action): argument "+e+" is not a valid channel"),n.i(f.b)(t,f.c.notUndef,"put(channel, action): argument action is undefined")):(n.i(f.b)(e,f.c.notUndef,"put(action): argument action is undefined"),t=e,e=null),I(g,{channel:e,action:t})}function i(e,t,r){n.i(f.b)(t,f.c.notUndef,e+": argument fn is undefined");var a=null;if(f.c.array(t)){var o=t,i=m(o,2);a=i[0],t=i[1]}else if(t.fn){var c=t;a=c.context,t=c.fn}return n.i(f.b)(t,f.c.func,e+": argument "+t+" is not a function"),{context:a,fn:t,args:r}}function c(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return I(_,i("call",e,n))}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return I(E,i("fork",e,n))}function u(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1)return t.map(function(e){return u(e)});var a=t[0];return 1===t.length&&(n.i(f.b)(a,f.c.notUndef,"cancel(task): argument task is undefined"),n.i(f.b)(a,f.c.task,"cancel(task): argument "+a+" is not a valid Task object "+N)),I(C,a||f.e)}function l(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return 0===arguments.length?e=f.f:(n.i(f.b)(e,f.c.notUndef,"select(selector,[...]): argument selector is undefined"),n.i(f.b)(e,f.c.func,"select(selector,[...]): argument "+e+" is not a function")),I(x,{selector:e,args:r})}function p(e,t){return n.i(f.b)(e,f.c.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&(n.i(f.b)(t,f.c.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),n.i(f.b)(t,f.c.buffer,"actionChannel(pattern, buffer): argument "+t+" is not a valid buffer")),I(M,{pattern:e,buffer:t})}function d(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return s.apply(void 0,[h.a,e,t].concat(r))}t.e=a,t.a=o,t.b=c,t.f=s,t.g=u,t.c=l,t.h=p,t.d=d,n.d(t,"i",function(){return L});var f=n("sZUI"),h=n("gwOC"),m=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=n.i(f.a)("IO"),v="TAKE",g="PUT",b="RACE",_="CALL",w="CPS",E="FORK",S="JOIN",C="CANCEL",x="SELECT",M="ACTION_CHANNEL",j="CANCELLED",O="FLUSH",T="GET_CONTEXT",k="SET_CONTEXT",N="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",P=function(e,t){return e+" has been deprecated in favor of "+t+", please update your code"},I=function(e,t){var n;return n={},r(n,y,!0),r(n,e,t),n};a.maybe=function(){var e=a.apply(void 0,arguments);return e[v].maybe=!0,e};n.i(f.d)(a.maybe,P("takem","take.maybe"));o.resolve=function(){var e=o.apply(void 0,arguments);return e[g].resolve=!0,e},o.sync=n.i(f.d)(o.resolve,P("put.sync","put.resolve"));var A=function(e){return function(t){return t&&t[y]&&t[e]}},L={take:A(v),put:A(g),race:A(b),call:A(_),cps:A(w),fork:A(E),join:A(S),cancel:A(C),select:A(x),actionChannel:A(M),cancelled:A(j),flush:A(O),getContext:A(T),setContext:A(k)}},fGds:function(e,t,n){"use strict";var r=n("mUHn"),a=n("fJMU"),o=n("SZh2"),i=n("pVhB");n.n(i);t.a={actions:{selectLayer:o.a},container:r.a,reducer:a.a}},fHoG:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){e.preventDefault(),e.stopPropagation()}function c(e){for(var t={top:0,left:0};e;)t.top+=e.offsetTop-e.scrollTop,t.left+=e.offsetLeft-e.scrollLeft,e=e.offsetParent;return t}function s(e,t){var n=e.getBoundingClientRect();return n.left<=t.clientX&&n.top<=t.clientY&&n.left+n.width>=t.clientX&&n.top+n.height>=t.clientY}function u(e,t){var n=e.getBoundingClientRect();return{x:Math.min(Math.max(t.clientX,n.left+S),n.left+n.width-S)-t.clientX,y:Math.min(Math.max(t.clientY,n.top+S),n.top+n.height-S)-t.clientY}}function l(e,t){var n=.01*m.a.SpineModel.getScreenScale(),r=e.top*n-t.top,a=e.left*n-t.left;return r*r+a*a>225}n.d(t,"a",function(){return w});var p=n("Ebzz"),d=n.n(p),f=n("eBYd"),h=n.n(f),m=n("AxSz"),y=n("A1sh"),v=n("orxR"),g=n("U6mC"),b=n.n(g),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.addEventListener=function(e){for(var t in e)o.props.containerElement.addEventListener(t,e[t])},o.removeEventListener=function(e){for(var t in e)o.props.containerElement.removeEventListener(t,e[t])},o.getMarkerPosition=function(e){var t=u(o.props.rangeElement,e),n=c(o.referenceElement);return{left:e.pageX-n.left+t.x,top:e.pageY-n.top+t.y}},o.addMarkerListener=function(e,t){s(o.props.rangeElement,e)&&(i(e),o.props.dispatch({type:"entry:comment-threads:add",payload:o.getMarkerPosition(e,t)}))},o.hasListener=!1,o.setupEventListener=function(e){var t=o.props.commentContainer.isActive&&v.a[o.props.currentState.userRole];o.hasListener!==t&&(t?o.props.containerElement.addEventListener("dblclick",function(t){return o.addMarkerListener(t,e)}):o.props.containerElement.removeEventListener("dblclick",function(t){return o.addMarkerListener(t,e)}),o.hasListener=t)},o}return o(t,e),t.prototype.componentDidMount=function(){var e=this;this.setupEventListener(document.querySelector(".pcanvas.active .scontainer")),MB.forceRenderCommentMarkerPanel=function(){e.forceUpdate()}},t.prototype.componentDidUpdate=function(){this.referenceElement=document.querySelector(".pcanvas.active .scontainer"),this.setupEventListener(this.referenceElement)},t.prototype.render=function(){var e=this;if(!this.props.commentContainer.isActive)return null;var t=this.props,r=t.commentContainer,a=t.commentThreadsState,o=t.userState,i=t.currentState,c=i.screenCid,s=i.userRole,u=t.dispatch,l=t.scale,p=a.filter(function(e){return e.screen_cid===c});return h.a.createElement("div",{className:b.a.comment_marker_panel},p.map(function(t,a){return h.a.createElement(E,{key:t.cid,commentThread:t,commentMarkerIndex:a+1,commentContainer:r,isEditable:n.i(v.b)(s,o.id,t.user_id).update,addEventListener:e.addEventListener,removeEventListener:e.removeEventListener,getMarkerPosition:e.getMarkerPosition,dispatch:u,scale:l})}))},t}(h.a.PureComponent);w.propTypes={containerElement:d.a.object,rangeElement:d.a.object,commentContainer:d.a.object,commentThreadsState:d.a.array,userState:d.a.object,currentState:d.a.object,dispatch:d.a.func,scale:d.a.number};var E=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n)),c={mousemove:function(e){i(e);var t=o.props.getMarkerPosition(e);(o.state.isDragging||l(o.props.commentThread,t))&&o.setState({isDragging:!0,position:t})},mouseup:function(e){if(i(e),u(),o.state.isDragging){var t=o.props,n=t.getMarkerPosition,r=t.dispatch,a=n(e),c=a.left,s=a.top;r({type:"entry:comment-threads:update",payload:_({},o.props.commentThread,{left:c,top:s})})}else setTimeout(o.toggleSelect,0);o.setState({isDragging:!1,position:{left:0,top:0}})},mouseleave:function(){u(),o.toggleFocus(!1),o.setState({isDragging:!1,position:{left:0,top:0}})},mousedown:i,mouseout:i,click:i,dblclick:i},s={mouseup:c.mouseup,mousedown:i,mousemove:i,mouseleave:i,mouseout:i,click:i,dblclick:i},u=function(){return o.props.removeEventListener(c)};return o.toggleFocus=function(e){var t=o.props,n=t.commentThread;(0,t.dispatch)({type:"container:comment:focus",payload:{focus:e?n.cid:null}})},o.toggleSelect=function(){var e=o.props,t=e.commentContainer,n=e.commentThread;(0,e.dispatch)({type:"container:comment:select",payload:{select:t.select===n.cid?null:n.cid}})},o.onMouseDown=function(e){i(e),o.props.addEventListener(o.props.isEditable?c:s)},o.onMouseEnter=function(e){i(e),o.toggleFocus(!0)},o.onMouseLeave=function(e){i(e),o.toggleFocus(!1)},o.state={isDragging:!1,position:{left:0,top:0}},o}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.commentThread,n=e.commentMarkerIndex,r=e.commentContainer,a=e.isEditable,o=e.dispatch,c=e.scale,s=this.state,u=s.isDragging,l=s.position,p=u?l:{left:t.left*c,top:t.top*c},d=r.select===t.cid,f=r.focus===t.cid,m=r.select&&!d||r.focus&&!f;return h.a.createElement(y.a,{index:n,isFocus:f||d,isFade:m,isEditable:a,divAttributes:{style:p},spanAttributes:{onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseUp:i,onDoubleClick:i,onClick:i},focusType:"external",dispatch:o})},t}(h.a.PureComponent);E.propTypes={commentThread:d.a.object,commentMarkerIndex:d.a.number,commentContainer:d.a.object,addEventListener:d.a.func,removeEventListener:d.a.func,getMarkerPosition:d.a.func,isEditable:d.a.bool,dispatch:d.a.func,scale:d.a.number};var S=20},fJMU:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments[1];switch(t.type){case o.b:return t.payload.layerID===e?-1:t.payload.layerID;case i.b:return-1;default:return e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments[1];switch(t.type){case o.c:return t.payload.layerID;default:return e}}var o=n("SZh2"),i=n("bwGr"),c={activeLayerID:r,enteredLayerID:a};t.a=c},gwOC:function(e,t,n){"use strict";function r(e,t){function r(t,n){if(i===h)return f;if(n)throw i=h,n;o&&o(t);var r=e[i](),a=d(r,3),c=a[0],s=a[1],u=a[2];return i=c,o=u,i===h?f:s}var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",o=void 0,i=t;return n.i(u.h)(r,function(e){return r(null,e)},a,!0)}function a(e){return u.c.channel(e)?"channel":Array.isArray(e)?String(e.map(function(e){return String(e)})):String(e)}function o(e,t){for(var o=arguments.length,i=Array(o>2?o-2:0),c=2;c<o;c++)i[c-2]=arguments[c];var u={done:!1,value:n.i(l.e)(e)},p=function(e){return{done:!1,value:l.f.apply(void 0,[t].concat(i,[e]))}},d=void 0,f=function(e){return d=e};return r({q1:function(){return["q2",u,f]},q2:function(){return d===s.a?[h]:["q1",p(d)]}},"q1","takeEvery("+a(e)+", "+t.name+")")}function i(e,t){for(var o=arguments.length,i=Array(o>2?o-2:0),c=2;c<o;c++)i[c-2]=arguments[c];var u={done:!1,value:n.i(l.e)(e)},p=function(e){return{done:!1,value:l.f.apply(void 0,[t].concat(i,[e]))}},d=function(e){return{done:!1,value:n.i(l.g)(e)}},f=void 0,m=void 0,y=function(e){return f=e},v=function(e){return m=e};return r({q1:function(){return["q2",u,v]},q2:function(){return m===s.a?[h]:f?["q3",d(f)]:["q1",p(m),y]},q3:function(){return["q1",p(m),y]}},"q1","takeLatest("+a(e)+", "+t.name+")")}function c(e,t,o){for(var i=arguments.length,c=Array(i>3?i-3:0),d=3;d<i;d++)c[d-3]=arguments[d];var f=void 0,m=void 0,y={done:!1,value:n.i(l.h)(t,p.a.sliding(1))},v=function(){return{done:!1,value:n.i(l.e)(m)}},g=function(e){return{done:!1,value:l.f.apply(void 0,[o].concat(c,[e]))}},b={done:!1,value:n.i(l.b)(u.i,e)},_=function(e){return f=e},w=function(e){return m=e};return r({q1:function(){return["q2",y,w]},q2:function(){return["q3",v(),_]},q3:function(){return f===s.a?[h]:["q4",g(f)]},q4:function(){return["q2",b]}},"q1","throttle("+a(t)+", "+o.name+")")}t.a=o,t.b=i,t.c=c;var s=n("EX8i"),u=n("sZUI"),l=n("f8j7"),p=n("W3Gc"),d=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f={done:!0,value:void 0},h={},m=function(e){return"import "+e+" from 'redux-saga' has been deprecated in favor of import "+e+" from 'redux-saga/effects'.\nThe latter will not work with yield*, as helper effects are wrapped automatically for you in fork effect.\nTherefore yield "+e+" will return task descriptor to your saga and execute next lines of code."};n.i(u.d)(o,m("takeEvery")),n.i(u.d)(i,m("takeLatest")),n.i(u.d)(c,m("throttle"))},i4eZ:function(e,t,n){function r(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]}var a=n("oGRU");e.exports=r},iUwf:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){return(new Date).getTime()},o=function(){function e(){r(this,e),this.mouseState={down:!1,moved:!1},this.scrollState={x:null,y:null,left:null,top:null,target:null},this.windowState={blur:!1},this.coolDownTime=a(),this.coolDownInterval=200}return e.prototype.isCoolDown=function(){var e=a()-this.coolDownTime;return this.coolDownTime+=e,e>this.coolDownInterval},e.prototype.resetCoolDown=function(){this.coolDownTime-=this.coolDownInterval},e.prototype.bind=function(e){var t=this,n=e.onScreenFocus;window.addEventListener("blur",function(){t.windowState.blur=!0}),window.addEventListener("focus",function(){t.windowState.blur&&(t.windowState.blur=!1,n())})},e.prototype.bindMobile=function(e){var t=this,n=e.onOrientationChange;window.addEventListener(void 0!==window.onorientationchange?"orientationchange":"resize",n),$("body").on("touchstart",".pcanvas",function(){t.mouseState.down=!0,t.mouseState.moved=!1}).on("touchmove",".pcanvas",function(){t.mouseState.down&&(t.mouseState.moved=!0)}).on("touchend",function(){t.mouseState.down=!1})},e.prototype.bindDesktop=function(e){var t=this,n=e.onAppMouseDown,r=e.onAppMouseMove;$("body").on("mousedown","#simulator-container",function(e){if(n(e,t.scrollState,t.mouseState))return!0;t.mouseState.down=!0,t.mouseState.moved=!1,t.scrollState.x=e.clientX,t.scrollState.y=e.clientY}).on("mousemove","#simulator-container",function(e){if(r(e,t.scrollState,t.mouseState))return!0;t.mouseState.moved=!0}),window.addEventListener("mouseup",function(){t.mouseState.down=!1})},e}();t.a=o},ieLl:function(e,t,n){"use strict";function r(e){return JSON.parse(l.a.Storage.getItem(e+"_commentTick")||"{}")}function a(e,t){l.a.Storage.setItem(e+"_commentTick",JSON.stringify(t))}function o(e,t){var n=r(e);n[t]=Math.ceil(.001*Date.now()+2),a(e,n)}function i(){for(var e=.001*Date.now()-2592e3,t=[],n=0,r=l.a.Storage.length;n<r;n++){(function(n,r){var a=l.a.Storage.key(n);if(!a.endsWith("_commentTick"))return"continue";var o=JSON.parse(l.a.Storage.getItem(a)||"{}"),i=Object.keys(o);i.forEach(function(t){o[t]<=e&&delete o[t]});var c=Object.keys(o);0===c.length?t.push(a):i.length!==c.length&&l.a.Storage.setItem(a,JSON.stringify(o))})(n)}t.forEach(function(e){return l.a.Storage.removeItem(e)})}function c(e,t,n){0!==n&&(e[t]=(e[t]||0)+n)}var s=n("SgXW"),u=(n.n(s),n("Ejk5")),l=(n.n(u),n("AxSz")),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d={projectCid:null,unreadCommentMap:{},unreadCountThreadMap:{},unreadCountScreenMap:{}},f=n.i(s.createStateStore)(d),h=f.getState,m=f.setState,y=f.wrapEntry,v={"unread-comment:init-for-project":y(function(e,t,n){var o=t.dispatch,s=n.payload,u=s.currentState,l=u.projectCid,f=u.userRole,h=s.commentThreadList,m=s.commentList;if("guest"===f)return o({type:"reducer:unread-comment:update",payload:p({},d,{projectCid:l})});var y=r(l),v={},g={};h.forEach(function(e){var t=e.cid,n=e.screen_cid;g[t]=n,v[n]=y[n]});var b={},_={},w={};m.forEach(function(e){var t=e.cid,n=e.thread_cid,r=e.updated_at;(v[g[n]]||0)>=r||(b[t]=!0,c(_,n,1))}),h.forEach(function(e){var t=e.cid,n=e.screen_cid;return c(w,n,_[t]||0)}),a(l,v),i(),o({type:"reducer:unread-comment:update",payload:{projectCid:l,unreadCommentMap:b,unreadCountThreadMap:_,unreadCountScreenMap:w}})}),"unread-comment:set-unread":y(function(e,t,n){var r=t.dispatch,a=n.payload,i=a.commentCid,c=a.threadCid,s=a.screenCid,l=e.unreadCommentMap,p=e.unreadCountThreadMap,d=e.unreadCountScreenMap;l[i]||(r({type:"reducer:unread-comment:update",payload:u.Operation.objectMerge(e,{unreadCommentMap:u.Operation.objectSet(l,i,!0),unreadCountThreadMap:u.Operation.objectSet(p,c,(p[c]||0)+1),unreadCountScreenMap:u.Operation.objectSet(d,s,(d[s]||0)+1)})}),o(e.projectCid,s))}),"unread-comment:set-read":y(function(e,t,n){var r=t.dispatch,a=n.payload,i=a.commentCid,c=a.threadCid,s=a.screenCid,l=e.unreadCommentMap,p=e.unreadCountThreadMap,d=e.unreadCountScreenMap;l[i]&&(r({type:"reducer:unread-comment:update",payload:u.Operation.objectMerge(e,{unreadCommentMap:u.Operation.objectDelete(l,i),unreadCountThreadMap:u.Operation.objectSet(p,c,(p[c]||0)-1),unreadCountScreenMap:u.Operation.objectSet(d,s,(d[s]||0)-1)})}),o(e.projectCid,s))})};t.a={entryMap:v,getState:h,setState:m}},jAji:function(e,t,n){"use strict";var r=n("SgXW"),a=(n.n(r),n("DZQR")),o=a.a.CommentThread,i=[],c=n.i(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:comment-threads:update",payload:e(n,i,t)})})},d={"comment-threads:refresh":p(o.refreshStateList,!1),"comment-threads:save":p(o.saveState,!1),"comment-threads:add":p(o.addState,!1),"comment-threads:add-local":p(o.addState,!0),"comment-threads:update":p(o.updateState,!1),"comment-threads:update-local":p(o.updateState,!0),"comment-threads:delete":p(o.deleteState,!1),"comment-threads:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},jHGJ:function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e}t.a=r},jPtm:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.connect=t.Provider=void 0;var a=n("6EfI"),o=r(a),i=n("AjTu"),c=r(i);t.Provider=o.default,t.connect=c.default},jhmH:function(e,t,n){var r,a,o;!function(i,c){a=[e,n("e+M6"),n("bkiC"),n("10LV")],r=c,void 0!==(o="function"==typeof r?r.apply(t,a):r)&&(e.exports=o)}(0,function(e,t,n,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var u=a(t),l=a(n),p=a(r),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return c(t,e),f(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===d(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,p.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return s("action",e)}},{key:"defaultTarget",value:function(e){var t=s("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return s("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}(l.default);e.exports=h})},k7m3:function(e,t){function n(){return!1}e.exports=n},kqjs:function(e,t,n){function r(e,t,n,r,g,b,_){var w=e[n],E=t[n],S=_.get(E);if(S)return void a(e,n,S);var C=b?b(w,E,n+"",e,t,_):void 0,x=void 0===C;if(x){var M=l(E),j=!M&&d(E),O=!M&&!j&&y(E);C=E,M||j||O?l(w)?C=w:p(w)?C=c(w):j?(x=!1,C=o(E,!0)):O?(x=!1,C=i(E,!0)):C=[]:m(E)||u(E)?(C=w,u(w)?C=v(w):(!h(w)||r&&f(w))&&(C=s(E))):x=!1}x&&(_.set(E,C),g(C,E,r,b,_),_.delete(E)),a(e,n,C)}var a=n("xL22"),o=n("Ksh6"),i=n("4/A1"),c=n("pEBi"),s=n("bEHS"),u=n("M0Wl"),l=n("4kIi"),p=n("Uu+U"),d=n("XUGp"),f=n("LLOX"),h=n("5f4m"),m=n("mPi+"),y=n("vqK1"),v=n("xMAu");e.exports=r},lTej:function(e,t,n){function r(e){return a(this.__data__,e)>-1}var a=n("oGRU");e.exports=r},lksT:function(e,t,n){function r(e){var t=this.__data__,n=a(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}var a=n("oGRU"),o=Array.prototype,i=o.splice;e.exports=r},"mPi+":function(e,t,n){function r(e){if(!i(e)||a(e)!=c)return!1;var t=o(e);if(null===t)return!0;var n=p.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d}var a=n("V1jg"),o=n("ZvJr"),i=n("rGnh"),c="[object Object]",s=Function.prototype,u=Object.prototype,l=s.toString,p=u.hasOwnProperty,d=l.call(Object);e.exports=r},mUHn:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("jPtm"),p=(n.n(l),n("XUrE")),d=n.n(p),f=n("SZh2"),h=n("OxeN"),m=n("yI57"),y=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n}return o(t,e),t.prototype.onMouseEnter=function(e){if(-1!==this.props.activeLayerID)return this.props.layer.id===this.props.currentScreen.cid?void this.props.enterLayer(-1):void this.props.enterLayer(this.props.layer.id)},t.prototype.onMouseLeave=function(e){-1!==this.props.activeLayerID&&this.props.enterLayer(-1)},t.prototype.render=function(){var e=this.props,t=e.layer,r=e.selectLayer,a=e.activeLayerID,o=e.enteredLayerID,i=e.currentScreen,c=t.id,s=t.width,l=t.height,p=t.top,f=t.left,h=t.kind,y=s;if(h&&"group"===h)return null;var v=i.width,g=i.height,b={width:s/v*100+"%",height:l/g*100+"%",top:p/g*100+"%",left:f/v*100+"%",zIndex:Math.pow(2,31)-parseInt(s*l)};n.i(m.a)(t.name)&&(b.width="100%",y=v);var _=c===a,w=c===o||-1===o,E=d()("Layer",{"is-active":_,"is-focus":w});return u.a.createElement("div",{className:E,style:b,"data-width":Math.floor(y),"data-height":Math.floor(l),onClick:function(e){r(c)},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},_&&u.a.createElement("span",{className:"LayerCorner left top"}),_&&u.a.createElement("span",{className:"LayerCorner left bottom"}),_&&u.a.createElement("span",{className:"LayerCorner right top"}),_&&u.a.createElement("span",{className:"LayerCorner right bottom"}))},t}(s.Component);y.propTypes={layer:c.a.object,selectLayer:c.a.func,enterLayer:c.a.func,currentScreen:c.a.object,activeLayerID:c.a.oneOfType([c.a.number,c.a.string]),enteredLayerID:c.a.oneOfType([c.a.number,c.a.string])};var v=function(e){function t(){r(this,t);var n=a(this,e.call(this));return n.onMouseLeave=n.onMouseLeave.bind(n),n}return o(t,e),t.prototype.onMouseEnter=function(e){this.props.enterLayer(-1)},t.prototype.onMouseLeave=function(e){this.props.enterLayer(this.props.currentScreen.cid)},t.prototype.render=function(){var e=this.props,t=e.layers,n=e.selectLayer,r=e.enterLayer,a=e.activeLayerID,o=e.enteredLayerID,i=e.currentScreen;return u.a.createElement("div",null,u.a.createElement("ul",{className:"LayerList",onMouseLeave:this.onMouseLeave},t.map(function(e){return u.a.createElement("li",{key:e.id},u.a.createElement(y,{layer:e,selectLayer:n,enterLayer:r,activeLayerID:a,enteredLayerID:o,currentScreen:i}))})),-1!==a&&u.a.createElement(h.a,null))},t}(s.Component);v.propTypes={layers:c.a.array,selectLayer:c.a.func,enterLayer:c.a.func,currentScreen:c.a.object,activeLayerID:c.a.oneOfType([c.a.number,c.a.string]),enteredLayerID:c.a.oneOfType([c.a.number,c.a.string])};var g=function(e){var t=e.container.layers,n=t.resourceByScreen,r=t.visibilityScreenID,a=t.activeLayerID,o=t.enteredLayerID,i=e.model,c=i.current.screenCid,s=i.screens,u=s.find(function(e){return e.cid===c});return{layers:n[r]?n[r].layers:[],currentScreen:u,activeLayerID:a,enteredLayerID:o}},b=function(e){return{selectLayer:function(t){e(n.i(f.a)(t))},enterLayer:function(t){e(n.i(f.d)(t))}}};t.a=n.i(l.connect)(g,b)(v)},mchu:function(e,t,n){"use strict";t.__esModule=!0;var r=n("Ebzz"),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=a.default.shape({subscribe:a.default.func.isRequired,dispatch:a.default.func.isRequired,getState:a.default.func.isRequired})},mcyn:function(e,t,n){"use strict";var r=n("MseR");n("/3r2"),n("EX8i"),n("W3Gc"),n("gwOC"),n("sZUI"),n("x9ej"),n("HIdT");t.a=r.a},mqQG:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a={isOpen:!0};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;switch(arguments[1].type){case"reducer:previewpanel:open":return r({},e,{isOpen:!0});case"reducer:previewpanel:close":return r({},e,{isOpen:!1});case"reducer:previewpanel:reset":return a;default:return e}}},"n9+0":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){var t=this;r(this,e),this.elementFrom=null,this.elementTo=null,this._delayedSync=null,this.delaySync=function(){t._delayedSync&&clearTimeout(t._delayedSync),t._delayedSync=setTimeout(function(){return t.sync()},100),t.sync()}}return e.prototype.init=function(e,t){this.elementFrom=e,this.elementTo=t,this.sync()},e.prototype.sync=function(){var e=this.elementFrom.scrollTop;this.elementTo.style.marginTop=0-e+"px"},e.prototype.reverseSync=function(){var e=0-parseInt(this.elementTo.style.marginTop);this.elementFrom.scrollTop=e},e}();t.a=a},nD5O:function(e,t){e.exports={title:"_1ECGiApPDhKCBNcqQgw7el",avatar:"_2KQh7BxFPADq3xUQ7upOAK",isUnread:"_1THEZPtIQ_7rMffQYhdkGp",backBtn:"_2rHiIgwhEkR7naIB_LKhRe _2TAID7TnzAXoGA-jTBc04W",backArrow:"_2QUeBYJY7gkK1G6Wlu-z3v"}},oA06:function(e,t){function n(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}e.exports=n},oGRU:function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(a(e[n][0],t))return n;return-1}var a=n("3yrG");e.exports=r},orxR:function(e,t,n){"use strict";function r(e,t,n){var r=o[e]||!1,c=r&&t===n,s=c||i[e]||!1;return a[(r?1:0)+(c?2:0)+(s?4:0)]}n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r});var a=[0,1,2,3,4,5,6,7].map(function(e){return{create:!!(1&e),update:!!(2&e),delete:!!(4&e)}}),o={owner:!0,admin:!0,editor:!0,viewer:!0},i={owner:!0,admin:!0}},pEBi:function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},pUeM:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.color,n=e.value;return u.a.createElement("div",{className:"mb-hr"},u.a.createElement("h5",{style:{background:t}},n))},t}(s.Component);t.a=l,l.propTypes={color:c.a.string,value:c.a.string},l.defaultProps={color:"#FFF"}},pVhB:function(e,t){},"poF/":function(e,t){e.exports={commentLayer:"eHacCGUMgH1ViMhLMFMaJ"}},pob2:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return S});var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("AxSz"),p=n("WCZ4"),d=n("tnIa"),f=n("87Bm"),h=n("orxR"),m=n("c0vO"),y=n.n(m),v=n("U6mC"),g=n.n(v),b=n("nD5O"),_=n.n(b),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(){window.location.href="/signin?next="+window.location.pathname},S=function(e){function t(o){r(this,t);var i=a(this,e.call(this,o));return i.setUnreadComment=function(e){var t=i.props,n=t.currentState.screenCid,r=t.commentContainer.select;(0,t.dispatch)({type:"unread-comment:set-unread",payload:{commentCid:e,threadCid:r,screenCid:n}})},i.setReadComment=function(e){var t=i.props,n=t.currentState.screenCid,r=t.commentContainer.select;(0,t.dispatch)({type:"unread-comment:set-read",payload:{commentCid:e,threadCid:r,screenCid:n}})},i.getPermission=function(e){return n.i(h.b)(i.props.currentState.userRole,i.props.userState.id,e)},i.getCollaborator=function(e){var t=i.props,n=t.collaboratorsState,r=t.currentState,a=r.projectCid,o=r.teamCid;return n.find(function(t){return(t.project_cid===a||t.team_cid===o)&&t.user_id===e})},i.renderContentEmpty=i.renderContentEmpty.bind(i),i.doReply=function(e){i.replyTextareaRef&&i.replyTextareaRef.onEditFinish(e)},i.doCreateThread=function(e){e&&(i.props.dispatch({type:"entry:comment-threads:add",payload:{top:0,left:0,message:e}}),i.threadRef&&i.threadRef.doScrollToBottom())},i.doCreateComment=function(e){if(e){var t=i.props,n=t.commentContainer,r=t.commentThreadsState,a=t.dispatch,o=n.select&&r.find(function(e){return e.cid===n.select});o&&(a({type:"entry:comments:add",payload:{thread_cid:o.cid,message:e}}),i.threadRef&&i.threadRef.doScrollToBottom())}},i.cancelSelect=function(){i.props.dispatch({type:"container:comment:select",payload:{select:null}})},i.toggleMinifyUI=function(){var e=i.props,t=e.commentContainer;(0,e.dispatch)({type:"container:comment:set:is-minified",payload:{isMinified:!t.isMinified}})},i.setReplyTextareaRef=function(e){i.replyTextareaRef=e},i.setThreadRef=function(e){i.threadRef=e},i.setPanelRef=function(e){i.panelRef=e},i.replyTextareaRef=null,i.threadRef=null,i.panelRef=null,i.panelPositionEventListeners=i.getPanelPositionEventListeners(),i}return o(t,e),t.prototype.componentDidMount=function(){var e=this.props;(0,e.dispatch)({type:"unread-comment:init-for-project",payload:{currentState:e.currentState,commentThreadList:e.commentThreadsState,commentList:e.commentsState}}),this.tickUpdate()},t.prototype.componentDidUpdate=function(){this.tickUpdate()},t.prototype.componentWillUnmount=function(){this.props.dispatch({type:"container:screen:set:bottom-covered-height",payload:{bottomCoveredHeight:0}})},t.prototype.getPanelPositionEventListeners=function(){var e=this,t=null,n=null,r=function(r){if(r.preventDefault(),e.panelRef){var i=r.clientX,c=r.clientY;if(r.target===r.currentTarget){var s=e.panelRef.getBoundingClientRect(),u=s.left,l=s.right,p=s.top,d=s.bottom;t={clientX:i,clientY:c},n={left:u,right:l,top:p,bottom:d},document.addEventListener("mousemove",a),document.addEventListener("mouseup",o),document.addEventListener("mouseleave",o)}}},a=function(r){if(r.preventDefault(),e.panelRef){var a=r.clientX,o=r.clientY,i=a-t.clientX,c=o-t.clientY;e.props.setPanelPosition({left:n.left+i,right:n.right+i,top:n.top+c,bottom:n.bottom+c})}},o=function e(r){r.preventDefault(),t=null,n=null,document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",e),document.removeEventListener("mouseleave",e)};return{onMouseDown:r}},t.prototype.tickUpdate=function(){var e=this;this.props.dispatch({type:"container:screen:set:bottom-covered-height",payload:{bottomCoveredHeight:this.panelRef?this.panelRef.offsetHeight:0}}),setTimeout(function(){return e.replyTextareaRef&&e.replyTextareaRef.focus()},500)},t.prototype.getUserStatus=function(){var e=this.props,t=e.userState,n=e.currentState;return t.id?"guest"===n.userRole?"not_collaborator":"collaborator":"not_signin"},t.prototype.renderContentEmpty=function(){var e=this.props,t=e.commentContainer,n=e.commentThreadsState,r=t.select&&n.find(function(e){return e.cid===t.select});return u.a.createElement("div",{"data-css":"list"},u.a.createElement("div",{className:y.a.preview_panel_empty},u.a.createElement("span",null,"not_signin"===this.getUserStatus()?l.a.I18N.preview.comment.thread_none_tip_signin:r?l.a.I18N.preview.comment.reply_none_tip:l.a.I18N.preview.comment.thread_none_tip)))},t.prototype.renderContentReply=function(e,t){var n=this.getUserStatus();return u.a.createElement("div",{"data-css":"reply"},"collaborator"===n&&u.a.createElement(f.a.ReplyTextarea,{ref:this.setReplyTextareaRef,onValueChange:e?this.doCreateComment:this.doCreateThread,placeholder:l.a.I18N.preview.comment.comment_placeholder,isMultiLine:!0,isAutoHeight:!0}),"collaborator"===n&&u.a.createElement("button",{"data-css":"primary",onClick:this.doReply},e?-1===t?l.a.I18N.preview.comment.comment_create_initial:l.a.I18N.preview.comment.comment_create:l.a.I18N.preview.comment.thread_create),"not_signin"===n&&u.a.createElement("button",{"data-css":"primary",onClick:E},l.a.I18N.preview.comment.tip_signin),"not_collaborator"===n&&l.a.I18N.preview.comment.tip_not_collaborator)},t.prototype.renderMinified=function(e){return u.a.createElement("div",{ref:this.setPanelRef,className:[y.a.preview_panel,y.a.preview_panel_popup,y.a.preview_panel_popup_minified,g.a.comment_panel].join(" ")},u.a.createElement("div",w({className:[y.a.preview_panel_upper,y.a.preview_panel_upper_minified].join(" "),type:"toolbar",onClick:this.toggleMinifyUI},this.panelPositionEventListeners),u.a.createElement("p",null,e.length?e.length+l.a.I18N.preview.comment.panel:l.a.I18N.preview.comment.thread_none),u.a.createElement("button",{type:"button-right"},u.a.createElement("i",{className:"fa fa-chevron-up"}))))},t.prototype.renderFull=function(e){var t=this.props,n=t.commentContainer,r=t.commentThreadsState,a=t.unreadCommentState,o=t.commentsState,i=t.dispatch,c={};o.forEach(function(e){c[e.thread_cid]?c[e.thread_cid].push(e):c[e.thread_cid]=[e]});var s=n.select&&r.find(function(e){return e.cid===n.select}),f=s&&c[s.cid],h=f?f.length-1:-1,m=s?d.a:d.b,v=!s&&e.length?e.length+l.a.I18N.preview.comment.panel:s?h>0?h+l.a.I18N.preview.comment.reply:0===h?l.a.I18N.preview.comment.reply_none:l.a.I18N.preview.comment.comment_create_initial_title:l.a.I18N.preview.comment.thread_none;return u.a.createElement("div",{ref:this.setPanelRef,className:[y.a.preview_panel_popup,g.a.comment_panel].join(" ")},u.a.createElement("div",w({className:y.a.preview_panel_upper,type:"toolbar"},this.panelPositionEventListeners),s&&u.a.createElement("button",{className:_.a.backBtn,onClick:this.cancelSelect},u.a.createElement(p.a,{name:"angle-right",className:_.a.backArrow})),u.a.createElement("p",{className:_.a.title},v)),u.a.createElement("div",{className:y.a.preview_panel_content},u.a.createElement("div",{className:[g.a.comment_thread,g.a.comment_thread_flex].join(" ")},u.a.createElement(m,{ref:this.setThreadRef,commentContainer:n,commentThreadList:e,commentListMap:c,unreadState:a,setReadComment:this.setReadComment,setUnreadComment:this.setUnreadComment,getPermission:this.getPermission,getCollaborator:this.getCollaborator,renderEmptyComponent:this.renderContentEmpty,dispatch:i}),this.renderContentReply(s,h))))},t.prototype.render=function(){var e=this.props,t=e.commentContainer.isMinified,n=e.commentThreadList;return t?this.renderMinified(n):this.renderFull(n)},t}(u.a.PureComponent);S.propTypes={commentsState:c.a.array,commentThreadsState:c.a.array,collaboratorsState:c.a.array,userState:c.a.object,currentState:c.a.object,unreadCommentState:c.a.object,commentContainer:c.a.object,commentThreadList:c.a.array,setPanelPosition:c.a.func,dispatch:c.a.func}},qytv:function(e,t,n){"use strict";function r(e){try{o(),e()}finally{i()}}function a(e){s.push(e),u||(o(),c())}function o(){u++}function i(){u--}function c(){i();for(var e=void 0;!u&&void 0!==(e=s.shift());)r(e)}t.a=a,t.b=o,t.c=c;var s=[],u=0},qzLf:function(e,t,n){"use strict";var r=n("tx/B"),a=n.i(r.a)(Object.getPrototypeOf,Object);t.a=a},"r2k+":function(e,t){function n(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),a=document.createRange();a.selectNodeContents(e),r.removeAllRanges(),r.addRange(a),t=r.toString()}return t}e.exports=n},r81O:function(e,t,n){function r(e){return a(function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,c=a>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,c&&o(n[0],n[1],c)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var s=n[r];s&&e(t,s,r,i)}return t})}var a=n("Jqn1"),o=n("k7m3");e.exports=r},rGnh:function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},"sS1+":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){r(this,e),this.timeoutMap=new Map}return e.prototype.setTimeout=function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){var r=this,a=setTimeout(function(){t(),r.clearTimeout(e,t)},n);return this.setToken(e,t,a),a}),e.prototype.clearTimeout=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=this.getToken(e,t);void 0!==n&&(clearTimeout(n),this.clearToken(e,t))}),e.prototype.clearTimeoutByKey=function(e){var t=this,n=this.timeoutMap.get(e);void 0!==n&&(n.forEach(function(n,r){return t.clearTimeout(e,r)}),this.timeoutMap.delete(e))},e.prototype.clear=function(){var e=this;this.timeoutMap.forEach(function(t,n){return e.clearTimeoutByKey(n)})},e.prototype.setToken=function(e,t,n){var r=this.timeoutMap.get(e);void 0===r&&(r=new Map,this.timeoutMap.set(e,r)),r.set(t,n)},e.prototype.getToken=function(e,t){var n=this.timeoutMap.get(e);if(n)return n.get(t)},e.prototype.clearToken=function(e,t){var n=this.timeoutMap.get(e);n&&n.delete(t)},e}();t.a=a},sZUI:function(e,t,n){"use strict";function r(e,t,n){if(!t(e))throw u("error","uncaught at check",n),new Error(n)}function a(e,t){return j.notUndef(e)&&M.call(e,t)}function o(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=d({},e),n=new Promise(function(e,n){t.resolve=e,t.reject=n});return t.promise=n,t}function c(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0,r=new Promise(function(r){n=setTimeout(function(){return r(t)},e)});return r[g]=function(){return clearTimeout(n)},r}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments[3],a={name:n,next:e,throw:t,return:N};return r&&(a[y]=!0),"undefined"!=typeof Symbol&&(a[Symbol.iterator]=function(){return a}),a}function u(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}function l(e,t){return function(){return x&&u("warn",t),e.apply(void 0,arguments)}}function p(e){return function(t){var n=Object.defineProperty(t,b,{value:!0});return e(n)}}n.d(t,"a",function(){return h}),n.d(t,"u",function(){return m}),n.d(t,"n",function(){return v}),n.d(t,"s",function(){return g}),n.d(t,"o",function(){return b}),n.d(t,"e",function(){return _}),n.d(t,"j",function(){return E}),n.d(t,"k",function(){return S}),n.d(t,"f",function(){return C}),n.d(t,"q",function(){return x}),t.b=r,n.d(t,"c",function(){return j}),n.d(t,"t",function(){return O}),t.l=o,t.v=i,t.i=c,n.d(t,"r",function(){return T}),t.h=s,t.p=u,t.d=l,n.d(t,"m",function(){return P}),n.d(t,"g",function(){return I}),t.w=p;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(e){return"@@redux-saga/"+e},m=h("TASK"),y=h("HELPER"),v=h("MATCH"),g=h("cancelPromise"),b=h("SAGA_ACTION"),_=h("SELF_CANCELLATION"),w=function(e){return function(){return e}},E=w(!0),S=(w(!1),function(){}),C=function(e){return e},x=!1,M=Object.prototype.hasOwnProperty,j={undef:function(e){return null===e||void 0===e},notUndef:function(e){return null!==e&&void 0!==e},func:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},array:Array.isArray,object:function(e){return e&&!j.array(e)&&"object"===(void 0===e?"undefined":f(e))},promise:function(e){return e&&j.func(e.then)},iterator:function(e){return e&&j.func(e.next)&&j.func(e.throw)},iterable:function(e){return e&&j.func(Symbol)?j.func(e[Symbol.iterator]):j.array(e)},task:function(e){return e&&e[m]},observable:function(e){return e&&j.func(e.subscribe)},buffer:function(e){return e&&j.func(e.isEmpty)&&j.func(e.take)&&j.func(e.put)},pattern:function(e){return e&&(j.string(e)||"symbol"===(void 0===e?"undefined":f(e))||j.func(e)||j.array(e))},channel:function(e){return e&&j.func(e.take)&&j.func(e.close)},helper:function(e){return e&&e[y]},stringableFunc:function(e){return j.func(e)&&a(e,"toString")}},O={assign:function(e,t){for(var n in t)a(t,n)&&(e[n]=t[n])}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return++e}}(),k=function(e){throw e},N=function(e){return{value:e,done:!0}},P=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},I=function(e,t){return(e?e+".":"")+"setContext(props): argument "+t+" is not a plain object"}},smZ4:function(e,t,n){function r(e){return function(t,n,r){var c=Object(t);if(!o(t)){var s=a(n,3);t=i(t),n=function(e){return s(c[e],e,c)}}var u=e(t,n,r);return u>-1?c[s?t[u]:u]:void 0}}var a=n("U/UK"),o=n("0VhX"),i=n("AZEH");e.exports=r},sn4q:function(e,t,n){"use strict";function r(e){var t=e.entryMap,r=e.reducerMap,c=e.sagaMap,s=new o.ReduxEntry;s.setEntryMap(t);var u=void 0,l=[s.middleware];c&&(u=n.i(i.a)(),l.push(u));var p=n.i(a.createStore)(n.i(a.combineReducers)(r),a.applyMiddleware.apply(void 0,l));if(c){for(var d in c)!function(e){u.run(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,c[e]();case 3:t.next=0;break;case 5:case"end":return t.stop()}},t,this)}))}(d)}return{store:p,reduxEntry:s}}var a=n("9Tab"),o=n("SgXW"),i=(n.n(o),n("mcyn")),c=n("Ibgh"),s=n("y6fY"),u=n("G1TU"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.a=function(e){var t=e.viewMap,o=e.containerReducerMap,i=e.sagaMap,p=e.extendCallback,d=new c.a;for(var f in t)d.setView(f,t[f]);var h=r({entryMap:l({},u.a,s.a,{"entry:webpack-interface:view:call":function(e,t){var n=(t.type,t.payload);setTimeout(function(){return d.callViewMethod.apply(d,[n.name,n.method].concat(n.args||{}))},0)}}),reducerMap:{model:n.i(a.combineReducers)(u.b),container:n.i(a.combineReducers)(o)},sagaMap:i}),m=h.store,y=h.reduxEntry;return d.setStore(m),p&&p(d,{store:m,reduxEntry:y}),d}},stEm:function(e,t){},sy3t:function(e,t,n){var r=n("dspo"),a=r();e.exports=a},t0dO:function(e,t,n){function r(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,c=o(r.length-t,0),s=Array(c);++i<c;)s[i]=r[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=r[i];return u[t]=n(s),a(e,this,u)}}var a=n("Kigd"),o=Math.max;e.exports=r},t57V:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var c=e(n,r,i),s=c.dispatch,u=[],l={getState:c.getState,dispatch:function(e){return s(e)}};return u=t.map(function(e){return e(l)}),s=a.a.apply(void 0,u)(c.dispatch),o({},c,{dispatch:s})}}}t.a=r;var a=n("9CN1"),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},tnIa:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(){return l.a.createElement("div",{"data-css":"divider",key:"divider"},l.a.createElement("div",null),l.a.createElement("span",null,f.a.I18N.preview.comment.divider_new),l.a.createElement("div",null))}n.d(t,"a",function(){return S}),n.d(t,"b",function(){return E});var c=n("Ebzz"),s=n.n(c),u=n("eBYd"),l=n.n(u),p=n("XUrE"),d=n.n(p),f=n("AxSz"),h=n("GkqC"),m=n("c0vO"),y=n.n(m),v=n("U6mC"),g=n.n(v),b=n("nD5O"),_=n.n(b),w=function(e){setTimeout(function(){e&&(e.scrollTop=e.scrollHeight-e.offsetHeight)},100)},E=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n)),i=o.props.dispatch;return o.toggleSelect=function(e){var t=o.props.commentContainer,n=t.select===e.cid;i({type:"container:comment:select",payload:{select:n?null:e.cid}})},o.doDeleteThread=function(e){f.a.confirm(f.a.I18N.preview.comment.thread_delete_confirm)&&i({type:"entry:comment-threads:delete",payload:e})},o.doScrollToBottom=function(){return w(o.scrollRef)},o.setScrollRef=function(e){o.scrollRef=e},o.scrollRef=null,o}return o(t,e),t.prototype.componentDidMount=function(){$(this.scrollRef).perfectScrollbar()},t.prototype.renderEntry=function(e,t,n,r,a){var o,i,c,s=this,u=a.unreadState,p=a.getPermission,h=a.getCollaborator,m=(a.dispatch,n.length),v=m>0&&n[0],b=u.unreadCountThreadMap[e.cid]||0,w=r===e.cid,E=p(e.user_id),S=v&&h(v.user_id);return l.a.createElement("div",{key:t,className:g.a.comment_thread},l.a.createElement("div",{className:d()(g.a.comment_comment,g.a.comment_comment_thread_initial,g.a.comment_comment_clickable,(o={},o[g.a.comment_comment_thread_initial_focus]=w,o),(i={},i[y.a.separator]=1!==t,i)),onClick:function(){return s.toggleSelect(e)}},l.a.createElement("div",{className:g.a.comment_comment_upper,type:"toolbar"},l.a.createElement("span",{type:"index",className:d()((c={},c[_.a.isUnread]=b>0,c))},"#"+t),S&&l.a.createElement("img",{width:24,height:24,src:S.avatar,className:_.a.avatar}),S&&l.a.createElement("span",{type:"name","data-css":"spacer"},S.name),v&&l.a.createElement("span",{type:"time"},f.a.L10N.parseTimeAgo(1e3*v.created_at))),v&&l.a.createElement("div",{className:g.a.comment_comment_content,type:"toolbar"},l.a.createElement("span",{type:"entry"},v.message)),l.a.createElement("div",{className:g.a.comment_comment_lower,type:"toolbar"},m<=1?l.a.createElement("span",{type:"reply-none"},f.a.I18N.preview.comment.reply_none):l.a.createElement("span",{type:"reply-count"},m-1+f.a.I18N.preview.comment.reply),b>0&&l.a.createElement("span",{type:"new"},b===m?f.a.I18N.preview.comment.reply_new_thread:b+f.a.I18N.preview.comment.reply_new),E.delete&&l.a.createElement("span",{type:"dot"}),E.delete&&l.a.createElement("span",{type:"modify",onClick:function(){return s.doDeleteThread(e)}},f.a.I18N.preview.comment.modify_delete))))},t.prototype.render=function(){var e=this,t=this.props,n=t.commentThreadList,r=t.commentListMap,a=t.commentContainer,o=t.renderEmptyComponent,i=a.focus||a.select;return n.length?l.a.createElement("div",{"data-css":"list",ref:this.setScrollRef},n.map(function(t,n){return e.renderEntry(t,n+1,r[t.cid]||[],i,e.props)})):o()},t}(l.a.PureComponent);E.propTypes={commentContainer:s.a.object,commentThreadList:s.a.array,commentListMap:s.a.object,unreadState:s.a.object,setReadComment:s.a.func,setUnreadComment:s.a.func,getPermission:s.a.func,getCollaborator:s.a.func,renderEmptyComponent:s.a.func,dispatch:s.a.func};var S=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));o.toggleShowAll=function(e){void 0===e&&(e=!o.state.isShowAll),o.setState({isShowAll:e})},o.doScrollToBottom=function(){return w(o.scrollRef)};var i=o.calcFoldDivider(),c=i.foldCount,s=i.newDividerIndex;return o.foldCount=c,o.newDividerIndex=s,o.setScrollRef=function(e){o.scrollRef=e},o.scrollRef=null,o.state={isShowAll:!1},o}return o(t,e),t.prototype.componentDidMount=function(){this.tickReadComment(),$(this.scrollRef).perfectScrollbar()},t.prototype.componentDidUpdate=function(){this.tickReadComment()},t.prototype.getSelected=function(){var e=this.props,t=e.commentContainer,n=e.commentThreadList,r=e.commentListMap,a=e.unreadState,o=n.find(function(e){return e.cid===t.select});return{unreadState:a,commentList:r[t.select]||[],commentThread:o}},t.prototype.calcFoldDivider=function(){for(var e=this.getSelected(),t=e.commentList,n=e.unreadState,r=0,a=1/0,o=t.length-1;o>=0&&n.unreadCommentMap[t[o].cid];)a=o,o--;if(0===a&&(a=1),a>4)for(var i=1;i<=t.length-3&&!n.unreadCommentMap[t[i].cid];)r++,i++;return{newDividerIndex:a,foldCount:r}},t.prototype.tickReadComment=function(){var e=this.props.setReadComment,t=this.getSelected(),n=t.commentList,r=t.unreadState,a=!1;n.forEach(function(t){r.unreadCommentMap[t.cid]&&(e(t.cid),a=!0)}),a||(this.newDividerIndex=1/0)},t.prototype.getCommentReducer=function(e){var t=this,n=this.state.isShowAll,r=1+this.foldCount-1,a=null;return function(o,c,s){if(!n&&s>=1&&s<=r)s===r&&o.push(l.a.createElement("div",{"data-css":"expand",key:"expand"},l.a.createElement("button",{onClick:function(){return t.toggleShowAll(!0)}},f.a.I18N.preview.comment.show_all_0+t.foldCount+f.a.I18N.preview.comment.show_all_1)));else{1===s&&o.push(l.a.createElement("div",{"data-css":"divider-line",key:"divider-line"})),s===t.newDividerIndex&&o.push(i());var u=0===s,p=!u&&a!==c.user_id;p&&(a=c.user_id),o.push(l.a.createElement(h.a,{key:c.cid,commentMarkerIndex:e,comment:c,isThreadInitial:u,isUserInitial:p,getPermission:t.props.getPermission,getCollaborator:t.props.getCollaborator,dispatch:t.props.dispatch}))}return o}},t.prototype.render=function(){var e=this.props,t=e.commentContainer,n=e.commentThreadList,r=e.commentListMap,a=e.renderEmptyComponent,o=1+n.findIndex(function(e){return e.cid===t.select}),i=r[t.select]||[];return i.length?l.a.createElement("div",{"data-css":"list",ref:this.setScrollRef},i.reduce(this.getCommentReducer(o),[])):a()},t}(l.a.PureComponent);S.propTypes={commentThreadList:s.a.array,commentListMap:s.a.object,commentContainer:s.a.object,unreadState:s.a.object,setReadComment:s.a.func,setUnreadComment:s.a.func,getPermission:s.a.func,getCollaborator:s.a.func,renderEmptyComponent:s.a.func,dispatch:s.a.func}},"tx/B":function(e,t,n){"use strict";function r(e,t){return function(n){return e(t(n))}}t.a=r},uiFk:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("fGds"),p=n("vW/9"),d=function(e){function t(){return r(this,t),a(this,e.call(this))}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.screen,n=e.isFetching,r=e.error;return e.isActive?n?null:r?null:u.a.createElement(p.a,{name:t.name},u.a.createElement(l.a.container,null)):null},t}(u.a.Component);d.propTypes={screen:c.a.object,isFetching:c.a.bool,error:c.a.string,isActive:c.a.bool},t.a=d},uuwI:function(e,t){e.exports={drawer:"_1CYLhPjmzK-sY5HpJybF2y",drawerOpen:"_3nZcuwz2SvUffBYMxwoPfy _1CYLhPjmzK-sY5HpJybF2y",drawerClose:"_1AKeg6gd4t6N-IzmLEV1ss _1CYLhPjmzK-sY5HpJybF2y",toggler:"_1t6bTC2j2Q3euTd4-AFaVb _2TAID7TnzAXoGA-jTBc04W",arrow:"_1z2qNXbnlZ5OFaEVQiGT3H",togglerOpen:"_2Yo5tDQ-eq6aXZ66hNLeky _1t6bTC2j2Q3euTd4-AFaVb _2TAID7TnzAXoGA-jTBc04W",togglerClose:"pgAOu27N69FL42LLr3h1Y _1t6bTC2j2Q3euTd4-AFaVb _2TAID7TnzAXoGA-jTBc04W",panel:"_13bB_0KiKth0wY-bPHtI5Y QfGUsu8TGG0NOhOOBP7vo",subPanel:"_3P3oO-XTjtrEkYLqctCnbL QfGUsu8TGG0NOhOOBP7vo",header:"_1rJW7eESYh2c1SzUg9I0DN _24eICuam98EjaIPLs81oOb _2fTL9fFMt1j6Oduebc0Nr6",panelItemHeader:"_3WD9zPtzpvGtKHIjIoVXBu _24eICuam98EjaIPLs81oOb _2fTL9fFMt1j6Oduebc0Nr6 _1C9Y0JmisHriOVdLVpZ-5O",isPanelItemOpen:"_27sfChK5umyYwk0J72HFko",isLayerOpen:"_3hshay1DqrbHQ-GtvsxaZF",title:"_1Rcgr1M8BxTyk28ux6M9Ba",desc:"_2kA2Uy1QskrJQbZ_2Kbj4X",shareBtn:"h4f941Hfe-8M9JFFmfnJx _2TAID7TnzAXoGA-jTBc04W",shareIcon:"_3acBas_zq6_1W-4EnaoWzS"}},v0Ts:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var a,o=n("yfZQ"),i=function(e){return e&&e.__esModule?e:{default:e}}(o);a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var c=(0,i.default)(a);t.default=c}).call(t,n("EZ6c"),n("BOZI")(e))},v79p:function(e,t,n){var r=n("3I6u"),a=r.Uint8Array;e.exports=a},vLgD:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("vhiH"),a=n.n(r),o=n("JVzO"),i=n.n(o),c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={credentials:"include",method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}},o=i.a.stringify(t),c=o?e+"?"+o:e;return fetch(c,a()({},r,n)).then(function(e){if(e.status>=400)throw new Error(e.status);return e.json()})}},"vW/9":function(e,t,n){"use strict";var r=n("Ebzz"),a=n.n(r),o=n("eBYd"),i=n.n(o),c=function(e){var t=e.children;return i.a.createElement("div",null,t)};c.propTypes={name:a.a.string,children:a.a.element},t.a=c},vWVt:function(e,t,n){"use strict";function r(e){return p.has(e)?e:"guest"}var a=n("SgXW"),o=(n.n(a),{teamCid:null,projectCid:null,screenCid:null,userRole:"guest"}),i=n.i(a.createStateStore)(o),c=i.getState,s=i.setState,u=i.wrapEntry,l={"current:set":u(function(e,t,n){var a=t.dispatch,o=n.payload,i=o.project,c=o.screen,s=o.collaborator;a({type:"reducer:current:update",payload:{teamCid:i&&i.team_cid||"",projectCid:i&&i.cid,screenCid:c&&c.cid,userRole:r(s&&s.role)}})})},p=new Set(["owner","admin","editor","viewer"]);t.a={entryMap:l,getState:c,setState:s}},vfpb:function(e,t,n){function r(e,t,n){var r=e[t];c.call(e,t)&&o(r,n)&&(void 0!==n||t in e)||a(e,t,n)}var a=n("AmE3"),o=n("3yrG"),i=Object.prototype,c=i.hasOwnProperty;e.exports=r},vhiH:function(e,t,n){var r=n("AKBz"),a=n("r81O"),o=a(function(e,t,n){r(e,t,n)});e.exports=o},vj0c:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){r(this,e)}return e.prototype.activeWidth=function(){return"portrait"===MB.currentScreen.orientation?Math.round(MB.project().width*MB.scale()/100):Math.round(MB.project().height*MB.scale()/100)},e.prototype.activeHeight=function(){return"portrait"===MB.currentScreen.orientation?Math.round(MB.project().height*MB.scale()/100):Math.round(MB.project().width*MB.scale()/100)},e.prototype.hideScreen=function(e){$(e).hide(),$(e).find(".iframe").each(function(e,t){MB.runner.runnerUtil.setObjectUrl(t,"about:blank")})},e.prototype.doTransition=function(e,t,n,r){var a=this;n.enableTransition(r.delay()),t.enableTransition(r.delay()),r.template&&-1!==e.indexOf("menu")&&(e="none"),$.nextTick(function(){a[e](t,n,r)})},e.prototype.none=function(e,t,n){t.addClass("active"),e.removeClass("active top"),this.hideScreen(e),MB.runner.doneTransition(t)},e.prototype.slideIn=function(e,t,n,r,a,o){var i=this;e.transitionEnd(function(){e.removeClass("active"),t.addClass("active top"),i.hideScreen(e),MB.runner.doneTransition(t)}),e[n](r),t[n](a)},e.prototype.slidebottom=function(e,t,n){this.slideIn(e,t,"translateY",0-this.activeHeight(),0,n)},e.prototype.slideleft=function(e,t,n){this.slideIn(e,t,"translateX",0-this.activeWidth(),0,n)},e.prototype.slidetop=function(e,t,n){this.slideIn(e,t,"translateY",this.activeHeight(),0,n)},e.prototype.slideright=function(e,t,n){this.slideIn(e,t,"translateX",this.activeWidth(),0,n)},e.prototype.slideMenu=function(e,t,n,r,a){t.zindex("2"),e.css("z-index","101"),e.transitionEnd(function(){MB.runner.doneTransition(t)}),e[n](r)},e.prototype.leftmenu=function(e,t,n){this.slideMenu(e,t,"translateX",this.activeWidth()*n.menu_offset/100,n)},e.prototype.rightmenu=function(e,t,n){this.slideMenu(e,t,"translateX",0-this.activeWidth()*n.menu_offset/100,n)},e.prototype.fixedIn=function(e,t,n,r,a){var o=this;t.addClass("top"),t.css("z-index","101"),t.transitionEnd(function(){0===r&&(e.removeClass("active"),t.addClass("active"),o.hideScreen(e)),MB.runner.doneTransition(t),0!==r&&t.css("z-index","101")}),t[n](r)},e.prototype.topin=function(e,t,n){this.fixedIn(e,t,"translateY",0,n)},e.prototype.popin=function(e,t,n){this.fixedIn(e,t,"translateY",0,n)},e.prototype.slideleft2=function(e,t,n){this.fixedIn(e,t,"translateX",0,n)},e.prototype.slideright2=function(e,t,n){this.fixedIn(e,t,"translateX",0,n)},e.prototype.leftdrawer=function(e,t,n){this.fixedIn(e,t,"translateX",this.activeWidth()*(n.menu_offset-100)/100,n)},e.prototype.rightdrawer=function(e,t,n){this.fixedIn(e,t,"translateX",this.activeWidth()*(100-n.menu_offset)/100,n)},e.prototype.fixedOut=function(e,t,n,r,a){var o=this;t.zindex("2"),e.transitionEnd(function(){e.removeClass("active"),t.addClass("active"),o.hideScreen(e),MB.runner.doneTransition(t)}),e[n](r)},e.prototype.leftout=function(e,t,n){this.fixedOut(e,t,"translateX",0-this.activeWidth(),n)},e.prototype.rightout=function(e,t,n){this.fixedOut(e,t,"translateX",this.activeWidth(),n)},e.prototype.topout=function(e,t,n){this.fixedOut(e,t,"translateY",0-this.activeHeight(),n)},e.prototype.popout=function(e,t,n){this.fixedOut(e,t,"translateY",this.activeHeight(),n)},e.prototype.transitionHandler=function(e,t,n,r,a){switch("leftmenu"===e&&t.addClass("menu lmenu"),"rightmenu"===e&&t.addClass("menu rmenu"),"leftdrawer"===e&&n.addClass("drawer ldrawer"),"rightdrawer"===e&&n.addClass("drawer rdrawer"),e){case"popin":case"slidebottom":n.translate(0,a);break;case"topin":case"slidetop":n.translate(0,0-a);break;case"popout":case"none":case"leftout":case"rightout":case"topout":case"leftmenu":case"rightmenu":n.translate(0,0);break;case"slideright":case"slideleft2":case"leftdrawer":n.translate(0-r,0);break;case"slideleft":case"slideright2":case"rightdrawer":n.translate(r,0)}},e}();t.a=a},vqK1:function(e,t){function n(){return!1}e.exports=n},wfDx:function(e,t,n){"use strict";var r=n("jPtm"),a=(n.n(r),n("6gil")),o=n("1+7f"),i=n("fHoG");n.d(t,"a",function(){return a.a});var c={CommentLayer:n.i(r.connect)(function(e){return{commentsState:e.model.comments,commentThreadsState:e.model.commentThreads,collaboratorsState:e.model.collaborators,userState:e.model.user,currentState:e.model.current,unreadCommentState:e.model.unreadComment,commentContainer:e.container.comment}})(o.a),CommentMarkerPanel:n.i(r.connect)(function(e){return{commentThreadsState:e.model.commentThreads,userState:e.model.user,currentState:e.model.current,commentContainer:e.container.comment}})(i.a)};t.b={reducers:a.a,containers:c}},x9ej:function(e,t,n){"use strict";var r=n("f8j7");n.d(t,"e",function(){return r.e}),n.d(t,"c",function(){return r.a}),n.d(t,"b",function(){return r.b}),n.d(t,"f",function(){return r.f}),n.d(t,"a",function(){return r.c}),n.d(t,"d",function(){return r.d})},xHGQ:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("Ebzz"),c=n.n(i),s=n("eBYd"),u=n.n(s),l=n("WCZ4"),p=n("d04f"),d=n.n(p),f=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.setChecked=o.setChecked.bind(o),o.toggle=o.toggle.bind(o),o.state={checked:!!n.checked},o}return o(t,e),t.prototype.componentWillReceiveProps=function(e){"checked"in e&&this.setState({checked:!!e.checked})},t.prototype.setChecked=function(e){"checked"in this.props||this.setState({checked:e}),this.props.onChange(e)},t.prototype.toggle=function(){var e=!this.state.checked;this.setChecked(e)},t.prototype.render=function(){var e=this.props,t=e.icon,n=e.id,r=this.state.checked,a=void 0,o=void 0;return r?(a=d.a.switchOn,o=d.a.innerOn):(a=d.a.switchOff,o=d.a.innerOff),u.a.createElement("span",{id:n,className:a,onClick:this.toggle},u.a.createElement("span",{className:o},u.a.createElement(l.a,{type:"mb",name:t,className:d.a.icon})))},t}(s.Component);f.propTypes={id:c.a.string,icon:c.a.string,checked:c.a.bool,onChange:c.a.func},t.a=f},xL22:function(e,t,n){function r(e,t,n){(void 0===n||o(e[t],n))&&(void 0!==n||t in e)||a(e,t,n)}var a=n("AmE3"),o=n("3yrG");e.exports=r},xMAu:function(e,t,n){function r(e){return a(e,o(e))}var a=n("1t7s"),o=n("a65c");e.exports=r},y6fY:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("AxSz"),a={"entry:state:init":function(e){var t=e.dispatch;t({type:"user:set",payload:r.a.MB.user||null}),t({type:"teams:refresh"}),t({type:"widgets:refresh"}),t({type:"projects:refresh"}),t({type:"screens:refresh"}),t({type:"comments:refresh"}),t({type:"comment-threads:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set"})},"entry:state:clear":function(e){e.dispatch},"entry:refresh:team-related":function(e){var t=e.dispatch;t({type:"teams:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set"})},"entry:refresh:project-related":function(e){var t=e.dispatch;t({type:"projects:refresh"}),t({type:"screens:refresh"}),t({type:"comments:refresh"}),t({type:"comment-threads:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set"})},"entry:listpage:toggle:order":function(e){var t=e.dispatch,n=e.getState,a=r.a.MB.preference(),o=n().container.listpage.order,i=void 0;o?(i="asc"===o?"desc":"asc",a.app_order=i,a.lsave()):i=a.app_order,t({type:"container:listpage:set:order",payload:{order:i}})},"entry:focus-element":function(e,t){var n=e.dispatch,r=e.getState,a=t.payload,o=a.focusType,i=a.element;return!(i&&!r().container.comment.isMinified)||(setTimeout(function(){switch(o){case"normal":i.focus&&i.focus();break;case"external":n({type:"entry:webpack-interface:observer:call",payload:{key:"focus-method:request-focus",args:[i]}}),i.focus&&i.focus()}},100),!0)},"entry:layer:set:active":function(e,t){var n=e.dispatch,a=e.getState,o=t.payload,i=document.querySelector("#PlaySettingsContainer");o.isActive?(i.classList.add("disabled"),r.a.MB.runner.mode="immersive"):(i.classList.remove("disabled"),a().container.comment.isActive||(r.a.MB.runner.mode="default")),r.a.MB.runner.reload(!0),n({type:"container:layer:set:active",payload:o}),n({type:"SET_VISIBILITY_SCREEN",payload:{screenID:r.a.MB.currentScreen.cid}})},"entry:comment:set:active":function(e,t){var n=e.dispatch,a=e.getState,o=t.payload;o.isActive?r.a.MB.runner.mode="immersive":a().container.layers.isActive||(r.a.MB.runner.mode="default"),r.a.MB.runner.reload(!0),n({type:"container:comment:set:active",payload:o})},"container:comment:select":function(e,t){var n=e.dispatch,r=e.getState,a=t.payload.select,o=r(),i=o.model,c=i.comments,s=i.commentThreads,u=o.container,l=s.find(function(e){return e.cid===u.comment.select});l&&a!==u.comment.select&&!c.find(function(e){return e.thread_cid===l.cid})&&n({type:"entry:comment-threads:delete",payload:l})},"entry:preview:clear":function(e,t){e.dispatch,e.getState,t.payload;r.a.MB.runner.mode="default",MB.webpackInterface.store.dispatch({type:"reducer:previewpanel:reset"}),MB.webpackInterface.store.dispatch({type:"container:layers:clear"}),MB.webpackInterface.store.dispatch({type:"container:comment:set:active",payload:{isActive:!1}})}}},yAvz:function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},"yD+I":function(e,t,n){"use strict";var r=n("SgXW"),a=(n.n(r),n("DZQR")),o=a.a.Project,i=[],c=n.i(r.createStateStore)(i),s=c.getState,u=c.setState,l=c.wrapEntry,p=function(e,t){return l(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:projects:update",payload:e(n,i,t)})})},d={"projects:refresh":p(o.refreshStateList,!1),"projects:add":p(o.addState,!1),"projects:add-local":p(o.addState,!0),"projects:update":p(o.updateState,!1),"projects:update-local":p(o.updateState,!0),"projects:delete":p(o.deleteState,!1),"projects:delete-local":p(o.deleteState,!0)};t.a={entryMap:d,getState:s,setState:u}},yI57:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return isWidgetFullWidth}),__webpack_require__.d(__webpack_exports__,"b",function(){return hex2rgba}),__webpack_require__.d(__webpack_exports__,"c",function(){return parseNSColor}),__webpack_require__.d(__webpack_exports__,"d",function(){return rgb2hex}),__webpack_require__.d(__webpack_exports__,"e",function(){return hex2rgb});var __WEBPACK_IMPORTED_MODULE_0_lodash_round__=__webpack_require__("emDC"),__WEBPACK_IMPORTED_MODULE_0_lodash_round___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash_round__),isWidgetFullWidth=function(e){return["navigation_bar","status_bar","tab_bar","keyboard"].includes(e)},hex2rgba=function(e){if(""===e)return"rgba(0,0,0,1)";if(e=e.replace("#",""),3===e.length){var t=e.split(""),n=t[0],r=t[1],a=t[2];e=""+n+n+r+r+a+a}return"rgba("+parseInt(e.substring(0,2),16)/255+","+parseInt(e.substring(2,4),16)/255+","+parseInt(e.substring(4,6),16)/255+",1)"},parseNSColor=function parseNSColor(rgbaFuncStr){function rgba(){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];return{r:parseInt(__WEBPACK_IMPORTED_MODULE_0_lodash_round___default()(255*e),10),g:parseInt(__WEBPACK_IMPORTED_MODULE_0_lodash_round___default()(255*t),10),b:parseInt(__WEBPACK_IMPORTED_MODULE_0_lodash_round___default()(255*n),10),a:r}}var _eval=eval(rgbaFuncStr),r=_eval.r,g=_eval.g,b=_eval.b,a=_eval.a;return"rgba("+r+", "+g+", "+b+", "+a+")"},rgb2hex=function(e){var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):e},hex2rgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")":e}},yfZQ:function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},yqaE:function(e,t,n){var r=n("5f4m"),a=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(a)return a(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},yth4:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},z4o0:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("9Tab"),a=n("OtSt"),o=n("Sde/"),i=n("bwGr"),c=n("stEm"),s=(n.n(c),n("fGds")),u=n("QxLr");n.d(t,"b",function(){return u.a});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=n.i(r.combineReducers)(l({},o.a,s.a.reducer));t.c={actions:{setVisibilityScreen:i.a},containers:{VisibleResource:a.a},reducers:p}},zVs0:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){r(this,e),this.store=null,this.viewMap={},this.observerMap={}}return e.prototype.setStore=function(e){this.store=e},e.prototype.callObserver=function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return this.observerMap[e]&&(t=this.observerMap)[e].apply(t,[e].concat(r))},e.prototype.setObserver=function(e,t){this.observerMap[e]=t},e.prototype.setView=function(e,t){this.viewMap[e]=t},e.prototype.callViewMethod=function(e,t){for(var n,r=this.viewMap[e],a=arguments.length,o=Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];return r&&r[t]?(this.callObserver("view:"+e+":"+t),r[t].apply(r,[this.store].concat(o))):(n=console).warn.apply(n,["[WebpackInterface][callViewMethod] missed",e,t].concat(o))},e.prototype.init=function(){this.callObserver("init"),this.store&&this.store.dispatch({type:"entry:state:init"})},e.prototype.clear=function(){this.store&&this.store.dispatch({type:"entry:state:clear"}),this.callObserver("clear")},e}();t.a=a},zjN7:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t,n){var r,a={},o=(r={},r.null=[],r),i=0;e.forEach(function(e){if(e.project_cid===t){var n=String(e.cid),r=e.parent_cid?String(e.parent_cid):"null",c=e.position;a[n]={cid:n,parentCid:r,position:c,screen:e},void 0===o[r]&&(o[r]=[]),o[r].push(n),i++}}),Object.values(o).forEach(function(e){return e.sort(function(e,t){return a[e].position-a[t].position})});var c={};return n.forEach(function(e){var t=e.screen_cid;return c[t]=(c[t]||0)+1}),{rootCid:"null",nodeMap:a,childListMap:o,screenCount:i,screenCommentThreadCountMap:c}}n.d(t,"a",function(){return E});var c=n("Ebzz"),s=n.n(c),u=n("eBYd"),l=n.n(u),p=n("XUrE"),d=n.n(p),f=n("5VFw"),h=(n.n(f),n("AxSz")),m=n("WCZ4"),y=n("c0vO"),v=n.n(y),g=n("uuwI"),b=n.n(g),_=n("a8Au"),w=n.n(_),E=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.setContentRef=function(e){o.contentRef=e},o.contentRef=null,o.setCollapseKeySet=function(e){return o.setState({collapseKeySet:e})},o.toggleScreenList=o.toggleScreenList.bind(o),o.state={collapseKeySet:new Set,isScreenListExpanded:!0},o}return o(t,e),t.prototype.componentDidMount=function(){f(this.$root).tooltip({selector:'[data-toggle="tooltip"]',container:"body",trigger:"hover"})},t.prototype.componentDidUpdate=function(e,t){var n=this;t.isScreenListExpanded&&!this.state.isScreenListExpanded?setTimeout(function(){n.$toggler.classList.add(w.a.collapse)},0):!t.isScreenListExpanded&&this.state.isScreenListExpanded&&setTimeout(function(){n.$toggler.classList.remove(w.a.collapse)},0)},t.prototype.toggleScreenList=function(e){this.setState(function(e){return{isScreenListExpanded:!e.isScreenListExpanded}})},t.prototype.render=function(){var e,t=this,n=this.props,r=n.screensState,a=n.commentThreadsState,o=n.layersContainer,c=n.commentContainer,s=n.currentState,u=s.projectCid,p=s.screenCid,f=n.dispatch,m=this.state,y=m.collapseKeySet,v=m.isScreenListExpanded,g=i(r,u,a),_=g.rootCid,E=g.nodeMap,C=g.childListMap,x=g.screenCount,M=g.screenCommentThreadCountMap,j={screenCid:p,dispatch:f,collapseKeySet:y,rootCid:_,nodeMap:E,childListMap:C,screenCommentThreadCountMap:M,setCollapseKeySet:this.setCollapseKeySet,isLayersActive:o.isActive,isCommentActive:c.isActive},O=d()(b.a.subPanel,(e={},e[b.a.isPanelItemOpen]=v||!o.isActive,e));return l.a.createElement("div",{className:O,style:{overflow:"hidden"},ref:function(e){return t.$root=e}},l.a.createElement("div",{className:b.a.panelItemHeader+" "+w.a.screenListHeader,onClick:this.toggleScreenList},l.a.createElement("p",{className:w.a.listHeader},I18N.preview.screen.panel,l.a.createElement("span",{className:"screen-count",title:h.a.I18N.preview.screen.total_page,"data-toggle":"tooltip","data-placement":"bottom"}," "+I18N.preview.screen.open_paren+(x>999?"999+":x)+h.a.I18N.preview.screen.close_paren)),l.a.createElement("div",{className:w.a.toggler,ref:function(e){return t.$toggler=e}},l.a.createElement("i",{className:"fa fa-caret-down"}))),v&&l.a.createElement(S,j))},t}(l.a.PureComponent);E.propTypes={screensState:s.a.array,commentThreadsState:s.a.array,userState:s.a.object,currentState:s.a.object,screenContainer:s.a.object,dispatch:s.a.func};var S=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.renderRootScreens=function(e){var t=e.rootCid;return e.childListMap[t].map(function(t){return l.a.createElement(C,{key:t,cid:t,level:0,treeProps:e})})},t.prototype.render=function(){var e=this,t=this.props,n=t.collapseKeySet,r=t.screenCid,a=t.dispatch,o=t.rootCid,i=t.nodeMap,c=t.childListMap,s=t.screenCommentThreadCountMap,u=t.setCollapseKeySet,p=t.isLayersActive,d=t.isCommentActive;return l.a.createElement("div",{ref:this.setContentRef,className:[v.a.preview_panel_content,w.a.screen_panel_content,w.a.tree_link].join(" ")},l.a.createElement("div",{className:w.a.separator}),l.a.createElement("div",{ref:function(t){return e.$scrollContainer=t},className:w.a.container},this.renderRootScreens({rootCid:o,nodeMap:i,childListMap:c,screenCommentThreadCountMap:s,collapseKeySet:n,selectScreenCid:r,setCollapseKeySet:u,dispatch:a,isLayersActive:p,isCommentActive:d})))},t}(l.a.PureComponent),C=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.doSwitchComment=function(e){e.stopPropagation();var t=o.props.treeProps,n=t.dispatch,r=t.isCommentActive;o.doSelect(),MB.currentScreen.height>MB.currentScreen.dH()&&MB.runner.reload(!0),n({type:"entry:comment:set:active",payload:{isActive:!r}})},o.doSelect=function(){var e=o.props,t=e.cid,n=e.treeProps,r=n.selectScreenCid,a=n.dispatch,i=n.isLayersActive;!(r===t)&&a({type:"entry:current:set-screen",payload:{cid:t,shouldFetchLayer:i}})},o.toggleExpand=function(e){e.stopPropagation();var t=o.props,n=t.cid,r=t.treeProps,a=r.collapseKeySet,i=r.setCollapseKeySet,c=new Set(a);a.has(n)?c.delete(n):c.add(n),i(c)},o}return o(t,e),t.prototype.renderSubLevel=function(){var e=this.props,n=e.cid,r=e.level,a=e.treeProps,o=0===r;return l.a.createElement("div",{"data-css":"group",className:o?w.a.screen_item_root_tree_link:""},a.childListMap[n].map(function(e){return l.a.createElement(t,{key:e,cid:e,level:r+1,treeProps:a})}))},t.prototype.render=function(){var e=this.props,t=e.cid,n=e.level,r=e.treeProps,a=r.nodeMap,o=r.childListMap,i=r.screenCommentThreadCountMap,c=r.collapseKeySet,s=r.selectScreenCid,u=a[t].screen,p=s===t,f=0===n,y=!c.has(t),v=o[t]&&o[t].length>0,g=i[t]||0,b=d()("fa",{"fa-caret-right":!y,"fa-caret-down":y});return l.a.createElement("div",{"data-css":f?"root":"item"},l.a.createElement("div",{className:[w.a.screen_item,p?w.a.screen_item_select:"",f?w.a.screen_item_root:w.a.screen_item_sub].join(" "),"data-toggle":"tooltip","data-placement":"left",title:u.name,onClick:p?v?this.toggleExpand:null:this.doSelect,style:{paddingLeft:2+12*n+"px"}},v&&l.a.createElement("span",{className:w.a.groupToggler},l.a.createElement("div",{onClick:this.toggleExpand},l.a.createElement("i",{className:b}))),l.a.createElement("div",{className:w.a.screen},l.a.createElement(m.a,{type:"mb",name:"layout",className:w.a.screenIcon}),l.a.createElement("span",{className:w.a.screenName},h.a.MB.unescape(u.name)),g>0&&l.a.createElement("span",{className:w.a.commentAddon,onClick:this.doSwitchComment},l.a.createElement(m.a,{type:"mb",name:"single-comment",className:w.a.commentIcon}),g))),v&&y&&this.renderSubLevel())},t}(l.a.PureComponent);C.propTypes={cid:s.a.string,level:s.a.number,treeProps:s.a.object}},zwaY:function(e,t){e.exports={checkbox:"cCWGaIq429ouRCKAQ6NAm",disabled:"_1tg9fU6ejmKA7wsMhRcty4",checker:"_1IQFqC5m_rsd9HjhdZwRHh",checked:"VjMVVdQu2mDdUDCQVWdiC"}}});